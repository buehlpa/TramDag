<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 16.0.0"/>
    <title>tramdag.TramDagConfig API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note{color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.tip{color:#0a3622;background-color:#d1e7dd;border-color:#a3cfbb;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%230a3622%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%206a6%206%200%201%201%2010.174%204.31c-.203.196-.359.4-.453.619l-.762%201.769A.5.5%200%200%201%2010.5%2013a.5.5%200%200%201%200%201%20.5.5%200%200%201%200%201l-.224.447a1%201%200%200%201-.894.553H6.618a1%201%200%200%201-.894-.553L5.5%2015a.5.5%200%200%201%200-1%20.5.5%200%200%201%200-1%20.5.5%200%200%201-.46-.302l-.761-1.77a2%202%200%200%200-.453-.618A5.98%205.98%200%200%201%202%206m6-5a5%205%200%200%200-3.479%208.592c.263.254.514.564.676.941L5.83%2012h4.342l.632-1.467c.162-.377.413-.687.676-.941A5%205%200%200%200%208%201%22/%3E%3C/svg%3E");}.pdoc .alert.important{color:#055160;background-color:#cff4fc;border-color:#9eeaf9;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23055160%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%200a2%202%200%200%200-2%202v12a2%202%200%200%200%202%202h12a2%202%200%200%200%202-2V2a2%202%200%200%200-2-2zm6%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.caution{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M11.46.146A.5.5%200%200%200%2011.107%200H4.893a.5.5%200%200%200-.353.146L.146%204.54A.5.5%200%200%200%200%204.893v6.214a.5.5%200%200%200%20.146.353l4.394%204.394a.5.5%200%200%200%20.353.146h6.214a.5.5%200%200%200%20.353-.146l4.394-4.394a.5.5%200%200%200%20.146-.353V4.893a.5.5%200%200%200-.146-.353zM8%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:27px;vertical-align:bottom;width:50px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../tramdag.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;tramdag</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#TramDagConfig">TramDagConfig</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#TramDagConfig.__init__">TramDagConfig</a>
                        </li>
                        <li>
                                <a class="variable" href="#TramDagConfig.debug">debug</a>
                        </li>
                        <li>
                                <a class="variable" href="#TramDagConfig.verbose">verbose</a>
                        </li>
                        <li>
                                <a class="variable" href="#TramDagConfig.conf_dict">conf_dict</a>
                        </li>
                        <li>
                                <a class="variable" href="#TramDagConfig.CONF_DICT_PATH">CONF_DICT_PATH</a>
                        </li>
                        <li>
                                <a class="function" href="#TramDagConfig.load_json">load_json</a>
                        </li>
                        <li>
                                <a class="function" href="#TramDagConfig.update">update</a>
                        </li>
                        <li>
                                <a class="function" href="#TramDagConfig.save">save</a>
                        </li>
                        <li>
                                <a class="function" href="#TramDagConfig.compute_levels">compute_levels</a>
                        </li>
                        <li>
                                <a class="function" href="#TramDagConfig.plot_dag">plot_dag</a>
                        </li>
                        <li>
                                <a class="function" href="#TramDagConfig.setup_configuration">setup_configuration</a>
                        </li>
                        <li>
                                <a class="function" href="#TramDagConfig.set_data_type">set_data_type</a>
                        </li>
                        <li>
                                <a class="function" href="#TramDagConfig.set_meta_adj_matrix">set_meta_adj_matrix</a>
                        </li>
                        <li>
                                <a class="function" href="#TramDagConfig.set_tramdag_nn_models">set_tramdag_nn_models</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22160%22%20viewBox%3D%220%200%20150%2080%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M132.316%2048.886c.276-4.679%202.342-6.698%204.409-7.982s4.27-1.165%206.751-1.055c1.586.07%203.044.156%204.222-.482%201.142-.619%202.026-1.932%202.162-3.739.268-3.576-1.929-5.368-5.006-5.551s-7.599.524-10.517%201.606c-4.455%201.652-8.588%206.606-9.552%208.992s-2.342%206.193-1.745%2010.873%202.664%209.221%205.878%2011.79%205.878%203.808%2010.103%204.312%203.444.229%206.062.229%205.006-2.202%204.914-4.909-2.296-5.001-4.501-4.863-3.077.505-5.281.229-7.715-2.064-7.899-9.451z%22%20fill%3D%22%23198754%22/%3E%3Ccircle%20cx%3D%22101.504%22%20cy%3D%2248.943%22%20r%3D%2214.208%22%20fill%3D%22none%22%20stroke%3D%22%23198754%22%20stroke-width%3D%229.354%22/%3E%3Cpath%20d%3D%22M87.81.002c-3.637.065-5.001.454-7.014%201.232s-3.443%201.363-6.3%204.282c-1.723%201.76-3.148%205.019-3.776%207.329-.413%201.521-.316%202.63-.316%202.63l-.195%2034.612c.065%205.774-6.755%208.305-9.612%208.37s-9.678-1.038-9.743-9.408%207.128-9.521%208.362-9.521c1.413-.13%202.526-.021%203.718-.016%202.071.009%204.157-.778%204.092-4.671s-4.157-4.736-4.157-4.736c-6.3-.843-11.43%202.206-11.43%202.206S40.917%2038.15%2041.372%2049.634%2051.568%2068.19%2061.311%2068.125s18.316-7.007%2018.445-17.193l.13-22.772c.046-2.291%202.683-3.644%204.476-4.203.745-.232%201.694-.274%201.694-.274l10.457-.13s4.871-.324%207.729-3.114%204.352-6.294%204.352-6.294.974-3.049.13-4.606-.195-1.233-2.792-3.309-8.573-4.477-8.573-4.477S91.447-.063%2087.81.002zM0%2047.169l.065%2028.417S0%2080.127%204.481%2079.997s5.072-3.866%205.049-4.152l-.113-28.482s1.624-7.656%209.937-7.721%2010.002%206.942%2010.002%208.499-.909%2010.51-9.093%2010.51c-.948%200-2.99-.567-4.145-.272-3.919%201-3.194%204.554-3.194%204.554s.065%205.061%207.404%204.996%2018.575-6.034%2018.575-19.074S26.953%2030.04%2019.549%2029.91%201.234%2035.296%200%2047.169z%22%20fill%3D%22%23198754%22/%3E%3Cg%20transform%3D%22matrix%28.325601%200%200%20.325256%20-10.32669%20-45.802786%29%22%3E%3Ccircle%20cx%3D%22297.554%22%20cy%3D%22172.286%22%20r%3D%2216.5%22%20fill%3D%22%23fff%22/%3E%3Cellipse%20cx%3D%22297.709%22%20cy%3D%22172.642%22%20rx%3D%2211.071%22%20ry%3D%2210.871%22%20fill%3D%22%23105a48%22/%3E%3Ccircle%20cx%3D%22304.104%22%20cy%3D%22167.667%22%20r%3D%224.5%22%20fill%3D%22%23fff%22/%3E%3C/g%3E%3Cpath%20d%3D%22M94.661%2017.032l.893-1.476s.99.714%201.916.925%201.575.114%202.955.114l14.565-.162c1.283-.032%203.085-.762%203.02-3.293s-.373-3.503-.373-3.503l1.283-.487s.52.503.877%201.573.309%201.995.292%202.66-.227%201.541-.227%201.541%201.564-.308%202.359-1.038.823-.779%201.489-1.508.812-.86.812-.86.552-.13.877.26.341.957.065%201.46-1.672%202.206-3.247%203.066-2.76%201.427-3.929%201.768-3.848.73-7.063.714l-10.944-.114s-2.143-.081-3.02-.373-2.241-.973-2.598-1.265z%22%20fill%3D%22%23d36d49%22/%3E%3Cg%20fill%3D%22%23105a48%22%3E%3Cellipse%20cx%3D%2293.052%22%20cy%3D%2243.567%22%20rx%3D%22.869%22%20ry%3D%221.014%22%20transform%3D%22rotate%28341.022%29%22/%3E%3Cellipse%20cx%3D%22104.3%22%20cy%3D%22-16.184%22%20rx%3D%22.865%22%20ry%3D%221.009%22%20transform%3D%22rotate%2814.786%29%22/%3E%3C/g%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../tramdag.html">tramdag</a><wbr>.TramDagConfig    </h1>

                        <div class="docstring"><p>Copyright 2025 Zurich University of Applied Sciences (ZHAW)
Pascal Buehler, Beate Sick, Oliver Duerr</p>

<p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>

<pre><code>http://www.apache.org/licenses/LICENSE-2.0
</code></pre>

<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
</div>

                        <input id="mod-TramDagConfig-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-TramDagConfig-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a><span class="sd">Copyright 2025 Zurich University of Applied Sciences (ZHAW)</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="sd">Pascal Buehler, Beate Sick, Oliver Duerr</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="sd">Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="sd">you may not use this file except in compliance with the License.</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a><span class="sd">You may obtain a copy of the License at</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="sd">    http://www.apache.org/licenses/LICENSE-2.0</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a><span class="sd">Unless required by applicable law or agreed to in writing, software</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a><span class="sd">distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="sd">WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a><span class="sd">See the License for the specific language governing permissions and</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a><span class="sd">limitations under the License.</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">networkx</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">nx</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib.patches</span><span class="w"> </span><span class="kn">import</span> <span class="n">Patch</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.utils.configuration</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a><span class="c1"># renamme set _meta_adj amtrix</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a><span class="k">class</span><span class="w"> </span><span class="nc">TramDagConfig</span><span class="p">:</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a><span class="sd">    Configuration manager for TRAM-DAG experiments.</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a><span class="sd">    This class encapsulates:</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a><span class="sd">    - The experiment configuration dictionary (`conf_dict`).</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a><span class="sd">    - Its backing file path (`CONF_DICT_PATH`).</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a><span class="sd">    - Utilities to load, validate, modify, and persist configuration.</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a><span class="sd">    - DAG visualization and interactive editing helpers.</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a><span class="sd">    Typical usage</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a><span class="sd">    -------------</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a><span class="sd">    - Load existing configuration from disk via `TramDagConfig.load_json`.</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a><span class="sd">    - Or create/reuse experiment setup via `TramDagConfig().setup_configuration`.</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a><span class="sd">    - Update sections such as `data_type`, adjacency matrix, and neural network</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a><span class="sd">    model names using the provided methods.</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a>        
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conf_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="n">_verify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a><span class="sd">        Initialize a TramDagConfig instance.</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a><span class="sd">        Parameters</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a><span class="sd">        ----------</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a><span class="sd">        conf_dict : dict or None, optional</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a><span class="sd">            Configuration dictionary. If None, an empty dict is used and can</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a><span class="sd">            be populated later. Default is None.</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a><span class="sd">        CONF_DICT_PATH : str or None, optional</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a><span class="sd">            Path to the configuration file on disk. Default is None.</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a><span class="sd">        _verify : bool, optional</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a><span class="sd">            If True, run `_verify_completeness()` after initialization.</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a><span class="sd">            Default is False.</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a><span class="sd">        **kwargs</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a><span class="sd">            Additional attributes to be set on the instance. Keys &quot;conf_dict&quot;</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a><span class="sd">            and &quot;CONF_DICT_PATH&quot; are forbidden and raise a ValueError.</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a><span class="sd">        Raises</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a><span class="sd">        ------</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a><span class="sd">        ValueError</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a><span class="sd">            If any key in `kwargs` is &quot;conf_dict&quot; or &quot;CONF_DICT_PATH&quot;.</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a><span class="sd">        Notes</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a><span class="sd">        -----</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a><span class="sd">        By default, `debug` and `verbose` are set to False. They can be</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a><span class="sd">        overridden via `kwargs`.</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a>        
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a>            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;conf_dict&#39;</span><span class="p">,</span> <span class="s1">&#39;CONF_DICT_PATH&#39;</span><span class="p">]:</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot override &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39; via kwargs.&quot;</span><span class="p">)</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a>            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a>        
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span> <span class="o">=</span> <span class="n">conf_dict</span> <span class="ow">or</span> <span class="p">{}</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="n">CONF_DICT_PATH</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a>        
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a>        <span class="c1"># verification </span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a>        <span class="k">if</span> <span class="n">_verify</span><span class="p">:</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_verify_completeness</span><span class="p">()</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a>    <span class="nd">@classmethod</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">load_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span><span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a><span class="sd">        Load a configuration from a JSON file and construct a TramDagConfig.</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a><span class="sd">        Parameters</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a><span class="sd">        ----------</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a><span class="sd">        CONF_DICT_PATH : str</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a><span class="sd">            Path to the configuration JSON file.</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a><span class="sd">        debug : bool, optional</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a><span class="sd">            If True, initialize the instance with `debug=True`. Default is False.</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a><span class="sd">        Returns</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a><span class="sd">        -------</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a><span class="sd">        TramDagConfig</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a><span class="sd">            Newly created configuration instance with `conf_dict` loaded from</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a><span class="sd">            `CONF_DICT_PATH` and `_verify_completeness()` executed.</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a><span class="sd">        Raises</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a><span class="sd">        ------</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a><span class="sd">            If the configuration file cannot be found (propagated by</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a><span class="sd">            `load_configuration_dict`).</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a>        <span class="n">conf</span> <span class="o">=</span> <span class="n">load_configuration_dict</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">conf</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="o">=</span><span class="n">CONF_DICT_PATH</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">,</span> <span class="n">_verify</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a><span class="sd">        Reload the latest configuration from disk into this instance.</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a><span class="sd">        Parameters</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a><span class="sd">        ----------</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a><span class="sd">        None</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a><span class="sd">        Returns</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a><span class="sd">        -------</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a><span class="sd">        None</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a><span class="sd">        Raises</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a><span class="sd">        ------</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a><span class="sd">        ValueError</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a><span class="sd">            If `CONF_DICT_PATH` is not set on the instance.</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a><span class="sd">        Notes</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a><span class="sd">        -----</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a><span class="sd">        The current in-memory `conf_dict` is overwritten by the contents</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a><span class="sd">        loaded from `CONF_DICT_PATH`.</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;CONF_DICT_PATH&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;CONF_DICT_PATH not set  cannot update configuration.&quot;</span><span class="p">)</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a>        
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a>        
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span> <span class="o">=</span> <span class="n">load_configuration_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a><span class="sd">        Persist the current configuration dictionary to disk.</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a><span class="sd">        Parameters</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a><span class="sd">        ----------</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a><span class="sd">        CONF_DICT_PATH : str or None, optional</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a><span class="sd">            Target path for the configuration file. If None, uses</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a><span class="sd">            `self.CONF_DICT_PATH`. Default is None.</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a><span class="sd">        Returns</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a><span class="sd">        -------</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a><span class="sd">        None</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a><span class="sd">        Raises</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a><span class="sd">        ------</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a><span class="sd">        ValueError</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a><span class="sd">            If neither the function argument nor `self.CONF_DICT_PATH`</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a><span class="sd">            provides a valid path.</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a><span class="sd">        Notes</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a><span class="sd">        -----</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a><span class="sd">        The resulting file is written via `write_configuration_dict`.</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="n">CONF_DICT_PATH</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a>        <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No CONF_DICT_PATH provided to save config.&quot;</span><span class="p">)</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a>        <span class="n">write_configuration_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_verify_completeness</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a><span class="sd">        Check that the configuration is structurally complete and consistent.</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a><span class="sd">        The following checks are performed:</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a><span class="sd">        1. Top-level mandatory keys:</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a><span class="sd">        - &quot;experiment_name&quot;</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a><span class="sd">        - &quot;PATHS&quot;</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a><span class="sd">        - &quot;nodes&quot;</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a><span class="sd">        - &quot;data_type&quot;</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a><span class="sd">        - &quot;adj_matrix&quot;</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a><span class="sd">        - &quot;model_names&quot;</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a><span class="sd">        2. Per-node mandatory keys:</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a><span class="sd">        - &quot;data_type&quot;</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a><span class="sd">        - &quot;node_type&quot;</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a><span class="sd">        - &quot;parents&quot;</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a><span class="sd">        - &quot;parents_datatype&quot;</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a><span class="sd">        - &quot;transformation_terms_in_h()&quot;</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a><span class="sd">        - &quot;transformation_term_nn_models_in_h()&quot;</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a><span class="sd">        3. Ordinal / categorical levels:</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a><span class="sd">        - All ordinal variables must have a corresponding &quot;levels&quot; entry</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a><span class="sd">            under `conf_dict[&quot;nodes&quot;][var]`.</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a><span class="sd">        4. Experiment name:</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a><span class="sd">        - Must be non-empty.</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a><span class="sd">        5. Adjacency matrix:</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a><span class="sd">        - Must be valid under `validate_adj_matrix`.</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a><span class="sd">        Parameters</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a><span class="sd">        ----------</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a><span class="sd">        None</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a><span class="sd">        Returns</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a><span class="sd">        -------</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a><span class="sd">        None</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a><span class="sd">        Notes</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a><span class="sd">        -----</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a><span class="sd">        - Missing or invalid components are reported via printed warnings.</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a><span class="sd">        - Detailed debug messages are printed when `self.debug=True`.</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a>        <span class="n">mandatory_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;experiment_name&quot;</span><span class="p">,</span><span class="s2">&quot;PATHS&quot;</span><span class="p">,</span> <span class="s2">&quot;nodes&quot;</span><span class="p">,</span> <span class="s2">&quot;data_type&quot;</span><span class="p">,</span> <span class="s2">&quot;adj_matrix&quot;</span><span class="p">,</span><span class="s2">&quot;nodes&quot;</span><span class="p">,</span><span class="s2">&quot;model_names&quot;</span><span class="p">]</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a>        <span class="n">optional_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;date_of_creation&quot;</span><span class="p">,</span> <span class="s2">&quot;seed&quot;</span><span class="p">]</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a>        <span class="c1"># ---- 1. Check mandatory keys exist</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a>        <span class="n">missing</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">mandatory_keys</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="p">]</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a>        <span class="k">if</span> <span class="n">missing</span><span class="p">:</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[WARNING] Missing mandatory keys in configuration: </span><span class="si">{</span><span class="n">missing</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a>                <span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> Please add them to the configuration dict and reload.&quot;</span><span class="p">)</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a>            
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a>        <span class="c1"># --- 2. Check  if mandatory keys in nodesdict are present</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a>        <span class="n">mandatory_keys_nodes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;data_type&#39;</span><span class="p">,</span> <span class="s1">&#39;node_type&#39;</span><span class="p">,</span><span class="s1">&#39;parents&#39;</span><span class="p">,</span><span class="s1">&#39;parents_datatype&#39;</span><span class="p">,</span><span class="s1">&#39;transformation_terms_in_h()&#39;</span><span class="p">,</span><span class="s1">&#39;transformation_term_nn_models_in_h()&#39;</span><span class="p">]</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a>        <span class="n">optional_keys_nodes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;levels&quot;</span><span class="p">]</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a>        <span class="k">for</span> <span class="n">node</span><span class="p">,</span> <span class="n">node_dict</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nodes&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a>            <span class="c1"># check missing mandatory keys</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a>            <span class="n">missing_node_keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">mandatory_keys_nodes</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">node_dict</span><span class="p">]</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a>            <span class="k">if</span> <span class="n">missing_node_keys</span><span class="p">:</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[WARNING] Node &#39;</span><span class="si">{</span><span class="n">node</span><span class="si">}</span><span class="s2">&#39; is missing mandatory keys: </span><span class="si">{</span><span class="n">missing_node_keys</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a>                
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a>        
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verify_levels_dict</span><span class="p">():</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG] levels are present for all ordinal variables in configuration dict.&quot;</span><span class="p">)</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a>            <span class="k">pass</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[WARNING]  levels are missing for some ordinal variables in configuration dict. THIS will FAIL in model training later!</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a>                <span class="s2">&quot; Please provide levels manually to config and reload or compute levels from data using the method compute_levels().</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a>                <span class="s2">&quot; e.g. cfg.compute_levels(train_df) # computes levels from training data and writes to cfg&quot;</span><span class="p">)</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verify_experiment_name</span><span class="p">():</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG] experiment_name is valid in configuration dict.&quot;</span><span class="p">)</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a>            <span class="k">pass</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a>        
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verify_adj_matrix</span><span class="p">():</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG] adj_matrix is valid in configuration dict.&quot;</span><span class="p">)</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a>            <span class="k">pass</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_verify_levels_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a><span class="sd">        Verify that all ordinal variables have levels specified in the config.</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a><span class="sd">        Parameters</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a><span class="sd">        ----------</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a><span class="sd">        None</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a><span class="sd">        Returns</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a><span class="sd">        -------</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a><span class="sd">        bool</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a><span class="sd">            True if all variables declared as ordinal in ``conf_dict[&quot;data_type&quot;]``</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a><span class="sd">            have a &quot;levels&quot; entry in ``conf_dict[&quot;nodes&quot;][var]``.</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a><span class="sd">            False otherwise.</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a><span class="sd">        Notes</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a><span class="sd">        -----</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a><span class="sd">        This method does not modify the configuration; it only checks presence</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a><span class="sd">        of level information.</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a>        <span class="n">data_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;data_type&#39;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a>        <span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;nodes&#39;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">dtype</span> <span class="ow">in</span> <span class="n">data_type</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a>            <span class="k">if</span> <span class="s1">&#39;ordinal&#39;</span> <span class="ow">in</span> <span class="n">dtype</span><span class="p">:</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a>                <span class="k">if</span> <span class="n">var</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">nodes</span> <span class="ow">or</span> <span class="s1">&#39;levels&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">[</span><span class="n">var</span><span class="p">]:</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a>                    <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_verify_experiment_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a><span class="sd">        Check whether the experiment name in the configuration is valid.</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a><span class="sd">        Parameters</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a><span class="sd">        ----------</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a><span class="sd">        None</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a><span class="sd">        Returns</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a><span class="sd">        -------</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a><span class="sd">        bool</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a><span class="sd">            True if ``conf_dict[&quot;experiment_name&quot;]`` exists and is non-empty</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a><span class="sd">            after stripping whitespace. False otherwise.</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a>        <span class="n">experiment_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;experiment_name&quot;</span><span class="p">)</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a>        <span class="k">if</span> <span class="n">experiment_name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">str</span><span class="p">(</span><span class="n">experiment_name</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a>        
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_verify_adj_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a><span class="sd">        Validate the adjacency matrix stored in the configuration.</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a>
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a><span class="sd">        Parameters</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a><span class="sd">        ----------</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a><span class="sd">        None</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a><span class="sd">        Returns</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a><span class="sd">        -------</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a><span class="sd">        bool</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a><span class="sd">            True if the adjacency matrix passes `validate_adj_matrix`, False otherwise.</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a><span class="sd">        Notes</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a><span class="sd">        -----</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a><span class="sd">        If the adjacency matrix is stored as a list, it is converted to a</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a><span class="sd">        NumPy array before validation.</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a>        <span class="n">adj_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="p">[</span><span class="s1">&#39;adj_matrix&#39;</span><span class="p">]</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">adj_matrix</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a>            <span class="n">adj_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="p">[</span><span class="s1">&#39;adj_matrix&#39;</span><span class="p">])</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a>        <span class="k">if</span> <span class="n">validate_adj_matrix</span><span class="p">(</span><span class="n">adj_matrix</span><span class="p">):</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos">335</span></a>
</span><span id="L-336"><a href="#L-336"><span class="linenos">336</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">compute_levels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">write</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos">337</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos">338</span></a><span class="sd">        Infer and update ordinal/categorical levels from data.</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos">339</span></a>
</span><span id="L-340"><a href="#L-340"><span class="linenos">340</span></a><span class="sd">        For each variable in the configuration&#39;s `data_type` section, this</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos">341</span></a><span class="sd">        method uses the provided DataFrame to construct a levels dictionary</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos">342</span></a><span class="sd">        and injects the corresponding &quot;levels&quot; entry into `conf_dict[&quot;nodes&quot;]`.</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos">343</span></a>
</span><span id="L-344"><a href="#L-344"><span class="linenos">344</span></a><span class="sd">        Parameters</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos">345</span></a><span class="sd">        ----------</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos">346</span></a><span class="sd">        df : pandas.DataFrame</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos">347</span></a><span class="sd">            DataFrame used to infer levels for configured variables.</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos">348</span></a><span class="sd">        write : bool, optional</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos">349</span></a><span class="sd">            If True and `CONF_DICT_PATH` is set, the updated configuration is</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos">350</span></a><span class="sd">            written back to disk. Default is True.</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos">351</span></a>
</span><span id="L-352"><a href="#L-352"><span class="linenos">352</span></a><span class="sd">        Returns</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos">353</span></a><span class="sd">        -------</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos">354</span></a><span class="sd">        None</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos">355</span></a>
</span><span id="L-356"><a href="#L-356"><span class="linenos">356</span></a><span class="sd">        Raises</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos">357</span></a><span class="sd">        ------</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos">358</span></a><span class="sd">        Exception</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos">359</span></a><span class="sd">            If saving the configuration fails when `write=True`.</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos">360</span></a>
</span><span id="L-361"><a href="#L-361"><span class="linenos">361</span></a><span class="sd">        Notes</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos">362</span></a><span class="sd">        -----</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos">363</span></a><span class="sd">        - Variables present in `levels_dict` but not in `conf_dict[&quot;nodes&quot;]`</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos">364</span></a><span class="sd">        trigger a warning and are skipped.</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos">365</span></a><span class="sd">        - If `self.verbose` or `self.debug` is True, a success message is printed</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos">366</span></a><span class="sd">        when the configuration is saved.</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos">367</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos">368</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos">369</span></a>        <span class="n">levels_dict</span> <span class="o">=</span> <span class="n">create_levels_dict</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="p">[</span><span class="s1">&#39;data_type&#39;</span><span class="p">])</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos">370</span></a>        
</span><span id="L-371"><a href="#L-371"><span class="linenos">371</span></a>        <span class="c1"># update nodes dict with levels</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos">372</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">levels</span> <span class="ow">in</span> <span class="n">levels_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos">373</span></a>            <span class="k">if</span> <span class="n">var</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="p">[</span><span class="s1">&#39;nodes&#39;</span><span class="p">]:</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos">374</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="p">[</span><span class="s1">&#39;nodes&#39;</span><span class="p">][</span><span class="n">var</span><span class="p">][</span><span class="s1">&#39;levels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">levels</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos">375</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos">376</span></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[WARNING] Variable &#39;</span><span class="si">{</span><span class="n">var</span><span class="si">}</span><span class="s2">&#39; not found in nodes dict. Cannot add levels.&quot;</span><span class="p">)</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos">377</span></a>        
</span><span id="L-378"><a href="#L-378"><span class="linenos">378</span></a>        <span class="k">if</span> <span class="n">write</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos">379</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos">380</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos">381</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos">382</span></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[INFO] Configuration with updated levels saved to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos">383</span></a>            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos">384</span></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[ERROR] Failed to save configuration: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos">385</span></a>
</span><span id="L-386"><a href="#L-386"><span class="linenos">386</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">plot_dag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">42</span><span class="p">,</span> <span class="n">causal_order</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos">387</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos">388</span></a><span class="sd">        Visualize the DAG defined by the configuration.</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos">389</span></a>
</span><span id="L-390"><a href="#L-390"><span class="linenos">390</span></a><span class="sd">        Nodes are categorized and colored as:</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos">391</span></a><span class="sd">        - Source nodes (no incoming edges): green.</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos">392</span></a><span class="sd">        - Sink nodes (no outgoing edges): red.</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos">393</span></a><span class="sd">        - Intermediate nodes: light blue.</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos">394</span></a>
</span><span id="L-395"><a href="#L-395"><span class="linenos">395</span></a><span class="sd">        Parameters</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos">396</span></a><span class="sd">        ----------</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos">397</span></a><span class="sd">        seed : int, optional</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos">398</span></a><span class="sd">            Random seed for layout stability in the spring layout fallback.</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos">399</span></a><span class="sd">            Default is 42.</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos">400</span></a><span class="sd">        causal_order : bool, optional</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos">401</span></a><span class="sd">            If True, attempt to use Graphviz &#39;dot&#39; layout via</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos">402</span></a><span class="sd">            `networkx.nx_agraph.graphviz_layout` to preserve causal ordering.</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos">403</span></a><span class="sd">            If False or if Graphviz is unavailable, use `spring_layout`.</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos">404</span></a><span class="sd">            Default is False.</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos">405</span></a>
</span><span id="L-406"><a href="#L-406"><span class="linenos">406</span></a><span class="sd">        Returns</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos">407</span></a><span class="sd">        -------</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos">408</span></a><span class="sd">        None</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos">409</span></a>
</span><span id="L-410"><a href="#L-410"><span class="linenos">410</span></a><span class="sd">        Raises</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos">411</span></a><span class="sd">        ------</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos">412</span></a><span class="sd">        ValueError</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos">413</span></a><span class="sd">            If `adj_matrix` or `data_type` is missing or inconsistent with each other,</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos">414</span></a><span class="sd">            or if the adjacency matrix fails validation.</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos">415</span></a>
</span><span id="L-416"><a href="#L-416"><span class="linenos">416</span></a><span class="sd">        Notes</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos">417</span></a><span class="sd">        -----</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos">418</span></a><span class="sd">        Edge labels are colored by prefix:</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos">419</span></a><span class="sd">        - &quot;ci&quot;: blue</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos">420</span></a><span class="sd">        - &quot;ls&quot;: red</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos">421</span></a><span class="sd">        - &quot;cs&quot;: green</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos">422</span></a><span class="sd">        - other: black</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos">423</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos">424</span></a>        <span class="n">adj_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;adj_matrix&quot;</span><span class="p">)</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos">425</span></a>        <span class="n">data_type</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data_type&quot;</span><span class="p">)</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos">426</span></a>
</span><span id="L-427"><a href="#L-427"><span class="linenos">427</span></a>        <span class="k">if</span> <span class="n">adj_matrix</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">data_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos">428</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Configuration must include &#39;adj_matrix&#39; and &#39;data_type&#39;.&quot;</span><span class="p">)</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos">429</span></a>
</span><span id="L-430"><a href="#L-430"><span class="linenos">430</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">adj_matrix</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos">431</span></a>            <span class="n">adj_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">adj_matrix</span><span class="p">)</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos">432</span></a>
</span><span id="L-433"><a href="#L-433"><span class="linenos">433</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">validate_adj_matrix</span><span class="p">(</span><span class="n">adj_matrix</span><span class="p">):</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos">434</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid adjacency matrix.&quot;</span><span class="p">)</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos">435</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_type</span><span class="p">)</span> <span class="o">!=</span> <span class="n">adj_matrix</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos">436</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;data_type must match adjacency matrix size.&quot;</span><span class="p">)</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos">437</span></a>
</span><span id="L-438"><a href="#L-438"><span class="linenos">438</span></a>        <span class="n">node_labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">data_type</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos">439</span></a>        <span class="n">G</span><span class="p">,</span> <span class="n">edge_labels</span> <span class="o">=</span> <span class="n">create_nx_graph</span><span class="p">(</span><span class="n">adj_matrix</span><span class="p">,</span> <span class="n">node_labels</span><span class="p">)</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos">440</span></a>
</span><span id="L-441"><a href="#L-441"><span class="linenos">441</span></a>        <span class="n">sources</span>       <span class="o">=</span> <span class="p">{</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span> <span class="k">if</span> <span class="n">G</span><span class="o">.</span><span class="n">in_degree</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">}</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos">442</span></a>        <span class="n">sinks</span>         <span class="o">=</span> <span class="p">{</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span> <span class="k">if</span> <span class="n">G</span><span class="o">.</span><span class="n">out_degree</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">}</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos">443</span></a>        <span class="n">intermediates</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span> <span class="o">-</span> <span class="n">sources</span> <span class="o">-</span> <span class="n">sinks</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos">444</span></a>
</span><span id="L-445"><a href="#L-445"><span class="linenos">445</span></a>        <span class="n">node_colors</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos">446</span></a>            <span class="s2">&quot;green&quot;</span> <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">sources</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos">447</span></a>            <span class="k">else</span> <span class="s2">&quot;red&quot;</span> <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">sinks</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos">448</span></a>            <span class="k">else</span> <span class="s2">&quot;lightblue&quot;</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos">449</span></a>            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos">450</span></a>        <span class="p">]</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos">451</span></a>
</span><span id="L-452"><a href="#L-452"><span class="linenos">452</span></a>        <span class="k">if</span> <span class="n">causal_order</span><span class="p">:</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos">453</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos">454</span></a>                <span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">nx_agraph</span><span class="o">.</span><span class="n">graphviz_layout</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">prog</span><span class="o">=</span><span class="s2">&quot;dot&quot;</span><span class="p">)</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos">455</span></a>            <span class="k">except</span> <span class="p">(</span><span class="ne">ImportError</span><span class="p">,</span> <span class="n">nx</span><span class="o">.</span><span class="n">NetworkXException</span><span class="p">):</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos">456</span></a>                <span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">spring_layout</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos">457</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos">458</span></a>            <span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">spring_layout</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos">459</span></a>
</span><span id="L-460"><a href="#L-460"><span class="linenos">460</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos">461</span></a>        <span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos">462</span></a>            <span class="n">G</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos">463</span></a>            <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos">464</span></a>            <span class="n">node_color</span><span class="o">=</span><span class="n">node_colors</span><span class="p">,</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos">465</span></a>            <span class="n">edge_color</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos">466</span></a>            <span class="n">node_size</span><span class="o">=</span><span class="mi">2500</span><span class="p">,</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos">467</span></a>            <span class="n">arrowsize</span><span class="o">=</span><span class="mi">20</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos">468</span></a>        <span class="p">)</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos">469</span></a>
</span><span id="L-470"><a href="#L-470"><span class="linenos">470</span></a>        <span class="k">for</span> <span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">),</span> <span class="n">lbl</span> <span class="ow">in</span> <span class="n">edge_labels</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos">471</span></a>            <span class="n">color</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos">472</span></a>                <span class="s2">&quot;blue&quot;</span>  <span class="k">if</span> <span class="n">lbl</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;ci&quot;</span><span class="p">)</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos">473</span></a>                <span class="k">else</span> <span class="s2">&quot;red&quot;</span>   <span class="k">if</span> <span class="n">lbl</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;ls&quot;</span><span class="p">)</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos">474</span></a>                <span class="k">else</span> <span class="s2">&quot;green&quot;</span> <span class="k">if</span> <span class="n">lbl</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;cs&quot;</span><span class="p">)</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos">475</span></a>                <span class="k">else</span> <span class="s2">&quot;black&quot;</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos">476</span></a>            <span class="p">)</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos">477</span></a>            <span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_edge_labels</span><span class="p">(</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos">478</span></a>                <span class="n">G</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos">479</span></a>                <span class="n">edge_labels</span><span class="o">=</span><span class="p">{(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span> <span class="n">lbl</span><span class="p">},</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos">480</span></a>                <span class="n">font_color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos">481</span></a>                <span class="n">font_size</span><span class="o">=</span><span class="mi">12</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos">482</span></a>            <span class="p">)</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos">483</span></a>
</span><span id="L-484"><a href="#L-484"><span class="linenos">484</span></a>        <span class="n">legend_items</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos">485</span></a>            <span class="n">Patch</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span>     <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Source&quot;</span><span class="p">),</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos">486</span></a>            <span class="n">Patch</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>       <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Sink&quot;</span><span class="p">),</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos">487</span></a>            <span class="n">Patch</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;lightblue&quot;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Intermediate&quot;</span><span class="p">)</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos">488</span></a>        <span class="p">]</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos">489</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="n">legend_items</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper right&quot;</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos">490</span></a>
</span><span id="L-491"><a href="#L-491"><span class="linenos">491</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;TRAM DAG&quot;</span><span class="p">)</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos">492</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos">493</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos">494</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos">495</span></a>
</span><span id="L-496"><a href="#L-496"><span class="linenos">496</span></a>  
</span><span id="L-497"><a href="#L-497"><span class="linenos">497</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setup_configuration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experiment_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">EXPERIMENT_DIR</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">_verify</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos">498</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos">499</span></a><span class="sd">        Create or reuse a configuration for an experiment.</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos">500</span></a>
</span><span id="L-501"><a href="#L-501"><span class="linenos">501</span></a><span class="sd">        This method behaves differently depending on how it is called:</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos">502</span></a>
</span><span id="L-503"><a href="#L-503"><span class="linenos">503</span></a><span class="sd">        1. Class call (e.g. `TramDagConfig.setup_configuration(...)`):</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos">504</span></a><span class="sd">        - Creates or loads a configuration at the resolved path.</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos">505</span></a><span class="sd">        - Returns a new `TramDagConfig` instance.</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos">506</span></a>
</span><span id="L-507"><a href="#L-507"><span class="linenos">507</span></a><span class="sd">        2. Instance call (e.g. `cfg.setup_configuration(...)`):</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos">508</span></a><span class="sd">        - Updates `self.conf_dict` and `self.CONF_DICT_PATH` in place.</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos">509</span></a><span class="sd">        - Optionally verifies completeness.</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos">510</span></a><span class="sd">        - Returns None.</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos">511</span></a>
</span><span id="L-512"><a href="#L-512"><span class="linenos">512</span></a><span class="sd">        Parameters</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos">513</span></a><span class="sd">        ----------</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos">514</span></a><span class="sd">        experiment_name : str or None, optional</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos">515</span></a><span class="sd">            Name of the experiment. If None, defaults to &quot;experiment_1&quot;.</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos">516</span></a><span class="sd">        EXPERIMENT_DIR : str or None, optional</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos">517</span></a><span class="sd">            Directory for the experiment. If None, defaults to</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos">518</span></a><span class="sd">            `&lt;cwd&gt;/&lt;experiment_name&gt;`.</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos">519</span></a><span class="sd">        debug : bool, optional</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos">520</span></a><span class="sd">            If True, initialize / update with `debug=True`. Default is False.</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos">521</span></a><span class="sd">        _verify : bool, optional</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos">522</span></a><span class="sd">            If True, call `_verify_completeness()` after loading. Default is False.</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos">523</span></a>
</span><span id="L-524"><a href="#L-524"><span class="linenos">524</span></a><span class="sd">        Returns</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos">525</span></a><span class="sd">        -------</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos">526</span></a><span class="sd">        TramDagConfig or None</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos">527</span></a><span class="sd">            - A new instance when called on the class.</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos">528</span></a><span class="sd">            - None when called on an existing instance.</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos">529</span></a>
</span><span id="L-530"><a href="#L-530"><span class="linenos">530</span></a><span class="sd">        Notes</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos">531</span></a><span class="sd">        -----</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos">532</span></a><span class="sd">        - A configuration file named &quot;configuration.json&quot; is created if it does</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos">533</span></a><span class="sd">        not exist yet.</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos">534</span></a><span class="sd">        - Underlying creation uses `create_and_write_new_configuration_dict`</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos">535</span></a><span class="sd">        and `load_configuration_dict`.</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos">536</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos">537</span></a>        <span class="n">is_class_call</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos">538</span></a>        <span class="bp">cls</span> <span class="o">=</span> <span class="bp">self</span> <span class="k">if</span> <span class="n">is_class_call</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos">539</span></a>
</span><span id="L-540"><a href="#L-540"><span class="linenos">540</span></a>        <span class="k">if</span> <span class="n">experiment_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos">541</span></a>            <span class="n">experiment_name</span> <span class="o">=</span> <span class="s2">&quot;experiment_1&quot;</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos">542</span></a>        <span class="k">if</span> <span class="n">EXPERIMENT_DIR</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos">543</span></a>            <span class="n">EXPERIMENT_DIR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="n">experiment_name</span><span class="p">)</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos">544</span></a>
</span><span id="L-545"><a href="#L-545"><span class="linenos">545</span></a>        <span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">EXPERIMENT_DIR</span><span class="p">,</span> <span class="s2">&quot;configuration.json&quot;</span><span class="p">)</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos">546</span></a>        <span class="n">DATA_PATH</span> <span class="o">=</span> <span class="n">EXPERIMENT_DIR</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos">547</span></a>
</span><span id="L-548"><a href="#L-548"><span class="linenos">548</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">EXPERIMENT_DIR</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos">549</span></a>
</span><span id="L-550"><a href="#L-550"><span class="linenos">550</span></a>        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">):</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos">551</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuration already exists: </span><span class="si">{</span><span class="n">CONF_DICT_PATH</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos">552</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos">553</span></a>            <span class="n">_</span> <span class="o">=</span> <span class="n">create_and_write_new_configuration_dict</span><span class="p">(</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos">554</span></a>                <span class="n">experiment_name</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">,</span> <span class="n">EXPERIMENT_DIR</span><span class="p">,</span> <span class="n">DATA_PATH</span><span class="p">,</span> <span class="kc">None</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos">555</span></a>            <span class="p">)</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos">556</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Created new configuration file at </span><span class="si">{</span><span class="n">CONF_DICT_PATH</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos">557</span></a>
</span><span id="L-558"><a href="#L-558"><span class="linenos">558</span></a>        <span class="n">conf</span> <span class="o">=</span> <span class="n">load_configuration_dict</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos">559</span></a>
</span><span id="L-560"><a href="#L-560"><span class="linenos">560</span></a>        <span class="k">if</span> <span class="n">is_class_call</span><span class="p">:</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos">561</span></a>            <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">conf</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="o">=</span><span class="n">CONF_DICT_PATH</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">,</span> <span class="n">_verify</span><span class="o">=</span><span class="n">_verify</span><span class="p">)</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos">562</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos">563</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span> <span class="o">=</span> <span class="n">conf</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos">564</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="n">CONF_DICT_PATH</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos">565</span></a>            <span class="k">if</span> <span class="n">_verify</span><span class="p">:</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos">566</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_verify_completeness</span><span class="p">()</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos">567</span></a>                
</span><span id="L-568"><a href="#L-568"><span class="linenos">568</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_data_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_type</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos">569</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos">570</span></a><span class="sd">        Update or write the `data_type` section of a configuration file.</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos">571</span></a>
</span><span id="L-572"><a href="#L-572"><span class="linenos">572</span></a><span class="sd">        Supports both class-level and instance-level usage:</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos">573</span></a>
</span><span id="L-574"><a href="#L-574"><span class="linenos">574</span></a><span class="sd">        - Class call:</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos">575</span></a><span class="sd">        - Requires `CONF_DICT_PATH` argument.</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos">576</span></a><span class="sd">        - Reads the file if it exists, or starts from an empty dict.</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos">577</span></a><span class="sd">        - Writes updated configuration to `CONF_DICT_PATH`.</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos">578</span></a>
</span><span id="L-579"><a href="#L-579"><span class="linenos">579</span></a><span class="sd">        - Instance call:</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos">580</span></a><span class="sd">        - Uses `self.CONF_DICT_PATH` if available, otherwise defaults to</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos">581</span></a><span class="sd">            `&lt;cwd&gt;/configuration.json` if no path is provided.</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos">582</span></a><span class="sd">        - Updates `self.conf_dict` and `self.CONF_DICT_PATH` after writing.</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos">583</span></a>
</span><span id="L-584"><a href="#L-584"><span class="linenos">584</span></a><span class="sd">        Parameters</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos">585</span></a><span class="sd">        ----------</span>
</span><span id="L-586"><a href="#L-586"><span class="linenos">586</span></a><span class="sd">        data_type : dict</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos">587</span></a><span class="sd">            Mapping `{variable_name: type_spec}`, where `type_spec` encodes</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos">588</span></a><span class="sd">            modeling types (e.g. continuous, ordinal, etc.).</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos">589</span></a><span class="sd">        CONF_DICT_PATH : str or None, optional</span>
</span><span id="L-590"><a href="#L-590"><span class="linenos">590</span></a><span class="sd">            Path to the configuration file. Must be provided for class calls.</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos">591</span></a><span class="sd">            For instance calls, defaults as described above.</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos">592</span></a>
</span><span id="L-593"><a href="#L-593"><span class="linenos">593</span></a><span class="sd">        Returns</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos">594</span></a><span class="sd">        -------</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos">595</span></a><span class="sd">        None</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos">596</span></a>
</span><span id="L-597"><a href="#L-597"><span class="linenos">597</span></a><span class="sd">        Raises</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos">598</span></a><span class="sd">        ------</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos">599</span></a><span class="sd">        ValueError</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos">600</span></a><span class="sd">            If `CONF_DICT_PATH` is missing when called on the class, or if</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos">601</span></a><span class="sd">            validation of data types fails.</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos">602</span></a>
</span><span id="L-603"><a href="#L-603"><span class="linenos">603</span></a><span class="sd">        Notes</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos">604</span></a><span class="sd">        -----</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos">605</span></a><span class="sd">        - Variable names are validated via `validate_variable_names`.</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos">606</span></a><span class="sd">        - Data type values are validated via `validate_data_types`.</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos">607</span></a><span class="sd">        - A textual summary of modeling settings is printed via</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos">608</span></a><span class="sd">        `print_data_type_modeling_setting`, if possible.</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos">609</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos">610</span></a>        <span class="n">is_class_call</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos">611</span></a>        <span class="bp">cls</span> <span class="o">=</span> <span class="bp">self</span> <span class="k">if</span> <span class="n">is_class_call</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos">612</span></a>
</span><span id="L-613"><a href="#L-613"><span class="linenos">613</span></a>        <span class="c1"># resolve path</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos">614</span></a>        <span class="k">if</span> <span class="n">CONF_DICT_PATH</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos">615</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_class_call</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;CONF_DICT_PATH&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos">616</span></a>                <span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span>
</span><span id="L-617"><a href="#L-617"><span class="linenos">617</span></a>            <span class="k">elif</span> <span class="ow">not</span> <span class="n">is_class_call</span><span class="p">:</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos">618</span></a>                <span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s2">&quot;configuration.json&quot;</span><span class="p">)</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos">619</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos">620</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;CONF_DICT_PATH must be provided when called on the class.&quot;</span><span class="p">)</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos">621</span></a>
</span><span id="L-622"><a href="#L-622"><span class="linenos">622</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos">623</span></a>            <span class="c1"># load existing or create empty configuration</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos">624</span></a>            <span class="n">configuration_dict</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos">625</span></a>                <span class="n">load_configuration_dict</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos">626</span></a>                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos">627</span></a>                <span class="k">else</span> <span class="p">{}</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos">628</span></a>            <span class="p">)</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos">629</span></a>
</span><span id="L-630"><a href="#L-630"><span class="linenos">630</span></a>            <span class="n">validate_variable_names</span><span class="p">(</span><span class="n">data_type</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos">631</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">validate_data_types</span><span class="p">(</span><span class="n">data_type</span><span class="p">):</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos">632</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid data types in the provided dictionary.&quot;</span><span class="p">)</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos">633</span></a>
</span><span id="L-634"><a href="#L-634"><span class="linenos">634</span></a>            <span class="n">configuration_dict</span><span class="p">[</span><span class="s2">&quot;data_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_type</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos">635</span></a>            <span class="n">write_configuration_dict</span><span class="p">(</span><span class="n">configuration_dict</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos">636</span></a>
</span><span id="L-637"><a href="#L-637"><span class="linenos">637</span></a>            <span class="c1"># safe printing</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos">638</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos">639</span></a>                <span class="n">print_data_type_modeling_setting</span><span class="p">(</span><span class="n">data_type</span> <span class="ow">or</span> <span class="p">{})</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos">640</span></a>            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos">641</span></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[WARNING] Could not print data type modeling settings: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos">642</span></a>
</span><span id="L-643"><a href="#L-643"><span class="linenos">643</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_class_call</span><span class="p">:</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos">644</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span> <span class="o">=</span> <span class="n">configuration_dict</span>
</span><span id="L-645"><a href="#L-645"><span class="linenos">645</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="n">CONF_DICT_PATH</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos">646</span></a>
</span><span id="L-647"><a href="#L-647"><span class="linenos">647</span></a>
</span><span id="L-648"><a href="#L-648"><span class="linenos">648</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos">649</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to update configuration: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos">650</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos">651</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuration updated successfully at </span><span class="si">{</span><span class="n">CONF_DICT_PATH</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos">652</span></a>            
</span><span id="L-653"><a href="#L-653"><span class="linenos">653</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_meta_adj_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">seed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">):</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos">654</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos">655</span></a><span class="sd">        Launch the interactive editor to set or modify the adjacency matrix.</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos">656</span></a>
</span><span id="L-657"><a href="#L-657"><span class="linenos">657</span></a><span class="sd">        This method:</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos">658</span></a>
</span><span id="L-659"><a href="#L-659"><span class="linenos">659</span></a><span class="sd">        1. Resolves the configuration path either from the argument or, for</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos">660</span></a><span class="sd">        instances, from `self.CONF_DICT_PATH`.</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos">661</span></a><span class="sd">        2. Invokes `interactive_adj_matrix` to edit the adjacency matrix.</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos">662</span></a><span class="sd">        3. For instances, reloads the updated configuration into `self.conf_dict`.</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos">663</span></a>
</span><span id="L-664"><a href="#L-664"><span class="linenos">664</span></a><span class="sd">        Parameters</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos">665</span></a><span class="sd">        ----------</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos">666</span></a><span class="sd">        CONF_DICT_PATH : str or None, optional</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos">667</span></a><span class="sd">            Path to the configuration file. Must be provided when called</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos">668</span></a><span class="sd">            on the class. For instance calls, defaults to `self.CONF_DICT_PATH`.</span>
</span><span id="L-669"><a href="#L-669"><span class="linenos">669</span></a><span class="sd">        seed : int, optional</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos">670</span></a><span class="sd">            Random seed for any layout or stochastic behavior in the interactive</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos">671</span></a><span class="sd">            editor. Default is 5.</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos">672</span></a>
</span><span id="L-673"><a href="#L-673"><span class="linenos">673</span></a><span class="sd">        Returns</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos">674</span></a><span class="sd">        -------</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos">675</span></a><span class="sd">        None</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos">676</span></a>
</span><span id="L-677"><a href="#L-677"><span class="linenos">677</span></a><span class="sd">        Raises</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos">678</span></a><span class="sd">        ------</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos">679</span></a><span class="sd">        ValueError</span>
</span><span id="L-680"><a href="#L-680"><span class="linenos">680</span></a><span class="sd">            If `CONF_DICT_PATH` is not provided and cannot be inferred</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos">681</span></a><span class="sd">            (e.g. in a class call without path).</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos">682</span></a>
</span><span id="L-683"><a href="#L-683"><span class="linenos">683</span></a><span class="sd">        Notes</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos">684</span></a><span class="sd">        -----</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos">685</span></a><span class="sd">        `self.update()` is called at the start to ensure the in-memory config</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos">686</span></a><span class="sd">        is in sync with the file before launching the editor.</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos">687</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos">688</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos">689</span></a>        <span class="n">is_class_call</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos">690</span></a>        <span class="c1"># resolve path</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos">691</span></a>        <span class="k">if</span> <span class="n">CONF_DICT_PATH</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos">692</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_class_call</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;CONF_DICT_PATH&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos">693</span></a>                <span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos">694</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos">695</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;CONF_DICT_PATH must be provided when called on the class.&quot;</span><span class="p">)</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos">696</span></a>
</span><span id="L-697"><a href="#L-697"><span class="linenos">697</span></a>        <span class="c1"># launch interactive editor</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos">698</span></a>        
</span><span id="L-699"><a href="#L-699"><span class="linenos">699</span></a>        <span class="n">interactive_adj_matrix</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">)</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos">700</span></a>
</span><span id="L-701"><a href="#L-701"><span class="linenos">701</span></a>        <span class="c1"># reload config if instance</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos">702</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_class_call</span><span class="p">:</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos">703</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span> <span class="o">=</span> <span class="n">load_configuration_dict</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos">704</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="n">CONF_DICT_PATH</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos">705</span></a>
</span><span id="L-706"><a href="#L-706"><span class="linenos">706</span></a>
</span><span id="L-707"><a href="#L-707"><span class="linenos">707</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_tramdag_nn_models</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos">708</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos">709</span></a><span class="sd">        Launch the interactive editor to set TRAM-DAG neural network model names.</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos">710</span></a>
</span><span id="L-711"><a href="#L-711"><span class="linenos">711</span></a><span class="sd">        Depending on call context:</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos">712</span></a>
</span><span id="L-713"><a href="#L-713"><span class="linenos">713</span></a><span class="sd">        - Class call:</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos">714</span></a><span class="sd">        - Requires `CONF_DICT_PATH` argument.</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos">715</span></a><span class="sd">        - Returns nothing and does not modify a specific instance.</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos">716</span></a>
</span><span id="L-717"><a href="#L-717"><span class="linenos">717</span></a><span class="sd">        - Instance call:</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos">718</span></a><span class="sd">        - Resolves `CONF_DICT_PATH` from the argument or `self.CONF_DICT_PATH`.</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos">719</span></a><span class="sd">        - Updates `self.conf_dict` and `self.CONF_DICT_PATH` if the editor</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos">720</span></a><span class="sd">            returns an updated configuration.</span>
</span><span id="L-721"><a href="#L-721"><span class="linenos">721</span></a>
</span><span id="L-722"><a href="#L-722"><span class="linenos">722</span></a><span class="sd">        Parameters</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos">723</span></a><span class="sd">        ----------</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos">724</span></a><span class="sd">        CONF_DICT_PATH : str or None, optional</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos">725</span></a><span class="sd">            Path to the configuration file. Must be provided when called on</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos">726</span></a><span class="sd">            the class. For instance calls, defaults to `self.CONF_DICT_PATH`.</span>
</span><span id="L-727"><a href="#L-727"><span class="linenos">727</span></a>
</span><span id="L-728"><a href="#L-728"><span class="linenos">728</span></a><span class="sd">        Returns</span>
</span><span id="L-729"><a href="#L-729"><span class="linenos">729</span></a><span class="sd">        -------</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos">730</span></a><span class="sd">        None</span>
</span><span id="L-731"><a href="#L-731"><span class="linenos">731</span></a>
</span><span id="L-732"><a href="#L-732"><span class="linenos">732</span></a><span class="sd">        Raises</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos">733</span></a><span class="sd">        ------</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos">734</span></a><span class="sd">        ValueError</span>
</span><span id="L-735"><a href="#L-735"><span class="linenos">735</span></a><span class="sd">            If `CONF_DICT_PATH` is not provided and cannot be inferred</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos">736</span></a><span class="sd">            (e.g. in a class call without path).</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos">737</span></a>
</span><span id="L-738"><a href="#L-738"><span class="linenos">738</span></a><span class="sd">        Notes</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos">739</span></a><span class="sd">        -----</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos">740</span></a><span class="sd">        The interactive editor is invoked via `interactive_nn_names_matrix`.</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos">741</span></a><span class="sd">        If it returns `None`, the instance configuration is left unchanged.</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos">742</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos">743</span></a>        <span class="n">is_class_call</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos">744</span></a>        <span class="k">if</span> <span class="n">CONF_DICT_PATH</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos">745</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_class_call</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;CONF_DICT_PATH&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos">746</span></a>                <span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos">747</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos">748</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;CONF_DICT_PATH must be provided when called on the class.&quot;</span><span class="p">)</span>
</span><span id="L-749"><a href="#L-749"><span class="linenos">749</span></a>
</span><span id="L-750"><a href="#L-750"><span class="linenos">750</span></a>        <span class="n">updated_conf</span> <span class="o">=</span> <span class="n">interactive_nn_names_matrix</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="L-751"><a href="#L-751"><span class="linenos">751</span></a>        <span class="k">if</span> <span class="n">updated_conf</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">is_class_call</span><span class="p">:</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos">752</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span> <span class="o">=</span> <span class="n">updated_conf</span>
</span><span id="L-753"><a href="#L-753"><span class="linenos">753</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="n">CONF_DICT_PATH</span>
</span></pre></div>


            </section>
                <section id="TramDagConfig">
                            <input id="TramDagConfig-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">TramDagConfig</span>:

                <label class="view-source-button" for="TramDagConfig-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TramDagConfig"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TramDagConfig-30"><a href="#TramDagConfig-30"><span class="linenos"> 30</span></a><span class="k">class</span><span class="w"> </span><span class="nc">TramDagConfig</span><span class="p">:</span>
</span><span id="TramDagConfig-31"><a href="#TramDagConfig-31"><span class="linenos"> 31</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig-32"><a href="#TramDagConfig-32"><span class="linenos"> 32</span></a><span class="sd">    Configuration manager for TRAM-DAG experiments.</span>
</span><span id="TramDagConfig-33"><a href="#TramDagConfig-33"><span class="linenos"> 33</span></a>
</span><span id="TramDagConfig-34"><a href="#TramDagConfig-34"><span class="linenos"> 34</span></a><span class="sd">    This class encapsulates:</span>
</span><span id="TramDagConfig-35"><a href="#TramDagConfig-35"><span class="linenos"> 35</span></a>
</span><span id="TramDagConfig-36"><a href="#TramDagConfig-36"><span class="linenos"> 36</span></a><span class="sd">    - The experiment configuration dictionary (`conf_dict`).</span>
</span><span id="TramDagConfig-37"><a href="#TramDagConfig-37"><span class="linenos"> 37</span></a><span class="sd">    - Its backing file path (`CONF_DICT_PATH`).</span>
</span><span id="TramDagConfig-38"><a href="#TramDagConfig-38"><span class="linenos"> 38</span></a><span class="sd">    - Utilities to load, validate, modify, and persist configuration.</span>
</span><span id="TramDagConfig-39"><a href="#TramDagConfig-39"><span class="linenos"> 39</span></a><span class="sd">    - DAG visualization and interactive editing helpers.</span>
</span><span id="TramDagConfig-40"><a href="#TramDagConfig-40"><span class="linenos"> 40</span></a>
</span><span id="TramDagConfig-41"><a href="#TramDagConfig-41"><span class="linenos"> 41</span></a><span class="sd">    Typical usage</span>
</span><span id="TramDagConfig-42"><a href="#TramDagConfig-42"><span class="linenos"> 42</span></a><span class="sd">    -------------</span>
</span><span id="TramDagConfig-43"><a href="#TramDagConfig-43"><span class="linenos"> 43</span></a><span class="sd">    - Load existing configuration from disk via `TramDagConfig.load_json`.</span>
</span><span id="TramDagConfig-44"><a href="#TramDagConfig-44"><span class="linenos"> 44</span></a><span class="sd">    - Or create/reuse experiment setup via `TramDagConfig().setup_configuration`.</span>
</span><span id="TramDagConfig-45"><a href="#TramDagConfig-45"><span class="linenos"> 45</span></a><span class="sd">    - Update sections such as `data_type`, adjacency matrix, and neural network</span>
</span><span id="TramDagConfig-46"><a href="#TramDagConfig-46"><span class="linenos"> 46</span></a><span class="sd">    model names using the provided methods.</span>
</span><span id="TramDagConfig-47"><a href="#TramDagConfig-47"><span class="linenos"> 47</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="TramDagConfig-48"><a href="#TramDagConfig-48"><span class="linenos"> 48</span></a>        
</span><span id="TramDagConfig-49"><a href="#TramDagConfig-49"><span class="linenos"> 49</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conf_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="n">_verify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="TramDagConfig-50"><a href="#TramDagConfig-50"><span class="linenos"> 50</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig-51"><a href="#TramDagConfig-51"><span class="linenos"> 51</span></a><span class="sd">        Initialize a TramDagConfig instance.</span>
</span><span id="TramDagConfig-52"><a href="#TramDagConfig-52"><span class="linenos"> 52</span></a>
</span><span id="TramDagConfig-53"><a href="#TramDagConfig-53"><span class="linenos"> 53</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig-54"><a href="#TramDagConfig-54"><span class="linenos"> 54</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig-55"><a href="#TramDagConfig-55"><span class="linenos"> 55</span></a><span class="sd">        conf_dict : dict or None, optional</span>
</span><span id="TramDagConfig-56"><a href="#TramDagConfig-56"><span class="linenos"> 56</span></a><span class="sd">            Configuration dictionary. If None, an empty dict is used and can</span>
</span><span id="TramDagConfig-57"><a href="#TramDagConfig-57"><span class="linenos"> 57</span></a><span class="sd">            be populated later. Default is None.</span>
</span><span id="TramDagConfig-58"><a href="#TramDagConfig-58"><span class="linenos"> 58</span></a><span class="sd">        CONF_DICT_PATH : str or None, optional</span>
</span><span id="TramDagConfig-59"><a href="#TramDagConfig-59"><span class="linenos"> 59</span></a><span class="sd">            Path to the configuration file on disk. Default is None.</span>
</span><span id="TramDagConfig-60"><a href="#TramDagConfig-60"><span class="linenos"> 60</span></a><span class="sd">        _verify : bool, optional</span>
</span><span id="TramDagConfig-61"><a href="#TramDagConfig-61"><span class="linenos"> 61</span></a><span class="sd">            If True, run `_verify_completeness()` after initialization.</span>
</span><span id="TramDagConfig-62"><a href="#TramDagConfig-62"><span class="linenos"> 62</span></a><span class="sd">            Default is False.</span>
</span><span id="TramDagConfig-63"><a href="#TramDagConfig-63"><span class="linenos"> 63</span></a><span class="sd">        **kwargs</span>
</span><span id="TramDagConfig-64"><a href="#TramDagConfig-64"><span class="linenos"> 64</span></a><span class="sd">            Additional attributes to be set on the instance. Keys &quot;conf_dict&quot;</span>
</span><span id="TramDagConfig-65"><a href="#TramDagConfig-65"><span class="linenos"> 65</span></a><span class="sd">            and &quot;CONF_DICT_PATH&quot; are forbidden and raise a ValueError.</span>
</span><span id="TramDagConfig-66"><a href="#TramDagConfig-66"><span class="linenos"> 66</span></a>
</span><span id="TramDagConfig-67"><a href="#TramDagConfig-67"><span class="linenos"> 67</span></a><span class="sd">        Raises</span>
</span><span id="TramDagConfig-68"><a href="#TramDagConfig-68"><span class="linenos"> 68</span></a><span class="sd">        ------</span>
</span><span id="TramDagConfig-69"><a href="#TramDagConfig-69"><span class="linenos"> 69</span></a><span class="sd">        ValueError</span>
</span><span id="TramDagConfig-70"><a href="#TramDagConfig-70"><span class="linenos"> 70</span></a><span class="sd">            If any key in `kwargs` is &quot;conf_dict&quot; or &quot;CONF_DICT_PATH&quot;.</span>
</span><span id="TramDagConfig-71"><a href="#TramDagConfig-71"><span class="linenos"> 71</span></a>
</span><span id="TramDagConfig-72"><a href="#TramDagConfig-72"><span class="linenos"> 72</span></a><span class="sd">        Notes</span>
</span><span id="TramDagConfig-73"><a href="#TramDagConfig-73"><span class="linenos"> 73</span></a><span class="sd">        -----</span>
</span><span id="TramDagConfig-74"><a href="#TramDagConfig-74"><span class="linenos"> 74</span></a><span class="sd">        By default, `debug` and `verbose` are set to False. They can be</span>
</span><span id="TramDagConfig-75"><a href="#TramDagConfig-75"><span class="linenos"> 75</span></a><span class="sd">        overridden via `kwargs`.</span>
</span><span id="TramDagConfig-76"><a href="#TramDagConfig-76"><span class="linenos"> 76</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig-77"><a href="#TramDagConfig-77"><span class="linenos"> 77</span></a>
</span><span id="TramDagConfig-78"><a href="#TramDagConfig-78"><span class="linenos"> 78</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="TramDagConfig-79"><a href="#TramDagConfig-79"><span class="linenos"> 79</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="TramDagConfig-80"><a href="#TramDagConfig-80"><span class="linenos"> 80</span></a>        
</span><span id="TramDagConfig-81"><a href="#TramDagConfig-81"><span class="linenos"> 81</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="TramDagConfig-82"><a href="#TramDagConfig-82"><span class="linenos"> 82</span></a>            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;conf_dict&#39;</span><span class="p">,</span> <span class="s1">&#39;CONF_DICT_PATH&#39;</span><span class="p">]:</span>
</span><span id="TramDagConfig-83"><a href="#TramDagConfig-83"><span class="linenos"> 83</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot override &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39; via kwargs.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-84"><a href="#TramDagConfig-84"><span class="linenos"> 84</span></a>            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="TramDagConfig-85"><a href="#TramDagConfig-85"><span class="linenos"> 85</span></a>        
</span><span id="TramDagConfig-86"><a href="#TramDagConfig-86"><span class="linenos"> 86</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span> <span class="o">=</span> <span class="n">conf_dict</span> <span class="ow">or</span> <span class="p">{}</span>
</span><span id="TramDagConfig-87"><a href="#TramDagConfig-87"><span class="linenos"> 87</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="n">CONF_DICT_PATH</span>
</span><span id="TramDagConfig-88"><a href="#TramDagConfig-88"><span class="linenos"> 88</span></a>        
</span><span id="TramDagConfig-89"><a href="#TramDagConfig-89"><span class="linenos"> 89</span></a>        <span class="c1"># verification </span>
</span><span id="TramDagConfig-90"><a href="#TramDagConfig-90"><span class="linenos"> 90</span></a>        <span class="k">if</span> <span class="n">_verify</span><span class="p">:</span>
</span><span id="TramDagConfig-91"><a href="#TramDagConfig-91"><span class="linenos"> 91</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_verify_completeness</span><span class="p">()</span>
</span><span id="TramDagConfig-92"><a href="#TramDagConfig-92"><span class="linenos"> 92</span></a>
</span><span id="TramDagConfig-93"><a href="#TramDagConfig-93"><span class="linenos"> 93</span></a>    <span class="nd">@classmethod</span>
</span><span id="TramDagConfig-94"><a href="#TramDagConfig-94"><span class="linenos"> 94</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">load_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span><span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="TramDagConfig-95"><a href="#TramDagConfig-95"><span class="linenos"> 95</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig-96"><a href="#TramDagConfig-96"><span class="linenos"> 96</span></a><span class="sd">        Load a configuration from a JSON file and construct a TramDagConfig.</span>
</span><span id="TramDagConfig-97"><a href="#TramDagConfig-97"><span class="linenos"> 97</span></a>
</span><span id="TramDagConfig-98"><a href="#TramDagConfig-98"><span class="linenos"> 98</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig-99"><a href="#TramDagConfig-99"><span class="linenos"> 99</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig-100"><a href="#TramDagConfig-100"><span class="linenos">100</span></a><span class="sd">        CONF_DICT_PATH : str</span>
</span><span id="TramDagConfig-101"><a href="#TramDagConfig-101"><span class="linenos">101</span></a><span class="sd">            Path to the configuration JSON file.</span>
</span><span id="TramDagConfig-102"><a href="#TramDagConfig-102"><span class="linenos">102</span></a><span class="sd">        debug : bool, optional</span>
</span><span id="TramDagConfig-103"><a href="#TramDagConfig-103"><span class="linenos">103</span></a><span class="sd">            If True, initialize the instance with `debug=True`. Default is False.</span>
</span><span id="TramDagConfig-104"><a href="#TramDagConfig-104"><span class="linenos">104</span></a>
</span><span id="TramDagConfig-105"><a href="#TramDagConfig-105"><span class="linenos">105</span></a><span class="sd">        Returns</span>
</span><span id="TramDagConfig-106"><a href="#TramDagConfig-106"><span class="linenos">106</span></a><span class="sd">        -------</span>
</span><span id="TramDagConfig-107"><a href="#TramDagConfig-107"><span class="linenos">107</span></a><span class="sd">        TramDagConfig</span>
</span><span id="TramDagConfig-108"><a href="#TramDagConfig-108"><span class="linenos">108</span></a><span class="sd">            Newly created configuration instance with `conf_dict` loaded from</span>
</span><span id="TramDagConfig-109"><a href="#TramDagConfig-109"><span class="linenos">109</span></a><span class="sd">            `CONF_DICT_PATH` and `_verify_completeness()` executed.</span>
</span><span id="TramDagConfig-110"><a href="#TramDagConfig-110"><span class="linenos">110</span></a>
</span><span id="TramDagConfig-111"><a href="#TramDagConfig-111"><span class="linenos">111</span></a><span class="sd">        Raises</span>
</span><span id="TramDagConfig-112"><a href="#TramDagConfig-112"><span class="linenos">112</span></a><span class="sd">        ------</span>
</span><span id="TramDagConfig-113"><a href="#TramDagConfig-113"><span class="linenos">113</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="TramDagConfig-114"><a href="#TramDagConfig-114"><span class="linenos">114</span></a><span class="sd">            If the configuration file cannot be found (propagated by</span>
</span><span id="TramDagConfig-115"><a href="#TramDagConfig-115"><span class="linenos">115</span></a><span class="sd">            `load_configuration_dict`).</span>
</span><span id="TramDagConfig-116"><a href="#TramDagConfig-116"><span class="linenos">116</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig-117"><a href="#TramDagConfig-117"><span class="linenos">117</span></a>
</span><span id="TramDagConfig-118"><a href="#TramDagConfig-118"><span class="linenos">118</span></a>        <span class="n">conf</span> <span class="o">=</span> <span class="n">load_configuration_dict</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="TramDagConfig-119"><a href="#TramDagConfig-119"><span class="linenos">119</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">conf</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="o">=</span><span class="n">CONF_DICT_PATH</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">,</span> <span class="n">_verify</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="TramDagConfig-120"><a href="#TramDagConfig-120"><span class="linenos">120</span></a>
</span><span id="TramDagConfig-121"><a href="#TramDagConfig-121"><span class="linenos">121</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="TramDagConfig-122"><a href="#TramDagConfig-122"><span class="linenos">122</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig-123"><a href="#TramDagConfig-123"><span class="linenos">123</span></a><span class="sd">        Reload the latest configuration from disk into this instance.</span>
</span><span id="TramDagConfig-124"><a href="#TramDagConfig-124"><span class="linenos">124</span></a>
</span><span id="TramDagConfig-125"><a href="#TramDagConfig-125"><span class="linenos">125</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig-126"><a href="#TramDagConfig-126"><span class="linenos">126</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig-127"><a href="#TramDagConfig-127"><span class="linenos">127</span></a><span class="sd">        None</span>
</span><span id="TramDagConfig-128"><a href="#TramDagConfig-128"><span class="linenos">128</span></a>
</span><span id="TramDagConfig-129"><a href="#TramDagConfig-129"><span class="linenos">129</span></a><span class="sd">        Returns</span>
</span><span id="TramDagConfig-130"><a href="#TramDagConfig-130"><span class="linenos">130</span></a><span class="sd">        -------</span>
</span><span id="TramDagConfig-131"><a href="#TramDagConfig-131"><span class="linenos">131</span></a><span class="sd">        None</span>
</span><span id="TramDagConfig-132"><a href="#TramDagConfig-132"><span class="linenos">132</span></a>
</span><span id="TramDagConfig-133"><a href="#TramDagConfig-133"><span class="linenos">133</span></a><span class="sd">        Raises</span>
</span><span id="TramDagConfig-134"><a href="#TramDagConfig-134"><span class="linenos">134</span></a><span class="sd">        ------</span>
</span><span id="TramDagConfig-135"><a href="#TramDagConfig-135"><span class="linenos">135</span></a><span class="sd">        ValueError</span>
</span><span id="TramDagConfig-136"><a href="#TramDagConfig-136"><span class="linenos">136</span></a><span class="sd">            If `CONF_DICT_PATH` is not set on the instance.</span>
</span><span id="TramDagConfig-137"><a href="#TramDagConfig-137"><span class="linenos">137</span></a>
</span><span id="TramDagConfig-138"><a href="#TramDagConfig-138"><span class="linenos">138</span></a><span class="sd">        Notes</span>
</span><span id="TramDagConfig-139"><a href="#TramDagConfig-139"><span class="linenos">139</span></a><span class="sd">        -----</span>
</span><span id="TramDagConfig-140"><a href="#TramDagConfig-140"><span class="linenos">140</span></a><span class="sd">        The current in-memory `conf_dict` is overwritten by the contents</span>
</span><span id="TramDagConfig-141"><a href="#TramDagConfig-141"><span class="linenos">141</span></a><span class="sd">        loaded from `CONF_DICT_PATH`.</span>
</span><span id="TramDagConfig-142"><a href="#TramDagConfig-142"><span class="linenos">142</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig-143"><a href="#TramDagConfig-143"><span class="linenos">143</span></a>
</span><span id="TramDagConfig-144"><a href="#TramDagConfig-144"><span class="linenos">144</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;CONF_DICT_PATH&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TramDagConfig-145"><a href="#TramDagConfig-145"><span class="linenos">145</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;CONF_DICT_PATH not set  cannot update configuration.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-146"><a href="#TramDagConfig-146"><span class="linenos">146</span></a>        
</span><span id="TramDagConfig-147"><a href="#TramDagConfig-147"><span class="linenos">147</span></a>        
</span><span id="TramDagConfig-148"><a href="#TramDagConfig-148"><span class="linenos">148</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span> <span class="o">=</span> <span class="n">load_configuration_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="TramDagConfig-149"><a href="#TramDagConfig-149"><span class="linenos">149</span></a>
</span><span id="TramDagConfig-150"><a href="#TramDagConfig-150"><span class="linenos">150</span></a>
</span><span id="TramDagConfig-151"><a href="#TramDagConfig-151"><span class="linenos">151</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="TramDagConfig-152"><a href="#TramDagConfig-152"><span class="linenos">152</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig-153"><a href="#TramDagConfig-153"><span class="linenos">153</span></a><span class="sd">        Persist the current configuration dictionary to disk.</span>
</span><span id="TramDagConfig-154"><a href="#TramDagConfig-154"><span class="linenos">154</span></a>
</span><span id="TramDagConfig-155"><a href="#TramDagConfig-155"><span class="linenos">155</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig-156"><a href="#TramDagConfig-156"><span class="linenos">156</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig-157"><a href="#TramDagConfig-157"><span class="linenos">157</span></a><span class="sd">        CONF_DICT_PATH : str or None, optional</span>
</span><span id="TramDagConfig-158"><a href="#TramDagConfig-158"><span class="linenos">158</span></a><span class="sd">            Target path for the configuration file. If None, uses</span>
</span><span id="TramDagConfig-159"><a href="#TramDagConfig-159"><span class="linenos">159</span></a><span class="sd">            `self.CONF_DICT_PATH`. Default is None.</span>
</span><span id="TramDagConfig-160"><a href="#TramDagConfig-160"><span class="linenos">160</span></a>
</span><span id="TramDagConfig-161"><a href="#TramDagConfig-161"><span class="linenos">161</span></a><span class="sd">        Returns</span>
</span><span id="TramDagConfig-162"><a href="#TramDagConfig-162"><span class="linenos">162</span></a><span class="sd">        -------</span>
</span><span id="TramDagConfig-163"><a href="#TramDagConfig-163"><span class="linenos">163</span></a><span class="sd">        None</span>
</span><span id="TramDagConfig-164"><a href="#TramDagConfig-164"><span class="linenos">164</span></a>
</span><span id="TramDagConfig-165"><a href="#TramDagConfig-165"><span class="linenos">165</span></a><span class="sd">        Raises</span>
</span><span id="TramDagConfig-166"><a href="#TramDagConfig-166"><span class="linenos">166</span></a><span class="sd">        ------</span>
</span><span id="TramDagConfig-167"><a href="#TramDagConfig-167"><span class="linenos">167</span></a><span class="sd">        ValueError</span>
</span><span id="TramDagConfig-168"><a href="#TramDagConfig-168"><span class="linenos">168</span></a><span class="sd">            If neither the function argument nor `self.CONF_DICT_PATH`</span>
</span><span id="TramDagConfig-169"><a href="#TramDagConfig-169"><span class="linenos">169</span></a><span class="sd">            provides a valid path.</span>
</span><span id="TramDagConfig-170"><a href="#TramDagConfig-170"><span class="linenos">170</span></a>
</span><span id="TramDagConfig-171"><a href="#TramDagConfig-171"><span class="linenos">171</span></a><span class="sd">        Notes</span>
</span><span id="TramDagConfig-172"><a href="#TramDagConfig-172"><span class="linenos">172</span></a><span class="sd">        -----</span>
</span><span id="TramDagConfig-173"><a href="#TramDagConfig-173"><span class="linenos">173</span></a><span class="sd">        The resulting file is written via `write_configuration_dict`.</span>
</span><span id="TramDagConfig-174"><a href="#TramDagConfig-174"><span class="linenos">174</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig-175"><a href="#TramDagConfig-175"><span class="linenos">175</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="n">CONF_DICT_PATH</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span>
</span><span id="TramDagConfig-176"><a href="#TramDagConfig-176"><span class="linenos">176</span></a>        <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TramDagConfig-177"><a href="#TramDagConfig-177"><span class="linenos">177</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No CONF_DICT_PATH provided to save config.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-178"><a href="#TramDagConfig-178"><span class="linenos">178</span></a>        <span class="n">write_configuration_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</span><span id="TramDagConfig-179"><a href="#TramDagConfig-179"><span class="linenos">179</span></a>
</span><span id="TramDagConfig-180"><a href="#TramDagConfig-180"><span class="linenos">180</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_verify_completeness</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="TramDagConfig-181"><a href="#TramDagConfig-181"><span class="linenos">181</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig-182"><a href="#TramDagConfig-182"><span class="linenos">182</span></a><span class="sd">        Check that the configuration is structurally complete and consistent.</span>
</span><span id="TramDagConfig-183"><a href="#TramDagConfig-183"><span class="linenos">183</span></a>
</span><span id="TramDagConfig-184"><a href="#TramDagConfig-184"><span class="linenos">184</span></a><span class="sd">        The following checks are performed:</span>
</span><span id="TramDagConfig-185"><a href="#TramDagConfig-185"><span class="linenos">185</span></a>
</span><span id="TramDagConfig-186"><a href="#TramDagConfig-186"><span class="linenos">186</span></a><span class="sd">        1. Top-level mandatory keys:</span>
</span><span id="TramDagConfig-187"><a href="#TramDagConfig-187"><span class="linenos">187</span></a><span class="sd">        - &quot;experiment_name&quot;</span>
</span><span id="TramDagConfig-188"><a href="#TramDagConfig-188"><span class="linenos">188</span></a><span class="sd">        - &quot;PATHS&quot;</span>
</span><span id="TramDagConfig-189"><a href="#TramDagConfig-189"><span class="linenos">189</span></a><span class="sd">        - &quot;nodes&quot;</span>
</span><span id="TramDagConfig-190"><a href="#TramDagConfig-190"><span class="linenos">190</span></a><span class="sd">        - &quot;data_type&quot;</span>
</span><span id="TramDagConfig-191"><a href="#TramDagConfig-191"><span class="linenos">191</span></a><span class="sd">        - &quot;adj_matrix&quot;</span>
</span><span id="TramDagConfig-192"><a href="#TramDagConfig-192"><span class="linenos">192</span></a><span class="sd">        - &quot;model_names&quot;</span>
</span><span id="TramDagConfig-193"><a href="#TramDagConfig-193"><span class="linenos">193</span></a>
</span><span id="TramDagConfig-194"><a href="#TramDagConfig-194"><span class="linenos">194</span></a><span class="sd">        2. Per-node mandatory keys:</span>
</span><span id="TramDagConfig-195"><a href="#TramDagConfig-195"><span class="linenos">195</span></a><span class="sd">        - &quot;data_type&quot;</span>
</span><span id="TramDagConfig-196"><a href="#TramDagConfig-196"><span class="linenos">196</span></a><span class="sd">        - &quot;node_type&quot;</span>
</span><span id="TramDagConfig-197"><a href="#TramDagConfig-197"><span class="linenos">197</span></a><span class="sd">        - &quot;parents&quot;</span>
</span><span id="TramDagConfig-198"><a href="#TramDagConfig-198"><span class="linenos">198</span></a><span class="sd">        - &quot;parents_datatype&quot;</span>
</span><span id="TramDagConfig-199"><a href="#TramDagConfig-199"><span class="linenos">199</span></a><span class="sd">        - &quot;transformation_terms_in_h()&quot;</span>
</span><span id="TramDagConfig-200"><a href="#TramDagConfig-200"><span class="linenos">200</span></a><span class="sd">        - &quot;transformation_term_nn_models_in_h()&quot;</span>
</span><span id="TramDagConfig-201"><a href="#TramDagConfig-201"><span class="linenos">201</span></a>
</span><span id="TramDagConfig-202"><a href="#TramDagConfig-202"><span class="linenos">202</span></a><span class="sd">        3. Ordinal / categorical levels:</span>
</span><span id="TramDagConfig-203"><a href="#TramDagConfig-203"><span class="linenos">203</span></a><span class="sd">        - All ordinal variables must have a corresponding &quot;levels&quot; entry</span>
</span><span id="TramDagConfig-204"><a href="#TramDagConfig-204"><span class="linenos">204</span></a><span class="sd">            under `conf_dict[&quot;nodes&quot;][var]`.</span>
</span><span id="TramDagConfig-205"><a href="#TramDagConfig-205"><span class="linenos">205</span></a>
</span><span id="TramDagConfig-206"><a href="#TramDagConfig-206"><span class="linenos">206</span></a><span class="sd">        4. Experiment name:</span>
</span><span id="TramDagConfig-207"><a href="#TramDagConfig-207"><span class="linenos">207</span></a><span class="sd">        - Must be non-empty.</span>
</span><span id="TramDagConfig-208"><a href="#TramDagConfig-208"><span class="linenos">208</span></a>
</span><span id="TramDagConfig-209"><a href="#TramDagConfig-209"><span class="linenos">209</span></a><span class="sd">        5. Adjacency matrix:</span>
</span><span id="TramDagConfig-210"><a href="#TramDagConfig-210"><span class="linenos">210</span></a><span class="sd">        - Must be valid under `validate_adj_matrix`.</span>
</span><span id="TramDagConfig-211"><a href="#TramDagConfig-211"><span class="linenos">211</span></a>
</span><span id="TramDagConfig-212"><a href="#TramDagConfig-212"><span class="linenos">212</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig-213"><a href="#TramDagConfig-213"><span class="linenos">213</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig-214"><a href="#TramDagConfig-214"><span class="linenos">214</span></a><span class="sd">        None</span>
</span><span id="TramDagConfig-215"><a href="#TramDagConfig-215"><span class="linenos">215</span></a>
</span><span id="TramDagConfig-216"><a href="#TramDagConfig-216"><span class="linenos">216</span></a><span class="sd">        Returns</span>
</span><span id="TramDagConfig-217"><a href="#TramDagConfig-217"><span class="linenos">217</span></a><span class="sd">        -------</span>
</span><span id="TramDagConfig-218"><a href="#TramDagConfig-218"><span class="linenos">218</span></a><span class="sd">        None</span>
</span><span id="TramDagConfig-219"><a href="#TramDagConfig-219"><span class="linenos">219</span></a>
</span><span id="TramDagConfig-220"><a href="#TramDagConfig-220"><span class="linenos">220</span></a><span class="sd">        Notes</span>
</span><span id="TramDagConfig-221"><a href="#TramDagConfig-221"><span class="linenos">221</span></a><span class="sd">        -----</span>
</span><span id="TramDagConfig-222"><a href="#TramDagConfig-222"><span class="linenos">222</span></a><span class="sd">        - Missing or invalid components are reported via printed warnings.</span>
</span><span id="TramDagConfig-223"><a href="#TramDagConfig-223"><span class="linenos">223</span></a><span class="sd">        - Detailed debug messages are printed when `self.debug=True`.</span>
</span><span id="TramDagConfig-224"><a href="#TramDagConfig-224"><span class="linenos">224</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig-225"><a href="#TramDagConfig-225"><span class="linenos">225</span></a>        <span class="n">mandatory_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;experiment_name&quot;</span><span class="p">,</span><span class="s2">&quot;PATHS&quot;</span><span class="p">,</span> <span class="s2">&quot;nodes&quot;</span><span class="p">,</span> <span class="s2">&quot;data_type&quot;</span><span class="p">,</span> <span class="s2">&quot;adj_matrix&quot;</span><span class="p">,</span><span class="s2">&quot;nodes&quot;</span><span class="p">,</span><span class="s2">&quot;model_names&quot;</span><span class="p">]</span>
</span><span id="TramDagConfig-226"><a href="#TramDagConfig-226"><span class="linenos">226</span></a>        <span class="n">optional_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;date_of_creation&quot;</span><span class="p">,</span> <span class="s2">&quot;seed&quot;</span><span class="p">]</span>
</span><span id="TramDagConfig-227"><a href="#TramDagConfig-227"><span class="linenos">227</span></a>
</span><span id="TramDagConfig-228"><a href="#TramDagConfig-228"><span class="linenos">228</span></a>        <span class="c1"># ---- 1. Check mandatory keys exist</span>
</span><span id="TramDagConfig-229"><a href="#TramDagConfig-229"><span class="linenos">229</span></a>        <span class="n">missing</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">mandatory_keys</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="p">]</span>
</span><span id="TramDagConfig-230"><a href="#TramDagConfig-230"><span class="linenos">230</span></a>        <span class="k">if</span> <span class="n">missing</span><span class="p">:</span>
</span><span id="TramDagConfig-231"><a href="#TramDagConfig-231"><span class="linenos">231</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[WARNING] Missing mandatory keys in configuration: </span><span class="si">{</span><span class="n">missing</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="TramDagConfig-232"><a href="#TramDagConfig-232"><span class="linenos">232</span></a>                <span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> Please add them to the configuration dict and reload.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-233"><a href="#TramDagConfig-233"><span class="linenos">233</span></a>            
</span><span id="TramDagConfig-234"><a href="#TramDagConfig-234"><span class="linenos">234</span></a>        <span class="c1"># --- 2. Check  if mandatory keys in nodesdict are present</span>
</span><span id="TramDagConfig-235"><a href="#TramDagConfig-235"><span class="linenos">235</span></a>        <span class="n">mandatory_keys_nodes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;data_type&#39;</span><span class="p">,</span> <span class="s1">&#39;node_type&#39;</span><span class="p">,</span><span class="s1">&#39;parents&#39;</span><span class="p">,</span><span class="s1">&#39;parents_datatype&#39;</span><span class="p">,</span><span class="s1">&#39;transformation_terms_in_h()&#39;</span><span class="p">,</span><span class="s1">&#39;transformation_term_nn_models_in_h()&#39;</span><span class="p">]</span>
</span><span id="TramDagConfig-236"><a href="#TramDagConfig-236"><span class="linenos">236</span></a>        <span class="n">optional_keys_nodes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;levels&quot;</span><span class="p">]</span>
</span><span id="TramDagConfig-237"><a href="#TramDagConfig-237"><span class="linenos">237</span></a>        <span class="k">for</span> <span class="n">node</span><span class="p">,</span> <span class="n">node_dict</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nodes&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="TramDagConfig-238"><a href="#TramDagConfig-238"><span class="linenos">238</span></a>            <span class="c1"># check missing mandatory keys</span>
</span><span id="TramDagConfig-239"><a href="#TramDagConfig-239"><span class="linenos">239</span></a>            <span class="n">missing_node_keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">mandatory_keys_nodes</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">node_dict</span><span class="p">]</span>
</span><span id="TramDagConfig-240"><a href="#TramDagConfig-240"><span class="linenos">240</span></a>            <span class="k">if</span> <span class="n">missing_node_keys</span><span class="p">:</span>
</span><span id="TramDagConfig-241"><a href="#TramDagConfig-241"><span class="linenos">241</span></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[WARNING] Node &#39;</span><span class="si">{</span><span class="n">node</span><span class="si">}</span><span class="s2">&#39; is missing mandatory keys: </span><span class="si">{</span><span class="n">missing_node_keys</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-242"><a href="#TramDagConfig-242"><span class="linenos">242</span></a>                
</span><span id="TramDagConfig-243"><a href="#TramDagConfig-243"><span class="linenos">243</span></a>
</span><span id="TramDagConfig-244"><a href="#TramDagConfig-244"><span class="linenos">244</span></a>        
</span><span id="TramDagConfig-245"><a href="#TramDagConfig-245"><span class="linenos">245</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verify_levels_dict</span><span class="p">():</span>
</span><span id="TramDagConfig-246"><a href="#TramDagConfig-246"><span class="linenos">246</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
</span><span id="TramDagConfig-247"><a href="#TramDagConfig-247"><span class="linenos">247</span></a>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG] levels are present for all ordinal variables in configuration dict.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-248"><a href="#TramDagConfig-248"><span class="linenos">248</span></a>            <span class="k">pass</span>
</span><span id="TramDagConfig-249"><a href="#TramDagConfig-249"><span class="linenos">249</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="TramDagConfig-250"><a href="#TramDagConfig-250"><span class="linenos">250</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[WARNING]  levels are missing for some ordinal variables in configuration dict. THIS will FAIL in model training later!</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="TramDagConfig-251"><a href="#TramDagConfig-251"><span class="linenos">251</span></a>                <span class="s2">&quot; Please provide levels manually to config and reload or compute levels from data using the method compute_levels().</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="TramDagConfig-252"><a href="#TramDagConfig-252"><span class="linenos">252</span></a>                <span class="s2">&quot; e.g. cfg.compute_levels(train_df) # computes levels from training data and writes to cfg&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-253"><a href="#TramDagConfig-253"><span class="linenos">253</span></a>
</span><span id="TramDagConfig-254"><a href="#TramDagConfig-254"><span class="linenos">254</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verify_experiment_name</span><span class="p">():</span>
</span><span id="TramDagConfig-255"><a href="#TramDagConfig-255"><span class="linenos">255</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
</span><span id="TramDagConfig-256"><a href="#TramDagConfig-256"><span class="linenos">256</span></a>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG] experiment_name is valid in configuration dict.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-257"><a href="#TramDagConfig-257"><span class="linenos">257</span></a>            <span class="k">pass</span>
</span><span id="TramDagConfig-258"><a href="#TramDagConfig-258"><span class="linenos">258</span></a>        
</span><span id="TramDagConfig-259"><a href="#TramDagConfig-259"><span class="linenos">259</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verify_adj_matrix</span><span class="p">():</span>
</span><span id="TramDagConfig-260"><a href="#TramDagConfig-260"><span class="linenos">260</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
</span><span id="TramDagConfig-261"><a href="#TramDagConfig-261"><span class="linenos">261</span></a>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG] adj_matrix is valid in configuration dict.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-262"><a href="#TramDagConfig-262"><span class="linenos">262</span></a>            <span class="k">pass</span>
</span><span id="TramDagConfig-263"><a href="#TramDagConfig-263"><span class="linenos">263</span></a>
</span><span id="TramDagConfig-264"><a href="#TramDagConfig-264"><span class="linenos">264</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_verify_levels_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="TramDagConfig-265"><a href="#TramDagConfig-265"><span class="linenos">265</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig-266"><a href="#TramDagConfig-266"><span class="linenos">266</span></a><span class="sd">        Verify that all ordinal variables have levels specified in the config.</span>
</span><span id="TramDagConfig-267"><a href="#TramDagConfig-267"><span class="linenos">267</span></a>
</span><span id="TramDagConfig-268"><a href="#TramDagConfig-268"><span class="linenos">268</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig-269"><a href="#TramDagConfig-269"><span class="linenos">269</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig-270"><a href="#TramDagConfig-270"><span class="linenos">270</span></a><span class="sd">        None</span>
</span><span id="TramDagConfig-271"><a href="#TramDagConfig-271"><span class="linenos">271</span></a>
</span><span id="TramDagConfig-272"><a href="#TramDagConfig-272"><span class="linenos">272</span></a><span class="sd">        Returns</span>
</span><span id="TramDagConfig-273"><a href="#TramDagConfig-273"><span class="linenos">273</span></a><span class="sd">        -------</span>
</span><span id="TramDagConfig-274"><a href="#TramDagConfig-274"><span class="linenos">274</span></a><span class="sd">        bool</span>
</span><span id="TramDagConfig-275"><a href="#TramDagConfig-275"><span class="linenos">275</span></a><span class="sd">            True if all variables declared as ordinal in ``conf_dict[&quot;data_type&quot;]``</span>
</span><span id="TramDagConfig-276"><a href="#TramDagConfig-276"><span class="linenos">276</span></a><span class="sd">            have a &quot;levels&quot; entry in ``conf_dict[&quot;nodes&quot;][var]``.</span>
</span><span id="TramDagConfig-277"><a href="#TramDagConfig-277"><span class="linenos">277</span></a><span class="sd">            False otherwise.</span>
</span><span id="TramDagConfig-278"><a href="#TramDagConfig-278"><span class="linenos">278</span></a>
</span><span id="TramDagConfig-279"><a href="#TramDagConfig-279"><span class="linenos">279</span></a><span class="sd">        Notes</span>
</span><span id="TramDagConfig-280"><a href="#TramDagConfig-280"><span class="linenos">280</span></a><span class="sd">        -----</span>
</span><span id="TramDagConfig-281"><a href="#TramDagConfig-281"><span class="linenos">281</span></a><span class="sd">        This method does not modify the configuration; it only checks presence</span>
</span><span id="TramDagConfig-282"><a href="#TramDagConfig-282"><span class="linenos">282</span></a><span class="sd">        of level information.</span>
</span><span id="TramDagConfig-283"><a href="#TramDagConfig-283"><span class="linenos">283</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig-284"><a href="#TramDagConfig-284"><span class="linenos">284</span></a>        <span class="n">data_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;data_type&#39;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="TramDagConfig-285"><a href="#TramDagConfig-285"><span class="linenos">285</span></a>        <span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;nodes&#39;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="TramDagConfig-286"><a href="#TramDagConfig-286"><span class="linenos">286</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">dtype</span> <span class="ow">in</span> <span class="n">data_type</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="TramDagConfig-287"><a href="#TramDagConfig-287"><span class="linenos">287</span></a>            <span class="k">if</span> <span class="s1">&#39;ordinal&#39;</span> <span class="ow">in</span> <span class="n">dtype</span><span class="p">:</span>
</span><span id="TramDagConfig-288"><a href="#TramDagConfig-288"><span class="linenos">288</span></a>                <span class="k">if</span> <span class="n">var</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">nodes</span> <span class="ow">or</span> <span class="s1">&#39;levels&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">[</span><span class="n">var</span><span class="p">]:</span>
</span><span id="TramDagConfig-289"><a href="#TramDagConfig-289"><span class="linenos">289</span></a>                    <span class="k">return</span> <span class="kc">False</span>
</span><span id="TramDagConfig-290"><a href="#TramDagConfig-290"><span class="linenos">290</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="TramDagConfig-291"><a href="#TramDagConfig-291"><span class="linenos">291</span></a>
</span><span id="TramDagConfig-292"><a href="#TramDagConfig-292"><span class="linenos">292</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_verify_experiment_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="TramDagConfig-293"><a href="#TramDagConfig-293"><span class="linenos">293</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig-294"><a href="#TramDagConfig-294"><span class="linenos">294</span></a><span class="sd">        Check whether the experiment name in the configuration is valid.</span>
</span><span id="TramDagConfig-295"><a href="#TramDagConfig-295"><span class="linenos">295</span></a>
</span><span id="TramDagConfig-296"><a href="#TramDagConfig-296"><span class="linenos">296</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig-297"><a href="#TramDagConfig-297"><span class="linenos">297</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig-298"><a href="#TramDagConfig-298"><span class="linenos">298</span></a><span class="sd">        None</span>
</span><span id="TramDagConfig-299"><a href="#TramDagConfig-299"><span class="linenos">299</span></a>
</span><span id="TramDagConfig-300"><a href="#TramDagConfig-300"><span class="linenos">300</span></a><span class="sd">        Returns</span>
</span><span id="TramDagConfig-301"><a href="#TramDagConfig-301"><span class="linenos">301</span></a><span class="sd">        -------</span>
</span><span id="TramDagConfig-302"><a href="#TramDagConfig-302"><span class="linenos">302</span></a><span class="sd">        bool</span>
</span><span id="TramDagConfig-303"><a href="#TramDagConfig-303"><span class="linenos">303</span></a><span class="sd">            True if ``conf_dict[&quot;experiment_name&quot;]`` exists and is non-empty</span>
</span><span id="TramDagConfig-304"><a href="#TramDagConfig-304"><span class="linenos">304</span></a><span class="sd">            after stripping whitespace. False otherwise.</span>
</span><span id="TramDagConfig-305"><a href="#TramDagConfig-305"><span class="linenos">305</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig-306"><a href="#TramDagConfig-306"><span class="linenos">306</span></a>        <span class="n">experiment_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;experiment_name&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-307"><a href="#TramDagConfig-307"><span class="linenos">307</span></a>        <span class="k">if</span> <span class="n">experiment_name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">str</span><span class="p">(</span><span class="n">experiment_name</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="TramDagConfig-308"><a href="#TramDagConfig-308"><span class="linenos">308</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="TramDagConfig-309"><a href="#TramDagConfig-309"><span class="linenos">309</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="TramDagConfig-310"><a href="#TramDagConfig-310"><span class="linenos">310</span></a>        
</span><span id="TramDagConfig-311"><a href="#TramDagConfig-311"><span class="linenos">311</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_verify_adj_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="TramDagConfig-312"><a href="#TramDagConfig-312"><span class="linenos">312</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig-313"><a href="#TramDagConfig-313"><span class="linenos">313</span></a><span class="sd">        Validate the adjacency matrix stored in the configuration.</span>
</span><span id="TramDagConfig-314"><a href="#TramDagConfig-314"><span class="linenos">314</span></a>
</span><span id="TramDagConfig-315"><a href="#TramDagConfig-315"><span class="linenos">315</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig-316"><a href="#TramDagConfig-316"><span class="linenos">316</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig-317"><a href="#TramDagConfig-317"><span class="linenos">317</span></a><span class="sd">        None</span>
</span><span id="TramDagConfig-318"><a href="#TramDagConfig-318"><span class="linenos">318</span></a>
</span><span id="TramDagConfig-319"><a href="#TramDagConfig-319"><span class="linenos">319</span></a><span class="sd">        Returns</span>
</span><span id="TramDagConfig-320"><a href="#TramDagConfig-320"><span class="linenos">320</span></a><span class="sd">        -------</span>
</span><span id="TramDagConfig-321"><a href="#TramDagConfig-321"><span class="linenos">321</span></a><span class="sd">        bool</span>
</span><span id="TramDagConfig-322"><a href="#TramDagConfig-322"><span class="linenos">322</span></a><span class="sd">            True if the adjacency matrix passes `validate_adj_matrix`, False otherwise.</span>
</span><span id="TramDagConfig-323"><a href="#TramDagConfig-323"><span class="linenos">323</span></a>
</span><span id="TramDagConfig-324"><a href="#TramDagConfig-324"><span class="linenos">324</span></a><span class="sd">        Notes</span>
</span><span id="TramDagConfig-325"><a href="#TramDagConfig-325"><span class="linenos">325</span></a><span class="sd">        -----</span>
</span><span id="TramDagConfig-326"><a href="#TramDagConfig-326"><span class="linenos">326</span></a><span class="sd">        If the adjacency matrix is stored as a list, it is converted to a</span>
</span><span id="TramDagConfig-327"><a href="#TramDagConfig-327"><span class="linenos">327</span></a><span class="sd">        NumPy array before validation.</span>
</span><span id="TramDagConfig-328"><a href="#TramDagConfig-328"><span class="linenos">328</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig-329"><a href="#TramDagConfig-329"><span class="linenos">329</span></a>        <span class="n">adj_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="p">[</span><span class="s1">&#39;adj_matrix&#39;</span><span class="p">]</span>
</span><span id="TramDagConfig-330"><a href="#TramDagConfig-330"><span class="linenos">330</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">adj_matrix</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="TramDagConfig-331"><a href="#TramDagConfig-331"><span class="linenos">331</span></a>            <span class="n">adj_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="p">[</span><span class="s1">&#39;adj_matrix&#39;</span><span class="p">])</span>
</span><span id="TramDagConfig-332"><a href="#TramDagConfig-332"><span class="linenos">332</span></a>        <span class="k">if</span> <span class="n">validate_adj_matrix</span><span class="p">(</span><span class="n">adj_matrix</span><span class="p">):</span>
</span><span id="TramDagConfig-333"><a href="#TramDagConfig-333"><span class="linenos">333</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="TramDagConfig-334"><a href="#TramDagConfig-334"><span class="linenos">334</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="TramDagConfig-335"><a href="#TramDagConfig-335"><span class="linenos">335</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="TramDagConfig-336"><a href="#TramDagConfig-336"><span class="linenos">336</span></a>
</span><span id="TramDagConfig-337"><a href="#TramDagConfig-337"><span class="linenos">337</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">compute_levels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">write</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
</span><span id="TramDagConfig-338"><a href="#TramDagConfig-338"><span class="linenos">338</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig-339"><a href="#TramDagConfig-339"><span class="linenos">339</span></a><span class="sd">        Infer and update ordinal/categorical levels from data.</span>
</span><span id="TramDagConfig-340"><a href="#TramDagConfig-340"><span class="linenos">340</span></a>
</span><span id="TramDagConfig-341"><a href="#TramDagConfig-341"><span class="linenos">341</span></a><span class="sd">        For each variable in the configuration&#39;s `data_type` section, this</span>
</span><span id="TramDagConfig-342"><a href="#TramDagConfig-342"><span class="linenos">342</span></a><span class="sd">        method uses the provided DataFrame to construct a levels dictionary</span>
</span><span id="TramDagConfig-343"><a href="#TramDagConfig-343"><span class="linenos">343</span></a><span class="sd">        and injects the corresponding &quot;levels&quot; entry into `conf_dict[&quot;nodes&quot;]`.</span>
</span><span id="TramDagConfig-344"><a href="#TramDagConfig-344"><span class="linenos">344</span></a>
</span><span id="TramDagConfig-345"><a href="#TramDagConfig-345"><span class="linenos">345</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig-346"><a href="#TramDagConfig-346"><span class="linenos">346</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig-347"><a href="#TramDagConfig-347"><span class="linenos">347</span></a><span class="sd">        df : pandas.DataFrame</span>
</span><span id="TramDagConfig-348"><a href="#TramDagConfig-348"><span class="linenos">348</span></a><span class="sd">            DataFrame used to infer levels for configured variables.</span>
</span><span id="TramDagConfig-349"><a href="#TramDagConfig-349"><span class="linenos">349</span></a><span class="sd">        write : bool, optional</span>
</span><span id="TramDagConfig-350"><a href="#TramDagConfig-350"><span class="linenos">350</span></a><span class="sd">            If True and `CONF_DICT_PATH` is set, the updated configuration is</span>
</span><span id="TramDagConfig-351"><a href="#TramDagConfig-351"><span class="linenos">351</span></a><span class="sd">            written back to disk. Default is True.</span>
</span><span id="TramDagConfig-352"><a href="#TramDagConfig-352"><span class="linenos">352</span></a>
</span><span id="TramDagConfig-353"><a href="#TramDagConfig-353"><span class="linenos">353</span></a><span class="sd">        Returns</span>
</span><span id="TramDagConfig-354"><a href="#TramDagConfig-354"><span class="linenos">354</span></a><span class="sd">        -------</span>
</span><span id="TramDagConfig-355"><a href="#TramDagConfig-355"><span class="linenos">355</span></a><span class="sd">        None</span>
</span><span id="TramDagConfig-356"><a href="#TramDagConfig-356"><span class="linenos">356</span></a>
</span><span id="TramDagConfig-357"><a href="#TramDagConfig-357"><span class="linenos">357</span></a><span class="sd">        Raises</span>
</span><span id="TramDagConfig-358"><a href="#TramDagConfig-358"><span class="linenos">358</span></a><span class="sd">        ------</span>
</span><span id="TramDagConfig-359"><a href="#TramDagConfig-359"><span class="linenos">359</span></a><span class="sd">        Exception</span>
</span><span id="TramDagConfig-360"><a href="#TramDagConfig-360"><span class="linenos">360</span></a><span class="sd">            If saving the configuration fails when `write=True`.</span>
</span><span id="TramDagConfig-361"><a href="#TramDagConfig-361"><span class="linenos">361</span></a>
</span><span id="TramDagConfig-362"><a href="#TramDagConfig-362"><span class="linenos">362</span></a><span class="sd">        Notes</span>
</span><span id="TramDagConfig-363"><a href="#TramDagConfig-363"><span class="linenos">363</span></a><span class="sd">        -----</span>
</span><span id="TramDagConfig-364"><a href="#TramDagConfig-364"><span class="linenos">364</span></a><span class="sd">        - Variables present in `levels_dict` but not in `conf_dict[&quot;nodes&quot;]`</span>
</span><span id="TramDagConfig-365"><a href="#TramDagConfig-365"><span class="linenos">365</span></a><span class="sd">        trigger a warning and are skipped.</span>
</span><span id="TramDagConfig-366"><a href="#TramDagConfig-366"><span class="linenos">366</span></a><span class="sd">        - If `self.verbose` or `self.debug` is True, a success message is printed</span>
</span><span id="TramDagConfig-367"><a href="#TramDagConfig-367"><span class="linenos">367</span></a><span class="sd">        when the configuration is saved.</span>
</span><span id="TramDagConfig-368"><a href="#TramDagConfig-368"><span class="linenos">368</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig-369"><a href="#TramDagConfig-369"><span class="linenos">369</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="TramDagConfig-370"><a href="#TramDagConfig-370"><span class="linenos">370</span></a>        <span class="n">levels_dict</span> <span class="o">=</span> <span class="n">create_levels_dict</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="p">[</span><span class="s1">&#39;data_type&#39;</span><span class="p">])</span>
</span><span id="TramDagConfig-371"><a href="#TramDagConfig-371"><span class="linenos">371</span></a>        
</span><span id="TramDagConfig-372"><a href="#TramDagConfig-372"><span class="linenos">372</span></a>        <span class="c1"># update nodes dict with levels</span>
</span><span id="TramDagConfig-373"><a href="#TramDagConfig-373"><span class="linenos">373</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">levels</span> <span class="ow">in</span> <span class="n">levels_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="TramDagConfig-374"><a href="#TramDagConfig-374"><span class="linenos">374</span></a>            <span class="k">if</span> <span class="n">var</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="p">[</span><span class="s1">&#39;nodes&#39;</span><span class="p">]:</span>
</span><span id="TramDagConfig-375"><a href="#TramDagConfig-375"><span class="linenos">375</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="p">[</span><span class="s1">&#39;nodes&#39;</span><span class="p">][</span><span class="n">var</span><span class="p">][</span><span class="s1">&#39;levels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">levels</span>
</span><span id="TramDagConfig-376"><a href="#TramDagConfig-376"><span class="linenos">376</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="TramDagConfig-377"><a href="#TramDagConfig-377"><span class="linenos">377</span></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[WARNING] Variable &#39;</span><span class="si">{</span><span class="n">var</span><span class="si">}</span><span class="s2">&#39; not found in nodes dict. Cannot add levels.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-378"><a href="#TramDagConfig-378"><span class="linenos">378</span></a>        
</span><span id="TramDagConfig-379"><a href="#TramDagConfig-379"><span class="linenos">379</span></a>        <span class="k">if</span> <span class="n">write</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TramDagConfig-380"><a href="#TramDagConfig-380"><span class="linenos">380</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="TramDagConfig-381"><a href="#TramDagConfig-381"><span class="linenos">381</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="TramDagConfig-382"><a href="#TramDagConfig-382"><span class="linenos">382</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
</span><span id="TramDagConfig-383"><a href="#TramDagConfig-383"><span class="linenos">383</span></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[INFO] Configuration with updated levels saved to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="TramDagConfig-384"><a href="#TramDagConfig-384"><span class="linenos">384</span></a>            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="TramDagConfig-385"><a href="#TramDagConfig-385"><span class="linenos">385</span></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[ERROR] Failed to save configuration: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="TramDagConfig-386"><a href="#TramDagConfig-386"><span class="linenos">386</span></a>
</span><span id="TramDagConfig-387"><a href="#TramDagConfig-387"><span class="linenos">387</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">plot_dag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">42</span><span class="p">,</span> <span class="n">causal_order</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="TramDagConfig-388"><a href="#TramDagConfig-388"><span class="linenos">388</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig-389"><a href="#TramDagConfig-389"><span class="linenos">389</span></a><span class="sd">        Visualize the DAG defined by the configuration.</span>
</span><span id="TramDagConfig-390"><a href="#TramDagConfig-390"><span class="linenos">390</span></a>
</span><span id="TramDagConfig-391"><a href="#TramDagConfig-391"><span class="linenos">391</span></a><span class="sd">        Nodes are categorized and colored as:</span>
</span><span id="TramDagConfig-392"><a href="#TramDagConfig-392"><span class="linenos">392</span></a><span class="sd">        - Source nodes (no incoming edges): green.</span>
</span><span id="TramDagConfig-393"><a href="#TramDagConfig-393"><span class="linenos">393</span></a><span class="sd">        - Sink nodes (no outgoing edges): red.</span>
</span><span id="TramDagConfig-394"><a href="#TramDagConfig-394"><span class="linenos">394</span></a><span class="sd">        - Intermediate nodes: light blue.</span>
</span><span id="TramDagConfig-395"><a href="#TramDagConfig-395"><span class="linenos">395</span></a>
</span><span id="TramDagConfig-396"><a href="#TramDagConfig-396"><span class="linenos">396</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig-397"><a href="#TramDagConfig-397"><span class="linenos">397</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig-398"><a href="#TramDagConfig-398"><span class="linenos">398</span></a><span class="sd">        seed : int, optional</span>
</span><span id="TramDagConfig-399"><a href="#TramDagConfig-399"><span class="linenos">399</span></a><span class="sd">            Random seed for layout stability in the spring layout fallback.</span>
</span><span id="TramDagConfig-400"><a href="#TramDagConfig-400"><span class="linenos">400</span></a><span class="sd">            Default is 42.</span>
</span><span id="TramDagConfig-401"><a href="#TramDagConfig-401"><span class="linenos">401</span></a><span class="sd">        causal_order : bool, optional</span>
</span><span id="TramDagConfig-402"><a href="#TramDagConfig-402"><span class="linenos">402</span></a><span class="sd">            If True, attempt to use Graphviz &#39;dot&#39; layout via</span>
</span><span id="TramDagConfig-403"><a href="#TramDagConfig-403"><span class="linenos">403</span></a><span class="sd">            `networkx.nx_agraph.graphviz_layout` to preserve causal ordering.</span>
</span><span id="TramDagConfig-404"><a href="#TramDagConfig-404"><span class="linenos">404</span></a><span class="sd">            If False or if Graphviz is unavailable, use `spring_layout`.</span>
</span><span id="TramDagConfig-405"><a href="#TramDagConfig-405"><span class="linenos">405</span></a><span class="sd">            Default is False.</span>
</span><span id="TramDagConfig-406"><a href="#TramDagConfig-406"><span class="linenos">406</span></a>
</span><span id="TramDagConfig-407"><a href="#TramDagConfig-407"><span class="linenos">407</span></a><span class="sd">        Returns</span>
</span><span id="TramDagConfig-408"><a href="#TramDagConfig-408"><span class="linenos">408</span></a><span class="sd">        -------</span>
</span><span id="TramDagConfig-409"><a href="#TramDagConfig-409"><span class="linenos">409</span></a><span class="sd">        None</span>
</span><span id="TramDagConfig-410"><a href="#TramDagConfig-410"><span class="linenos">410</span></a>
</span><span id="TramDagConfig-411"><a href="#TramDagConfig-411"><span class="linenos">411</span></a><span class="sd">        Raises</span>
</span><span id="TramDagConfig-412"><a href="#TramDagConfig-412"><span class="linenos">412</span></a><span class="sd">        ------</span>
</span><span id="TramDagConfig-413"><a href="#TramDagConfig-413"><span class="linenos">413</span></a><span class="sd">        ValueError</span>
</span><span id="TramDagConfig-414"><a href="#TramDagConfig-414"><span class="linenos">414</span></a><span class="sd">            If `adj_matrix` or `data_type` is missing or inconsistent with each other,</span>
</span><span id="TramDagConfig-415"><a href="#TramDagConfig-415"><span class="linenos">415</span></a><span class="sd">            or if the adjacency matrix fails validation.</span>
</span><span id="TramDagConfig-416"><a href="#TramDagConfig-416"><span class="linenos">416</span></a>
</span><span id="TramDagConfig-417"><a href="#TramDagConfig-417"><span class="linenos">417</span></a><span class="sd">        Notes</span>
</span><span id="TramDagConfig-418"><a href="#TramDagConfig-418"><span class="linenos">418</span></a><span class="sd">        -----</span>
</span><span id="TramDagConfig-419"><a href="#TramDagConfig-419"><span class="linenos">419</span></a><span class="sd">        Edge labels are colored by prefix:</span>
</span><span id="TramDagConfig-420"><a href="#TramDagConfig-420"><span class="linenos">420</span></a><span class="sd">        - &quot;ci&quot;: blue</span>
</span><span id="TramDagConfig-421"><a href="#TramDagConfig-421"><span class="linenos">421</span></a><span class="sd">        - &quot;ls&quot;: red</span>
</span><span id="TramDagConfig-422"><a href="#TramDagConfig-422"><span class="linenos">422</span></a><span class="sd">        - &quot;cs&quot;: green</span>
</span><span id="TramDagConfig-423"><a href="#TramDagConfig-423"><span class="linenos">423</span></a><span class="sd">        - other: black</span>
</span><span id="TramDagConfig-424"><a href="#TramDagConfig-424"><span class="linenos">424</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig-425"><a href="#TramDagConfig-425"><span class="linenos">425</span></a>        <span class="n">adj_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;adj_matrix&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-426"><a href="#TramDagConfig-426"><span class="linenos">426</span></a>        <span class="n">data_type</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data_type&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-427"><a href="#TramDagConfig-427"><span class="linenos">427</span></a>
</span><span id="TramDagConfig-428"><a href="#TramDagConfig-428"><span class="linenos">428</span></a>        <span class="k">if</span> <span class="n">adj_matrix</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">data_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TramDagConfig-429"><a href="#TramDagConfig-429"><span class="linenos">429</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Configuration must include &#39;adj_matrix&#39; and &#39;data_type&#39;.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-430"><a href="#TramDagConfig-430"><span class="linenos">430</span></a>
</span><span id="TramDagConfig-431"><a href="#TramDagConfig-431"><span class="linenos">431</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">adj_matrix</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="TramDagConfig-432"><a href="#TramDagConfig-432"><span class="linenos">432</span></a>            <span class="n">adj_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">adj_matrix</span><span class="p">)</span>
</span><span id="TramDagConfig-433"><a href="#TramDagConfig-433"><span class="linenos">433</span></a>
</span><span id="TramDagConfig-434"><a href="#TramDagConfig-434"><span class="linenos">434</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">validate_adj_matrix</span><span class="p">(</span><span class="n">adj_matrix</span><span class="p">):</span>
</span><span id="TramDagConfig-435"><a href="#TramDagConfig-435"><span class="linenos">435</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid adjacency matrix.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-436"><a href="#TramDagConfig-436"><span class="linenos">436</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_type</span><span class="p">)</span> <span class="o">!=</span> <span class="n">adj_matrix</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
</span><span id="TramDagConfig-437"><a href="#TramDagConfig-437"><span class="linenos">437</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;data_type must match adjacency matrix size.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-438"><a href="#TramDagConfig-438"><span class="linenos">438</span></a>
</span><span id="TramDagConfig-439"><a href="#TramDagConfig-439"><span class="linenos">439</span></a>        <span class="n">node_labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">data_type</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="TramDagConfig-440"><a href="#TramDagConfig-440"><span class="linenos">440</span></a>        <span class="n">G</span><span class="p">,</span> <span class="n">edge_labels</span> <span class="o">=</span> <span class="n">create_nx_graph</span><span class="p">(</span><span class="n">adj_matrix</span><span class="p">,</span> <span class="n">node_labels</span><span class="p">)</span>
</span><span id="TramDagConfig-441"><a href="#TramDagConfig-441"><span class="linenos">441</span></a>
</span><span id="TramDagConfig-442"><a href="#TramDagConfig-442"><span class="linenos">442</span></a>        <span class="n">sources</span>       <span class="o">=</span> <span class="p">{</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span> <span class="k">if</span> <span class="n">G</span><span class="o">.</span><span class="n">in_degree</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">}</span>
</span><span id="TramDagConfig-443"><a href="#TramDagConfig-443"><span class="linenos">443</span></a>        <span class="n">sinks</span>         <span class="o">=</span> <span class="p">{</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span> <span class="k">if</span> <span class="n">G</span><span class="o">.</span><span class="n">out_degree</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">}</span>
</span><span id="TramDagConfig-444"><a href="#TramDagConfig-444"><span class="linenos">444</span></a>        <span class="n">intermediates</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span> <span class="o">-</span> <span class="n">sources</span> <span class="o">-</span> <span class="n">sinks</span>
</span><span id="TramDagConfig-445"><a href="#TramDagConfig-445"><span class="linenos">445</span></a>
</span><span id="TramDagConfig-446"><a href="#TramDagConfig-446"><span class="linenos">446</span></a>        <span class="n">node_colors</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="TramDagConfig-447"><a href="#TramDagConfig-447"><span class="linenos">447</span></a>            <span class="s2">&quot;green&quot;</span> <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">sources</span>
</span><span id="TramDagConfig-448"><a href="#TramDagConfig-448"><span class="linenos">448</span></a>            <span class="k">else</span> <span class="s2">&quot;red&quot;</span> <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">sinks</span>
</span><span id="TramDagConfig-449"><a href="#TramDagConfig-449"><span class="linenos">449</span></a>            <span class="k">else</span> <span class="s2">&quot;lightblue&quot;</span>
</span><span id="TramDagConfig-450"><a href="#TramDagConfig-450"><span class="linenos">450</span></a>            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span>
</span><span id="TramDagConfig-451"><a href="#TramDagConfig-451"><span class="linenos">451</span></a>        <span class="p">]</span>
</span><span id="TramDagConfig-452"><a href="#TramDagConfig-452"><span class="linenos">452</span></a>
</span><span id="TramDagConfig-453"><a href="#TramDagConfig-453"><span class="linenos">453</span></a>        <span class="k">if</span> <span class="n">causal_order</span><span class="p">:</span>
</span><span id="TramDagConfig-454"><a href="#TramDagConfig-454"><span class="linenos">454</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="TramDagConfig-455"><a href="#TramDagConfig-455"><span class="linenos">455</span></a>                <span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">nx_agraph</span><span class="o">.</span><span class="n">graphviz_layout</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">prog</span><span class="o">=</span><span class="s2">&quot;dot&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-456"><a href="#TramDagConfig-456"><span class="linenos">456</span></a>            <span class="k">except</span> <span class="p">(</span><span class="ne">ImportError</span><span class="p">,</span> <span class="n">nx</span><span class="o">.</span><span class="n">NetworkXException</span><span class="p">):</span>
</span><span id="TramDagConfig-457"><a href="#TramDagConfig-457"><span class="linenos">457</span></a>                <span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">spring_layout</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</span><span id="TramDagConfig-458"><a href="#TramDagConfig-458"><span class="linenos">458</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="TramDagConfig-459"><a href="#TramDagConfig-459"><span class="linenos">459</span></a>            <span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">spring_layout</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</span><span id="TramDagConfig-460"><a href="#TramDagConfig-460"><span class="linenos">460</span></a>
</span><span id="TramDagConfig-461"><a href="#TramDagConfig-461"><span class="linenos">461</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="TramDagConfig-462"><a href="#TramDagConfig-462"><span class="linenos">462</span></a>        <span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span>
</span><span id="TramDagConfig-463"><a href="#TramDagConfig-463"><span class="linenos">463</span></a>            <span class="n">G</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span>
</span><span id="TramDagConfig-464"><a href="#TramDagConfig-464"><span class="linenos">464</span></a>            <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="TramDagConfig-465"><a href="#TramDagConfig-465"><span class="linenos">465</span></a>            <span class="n">node_color</span><span class="o">=</span><span class="n">node_colors</span><span class="p">,</span>
</span><span id="TramDagConfig-466"><a href="#TramDagConfig-466"><span class="linenos">466</span></a>            <span class="n">edge_color</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span>
</span><span id="TramDagConfig-467"><a href="#TramDagConfig-467"><span class="linenos">467</span></a>            <span class="n">node_size</span><span class="o">=</span><span class="mi">2500</span><span class="p">,</span>
</span><span id="TramDagConfig-468"><a href="#TramDagConfig-468"><span class="linenos">468</span></a>            <span class="n">arrowsize</span><span class="o">=</span><span class="mi">20</span>
</span><span id="TramDagConfig-469"><a href="#TramDagConfig-469"><span class="linenos">469</span></a>        <span class="p">)</span>
</span><span id="TramDagConfig-470"><a href="#TramDagConfig-470"><span class="linenos">470</span></a>
</span><span id="TramDagConfig-471"><a href="#TramDagConfig-471"><span class="linenos">471</span></a>        <span class="k">for</span> <span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">),</span> <span class="n">lbl</span> <span class="ow">in</span> <span class="n">edge_labels</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="TramDagConfig-472"><a href="#TramDagConfig-472"><span class="linenos">472</span></a>            <span class="n">color</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="TramDagConfig-473"><a href="#TramDagConfig-473"><span class="linenos">473</span></a>                <span class="s2">&quot;blue&quot;</span>  <span class="k">if</span> <span class="n">lbl</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;ci&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-474"><a href="#TramDagConfig-474"><span class="linenos">474</span></a>                <span class="k">else</span> <span class="s2">&quot;red&quot;</span>   <span class="k">if</span> <span class="n">lbl</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;ls&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-475"><a href="#TramDagConfig-475"><span class="linenos">475</span></a>                <span class="k">else</span> <span class="s2">&quot;green&quot;</span> <span class="k">if</span> <span class="n">lbl</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;cs&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-476"><a href="#TramDagConfig-476"><span class="linenos">476</span></a>                <span class="k">else</span> <span class="s2">&quot;black&quot;</span>
</span><span id="TramDagConfig-477"><a href="#TramDagConfig-477"><span class="linenos">477</span></a>            <span class="p">)</span>
</span><span id="TramDagConfig-478"><a href="#TramDagConfig-478"><span class="linenos">478</span></a>            <span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_edge_labels</span><span class="p">(</span>
</span><span id="TramDagConfig-479"><a href="#TramDagConfig-479"><span class="linenos">479</span></a>                <span class="n">G</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span>
</span><span id="TramDagConfig-480"><a href="#TramDagConfig-480"><span class="linenos">480</span></a>                <span class="n">edge_labels</span><span class="o">=</span><span class="p">{(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span> <span class="n">lbl</span><span class="p">},</span>
</span><span id="TramDagConfig-481"><a href="#TramDagConfig-481"><span class="linenos">481</span></a>                <span class="n">font_color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
</span><span id="TramDagConfig-482"><a href="#TramDagConfig-482"><span class="linenos">482</span></a>                <span class="n">font_size</span><span class="o">=</span><span class="mi">12</span>
</span><span id="TramDagConfig-483"><a href="#TramDagConfig-483"><span class="linenos">483</span></a>            <span class="p">)</span>
</span><span id="TramDagConfig-484"><a href="#TramDagConfig-484"><span class="linenos">484</span></a>
</span><span id="TramDagConfig-485"><a href="#TramDagConfig-485"><span class="linenos">485</span></a>        <span class="n">legend_items</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="TramDagConfig-486"><a href="#TramDagConfig-486"><span class="linenos">486</span></a>            <span class="n">Patch</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span>     <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Source&quot;</span><span class="p">),</span>
</span><span id="TramDagConfig-487"><a href="#TramDagConfig-487"><span class="linenos">487</span></a>            <span class="n">Patch</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>       <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Sink&quot;</span><span class="p">),</span>
</span><span id="TramDagConfig-488"><a href="#TramDagConfig-488"><span class="linenos">488</span></a>            <span class="n">Patch</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;lightblue&quot;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Intermediate&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-489"><a href="#TramDagConfig-489"><span class="linenos">489</span></a>        <span class="p">]</span>
</span><span id="TramDagConfig-490"><a href="#TramDagConfig-490"><span class="linenos">490</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="n">legend_items</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper right&quot;</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="TramDagConfig-491"><a href="#TramDagConfig-491"><span class="linenos">491</span></a>
</span><span id="TramDagConfig-492"><a href="#TramDagConfig-492"><span class="linenos">492</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;TRAM DAG&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-493"><a href="#TramDagConfig-493"><span class="linenos">493</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-494"><a href="#TramDagConfig-494"><span class="linenos">494</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="TramDagConfig-495"><a href="#TramDagConfig-495"><span class="linenos">495</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="TramDagConfig-496"><a href="#TramDagConfig-496"><span class="linenos">496</span></a>
</span><span id="TramDagConfig-497"><a href="#TramDagConfig-497"><span class="linenos">497</span></a>  
</span><span id="TramDagConfig-498"><a href="#TramDagConfig-498"><span class="linenos">498</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setup_configuration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experiment_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">EXPERIMENT_DIR</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">_verify</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="TramDagConfig-499"><a href="#TramDagConfig-499"><span class="linenos">499</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig-500"><a href="#TramDagConfig-500"><span class="linenos">500</span></a><span class="sd">        Create or reuse a configuration for an experiment.</span>
</span><span id="TramDagConfig-501"><a href="#TramDagConfig-501"><span class="linenos">501</span></a>
</span><span id="TramDagConfig-502"><a href="#TramDagConfig-502"><span class="linenos">502</span></a><span class="sd">        This method behaves differently depending on how it is called:</span>
</span><span id="TramDagConfig-503"><a href="#TramDagConfig-503"><span class="linenos">503</span></a>
</span><span id="TramDagConfig-504"><a href="#TramDagConfig-504"><span class="linenos">504</span></a><span class="sd">        1. Class call (e.g. `TramDagConfig.setup_configuration(...)`):</span>
</span><span id="TramDagConfig-505"><a href="#TramDagConfig-505"><span class="linenos">505</span></a><span class="sd">        - Creates or loads a configuration at the resolved path.</span>
</span><span id="TramDagConfig-506"><a href="#TramDagConfig-506"><span class="linenos">506</span></a><span class="sd">        - Returns a new `TramDagConfig` instance.</span>
</span><span id="TramDagConfig-507"><a href="#TramDagConfig-507"><span class="linenos">507</span></a>
</span><span id="TramDagConfig-508"><a href="#TramDagConfig-508"><span class="linenos">508</span></a><span class="sd">        2. Instance call (e.g. `cfg.setup_configuration(...)`):</span>
</span><span id="TramDagConfig-509"><a href="#TramDagConfig-509"><span class="linenos">509</span></a><span class="sd">        - Updates `self.conf_dict` and `self.CONF_DICT_PATH` in place.</span>
</span><span id="TramDagConfig-510"><a href="#TramDagConfig-510"><span class="linenos">510</span></a><span class="sd">        - Optionally verifies completeness.</span>
</span><span id="TramDagConfig-511"><a href="#TramDagConfig-511"><span class="linenos">511</span></a><span class="sd">        - Returns None.</span>
</span><span id="TramDagConfig-512"><a href="#TramDagConfig-512"><span class="linenos">512</span></a>
</span><span id="TramDagConfig-513"><a href="#TramDagConfig-513"><span class="linenos">513</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig-514"><a href="#TramDagConfig-514"><span class="linenos">514</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig-515"><a href="#TramDagConfig-515"><span class="linenos">515</span></a><span class="sd">        experiment_name : str or None, optional</span>
</span><span id="TramDagConfig-516"><a href="#TramDagConfig-516"><span class="linenos">516</span></a><span class="sd">            Name of the experiment. If None, defaults to &quot;experiment_1&quot;.</span>
</span><span id="TramDagConfig-517"><a href="#TramDagConfig-517"><span class="linenos">517</span></a><span class="sd">        EXPERIMENT_DIR : str or None, optional</span>
</span><span id="TramDagConfig-518"><a href="#TramDagConfig-518"><span class="linenos">518</span></a><span class="sd">            Directory for the experiment. If None, defaults to</span>
</span><span id="TramDagConfig-519"><a href="#TramDagConfig-519"><span class="linenos">519</span></a><span class="sd">            `&lt;cwd&gt;/&lt;experiment_name&gt;`.</span>
</span><span id="TramDagConfig-520"><a href="#TramDagConfig-520"><span class="linenos">520</span></a><span class="sd">        debug : bool, optional</span>
</span><span id="TramDagConfig-521"><a href="#TramDagConfig-521"><span class="linenos">521</span></a><span class="sd">            If True, initialize / update with `debug=True`. Default is False.</span>
</span><span id="TramDagConfig-522"><a href="#TramDagConfig-522"><span class="linenos">522</span></a><span class="sd">        _verify : bool, optional</span>
</span><span id="TramDagConfig-523"><a href="#TramDagConfig-523"><span class="linenos">523</span></a><span class="sd">            If True, call `_verify_completeness()` after loading. Default is False.</span>
</span><span id="TramDagConfig-524"><a href="#TramDagConfig-524"><span class="linenos">524</span></a>
</span><span id="TramDagConfig-525"><a href="#TramDagConfig-525"><span class="linenos">525</span></a><span class="sd">        Returns</span>
</span><span id="TramDagConfig-526"><a href="#TramDagConfig-526"><span class="linenos">526</span></a><span class="sd">        -------</span>
</span><span id="TramDagConfig-527"><a href="#TramDagConfig-527"><span class="linenos">527</span></a><span class="sd">        TramDagConfig or None</span>
</span><span id="TramDagConfig-528"><a href="#TramDagConfig-528"><span class="linenos">528</span></a><span class="sd">            - A new instance when called on the class.</span>
</span><span id="TramDagConfig-529"><a href="#TramDagConfig-529"><span class="linenos">529</span></a><span class="sd">            - None when called on an existing instance.</span>
</span><span id="TramDagConfig-530"><a href="#TramDagConfig-530"><span class="linenos">530</span></a>
</span><span id="TramDagConfig-531"><a href="#TramDagConfig-531"><span class="linenos">531</span></a><span class="sd">        Notes</span>
</span><span id="TramDagConfig-532"><a href="#TramDagConfig-532"><span class="linenos">532</span></a><span class="sd">        -----</span>
</span><span id="TramDagConfig-533"><a href="#TramDagConfig-533"><span class="linenos">533</span></a><span class="sd">        - A configuration file named &quot;configuration.json&quot; is created if it does</span>
</span><span id="TramDagConfig-534"><a href="#TramDagConfig-534"><span class="linenos">534</span></a><span class="sd">        not exist yet.</span>
</span><span id="TramDagConfig-535"><a href="#TramDagConfig-535"><span class="linenos">535</span></a><span class="sd">        - Underlying creation uses `create_and_write_new_configuration_dict`</span>
</span><span id="TramDagConfig-536"><a href="#TramDagConfig-536"><span class="linenos">536</span></a><span class="sd">        and `load_configuration_dict`.</span>
</span><span id="TramDagConfig-537"><a href="#TramDagConfig-537"><span class="linenos">537</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig-538"><a href="#TramDagConfig-538"><span class="linenos">538</span></a>        <span class="n">is_class_call</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>
</span><span id="TramDagConfig-539"><a href="#TramDagConfig-539"><span class="linenos">539</span></a>        <span class="bp">cls</span> <span class="o">=</span> <span class="bp">self</span> <span class="k">if</span> <span class="n">is_class_call</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span>
</span><span id="TramDagConfig-540"><a href="#TramDagConfig-540"><span class="linenos">540</span></a>
</span><span id="TramDagConfig-541"><a href="#TramDagConfig-541"><span class="linenos">541</span></a>        <span class="k">if</span> <span class="n">experiment_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TramDagConfig-542"><a href="#TramDagConfig-542"><span class="linenos">542</span></a>            <span class="n">experiment_name</span> <span class="o">=</span> <span class="s2">&quot;experiment_1&quot;</span>
</span><span id="TramDagConfig-543"><a href="#TramDagConfig-543"><span class="linenos">543</span></a>        <span class="k">if</span> <span class="n">EXPERIMENT_DIR</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TramDagConfig-544"><a href="#TramDagConfig-544"><span class="linenos">544</span></a>            <span class="n">EXPERIMENT_DIR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="n">experiment_name</span><span class="p">)</span>
</span><span id="TramDagConfig-545"><a href="#TramDagConfig-545"><span class="linenos">545</span></a>
</span><span id="TramDagConfig-546"><a href="#TramDagConfig-546"><span class="linenos">546</span></a>        <span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">EXPERIMENT_DIR</span><span class="p">,</span> <span class="s2">&quot;configuration.json&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-547"><a href="#TramDagConfig-547"><span class="linenos">547</span></a>        <span class="n">DATA_PATH</span> <span class="o">=</span> <span class="n">EXPERIMENT_DIR</span>
</span><span id="TramDagConfig-548"><a href="#TramDagConfig-548"><span class="linenos">548</span></a>
</span><span id="TramDagConfig-549"><a href="#TramDagConfig-549"><span class="linenos">549</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">EXPERIMENT_DIR</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="TramDagConfig-550"><a href="#TramDagConfig-550"><span class="linenos">550</span></a>
</span><span id="TramDagConfig-551"><a href="#TramDagConfig-551"><span class="linenos">551</span></a>        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">):</span>
</span><span id="TramDagConfig-552"><a href="#TramDagConfig-552"><span class="linenos">552</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuration already exists: </span><span class="si">{</span><span class="n">CONF_DICT_PATH</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-553"><a href="#TramDagConfig-553"><span class="linenos">553</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="TramDagConfig-554"><a href="#TramDagConfig-554"><span class="linenos">554</span></a>            <span class="n">_</span> <span class="o">=</span> <span class="n">create_and_write_new_configuration_dict</span><span class="p">(</span>
</span><span id="TramDagConfig-555"><a href="#TramDagConfig-555"><span class="linenos">555</span></a>                <span class="n">experiment_name</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">,</span> <span class="n">EXPERIMENT_DIR</span><span class="p">,</span> <span class="n">DATA_PATH</span><span class="p">,</span> <span class="kc">None</span>
</span><span id="TramDagConfig-556"><a href="#TramDagConfig-556"><span class="linenos">556</span></a>            <span class="p">)</span>
</span><span id="TramDagConfig-557"><a href="#TramDagConfig-557"><span class="linenos">557</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Created new configuration file at </span><span class="si">{</span><span class="n">CONF_DICT_PATH</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-558"><a href="#TramDagConfig-558"><span class="linenos">558</span></a>
</span><span id="TramDagConfig-559"><a href="#TramDagConfig-559"><span class="linenos">559</span></a>        <span class="n">conf</span> <span class="o">=</span> <span class="n">load_configuration_dict</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="TramDagConfig-560"><a href="#TramDagConfig-560"><span class="linenos">560</span></a>
</span><span id="TramDagConfig-561"><a href="#TramDagConfig-561"><span class="linenos">561</span></a>        <span class="k">if</span> <span class="n">is_class_call</span><span class="p">:</span>
</span><span id="TramDagConfig-562"><a href="#TramDagConfig-562"><span class="linenos">562</span></a>            <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">conf</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="o">=</span><span class="n">CONF_DICT_PATH</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">,</span> <span class="n">_verify</span><span class="o">=</span><span class="n">_verify</span><span class="p">)</span>
</span><span id="TramDagConfig-563"><a href="#TramDagConfig-563"><span class="linenos">563</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="TramDagConfig-564"><a href="#TramDagConfig-564"><span class="linenos">564</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span> <span class="o">=</span> <span class="n">conf</span>
</span><span id="TramDagConfig-565"><a href="#TramDagConfig-565"><span class="linenos">565</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="n">CONF_DICT_PATH</span>
</span><span id="TramDagConfig-566"><a href="#TramDagConfig-566"><span class="linenos">566</span></a>            <span class="k">if</span> <span class="n">_verify</span><span class="p">:</span>
</span><span id="TramDagConfig-567"><a href="#TramDagConfig-567"><span class="linenos">567</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_verify_completeness</span><span class="p">()</span>
</span><span id="TramDagConfig-568"><a href="#TramDagConfig-568"><span class="linenos">568</span></a>                
</span><span id="TramDagConfig-569"><a href="#TramDagConfig-569"><span class="linenos">569</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_data_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_type</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TramDagConfig-570"><a href="#TramDagConfig-570"><span class="linenos">570</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig-571"><a href="#TramDagConfig-571"><span class="linenos">571</span></a><span class="sd">        Update or write the `data_type` section of a configuration file.</span>
</span><span id="TramDagConfig-572"><a href="#TramDagConfig-572"><span class="linenos">572</span></a>
</span><span id="TramDagConfig-573"><a href="#TramDagConfig-573"><span class="linenos">573</span></a><span class="sd">        Supports both class-level and instance-level usage:</span>
</span><span id="TramDagConfig-574"><a href="#TramDagConfig-574"><span class="linenos">574</span></a>
</span><span id="TramDagConfig-575"><a href="#TramDagConfig-575"><span class="linenos">575</span></a><span class="sd">        - Class call:</span>
</span><span id="TramDagConfig-576"><a href="#TramDagConfig-576"><span class="linenos">576</span></a><span class="sd">        - Requires `CONF_DICT_PATH` argument.</span>
</span><span id="TramDagConfig-577"><a href="#TramDagConfig-577"><span class="linenos">577</span></a><span class="sd">        - Reads the file if it exists, or starts from an empty dict.</span>
</span><span id="TramDagConfig-578"><a href="#TramDagConfig-578"><span class="linenos">578</span></a><span class="sd">        - Writes updated configuration to `CONF_DICT_PATH`.</span>
</span><span id="TramDagConfig-579"><a href="#TramDagConfig-579"><span class="linenos">579</span></a>
</span><span id="TramDagConfig-580"><a href="#TramDagConfig-580"><span class="linenos">580</span></a><span class="sd">        - Instance call:</span>
</span><span id="TramDagConfig-581"><a href="#TramDagConfig-581"><span class="linenos">581</span></a><span class="sd">        - Uses `self.CONF_DICT_PATH` if available, otherwise defaults to</span>
</span><span id="TramDagConfig-582"><a href="#TramDagConfig-582"><span class="linenos">582</span></a><span class="sd">            `&lt;cwd&gt;/configuration.json` if no path is provided.</span>
</span><span id="TramDagConfig-583"><a href="#TramDagConfig-583"><span class="linenos">583</span></a><span class="sd">        - Updates `self.conf_dict` and `self.CONF_DICT_PATH` after writing.</span>
</span><span id="TramDagConfig-584"><a href="#TramDagConfig-584"><span class="linenos">584</span></a>
</span><span id="TramDagConfig-585"><a href="#TramDagConfig-585"><span class="linenos">585</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig-586"><a href="#TramDagConfig-586"><span class="linenos">586</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig-587"><a href="#TramDagConfig-587"><span class="linenos">587</span></a><span class="sd">        data_type : dict</span>
</span><span id="TramDagConfig-588"><a href="#TramDagConfig-588"><span class="linenos">588</span></a><span class="sd">            Mapping `{variable_name: type_spec}`, where `type_spec` encodes</span>
</span><span id="TramDagConfig-589"><a href="#TramDagConfig-589"><span class="linenos">589</span></a><span class="sd">            modeling types (e.g. continuous, ordinal, etc.).</span>
</span><span id="TramDagConfig-590"><a href="#TramDagConfig-590"><span class="linenos">590</span></a><span class="sd">        CONF_DICT_PATH : str or None, optional</span>
</span><span id="TramDagConfig-591"><a href="#TramDagConfig-591"><span class="linenos">591</span></a><span class="sd">            Path to the configuration file. Must be provided for class calls.</span>
</span><span id="TramDagConfig-592"><a href="#TramDagConfig-592"><span class="linenos">592</span></a><span class="sd">            For instance calls, defaults as described above.</span>
</span><span id="TramDagConfig-593"><a href="#TramDagConfig-593"><span class="linenos">593</span></a>
</span><span id="TramDagConfig-594"><a href="#TramDagConfig-594"><span class="linenos">594</span></a><span class="sd">        Returns</span>
</span><span id="TramDagConfig-595"><a href="#TramDagConfig-595"><span class="linenos">595</span></a><span class="sd">        -------</span>
</span><span id="TramDagConfig-596"><a href="#TramDagConfig-596"><span class="linenos">596</span></a><span class="sd">        None</span>
</span><span id="TramDagConfig-597"><a href="#TramDagConfig-597"><span class="linenos">597</span></a>
</span><span id="TramDagConfig-598"><a href="#TramDagConfig-598"><span class="linenos">598</span></a><span class="sd">        Raises</span>
</span><span id="TramDagConfig-599"><a href="#TramDagConfig-599"><span class="linenos">599</span></a><span class="sd">        ------</span>
</span><span id="TramDagConfig-600"><a href="#TramDagConfig-600"><span class="linenos">600</span></a><span class="sd">        ValueError</span>
</span><span id="TramDagConfig-601"><a href="#TramDagConfig-601"><span class="linenos">601</span></a><span class="sd">            If `CONF_DICT_PATH` is missing when called on the class, or if</span>
</span><span id="TramDagConfig-602"><a href="#TramDagConfig-602"><span class="linenos">602</span></a><span class="sd">            validation of data types fails.</span>
</span><span id="TramDagConfig-603"><a href="#TramDagConfig-603"><span class="linenos">603</span></a>
</span><span id="TramDagConfig-604"><a href="#TramDagConfig-604"><span class="linenos">604</span></a><span class="sd">        Notes</span>
</span><span id="TramDagConfig-605"><a href="#TramDagConfig-605"><span class="linenos">605</span></a><span class="sd">        -----</span>
</span><span id="TramDagConfig-606"><a href="#TramDagConfig-606"><span class="linenos">606</span></a><span class="sd">        - Variable names are validated via `validate_variable_names`.</span>
</span><span id="TramDagConfig-607"><a href="#TramDagConfig-607"><span class="linenos">607</span></a><span class="sd">        - Data type values are validated via `validate_data_types`.</span>
</span><span id="TramDagConfig-608"><a href="#TramDagConfig-608"><span class="linenos">608</span></a><span class="sd">        - A textual summary of modeling settings is printed via</span>
</span><span id="TramDagConfig-609"><a href="#TramDagConfig-609"><span class="linenos">609</span></a><span class="sd">        `print_data_type_modeling_setting`, if possible.</span>
</span><span id="TramDagConfig-610"><a href="#TramDagConfig-610"><span class="linenos">610</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig-611"><a href="#TramDagConfig-611"><span class="linenos">611</span></a>        <span class="n">is_class_call</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>
</span><span id="TramDagConfig-612"><a href="#TramDagConfig-612"><span class="linenos">612</span></a>        <span class="bp">cls</span> <span class="o">=</span> <span class="bp">self</span> <span class="k">if</span> <span class="n">is_class_call</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span>
</span><span id="TramDagConfig-613"><a href="#TramDagConfig-613"><span class="linenos">613</span></a>
</span><span id="TramDagConfig-614"><a href="#TramDagConfig-614"><span class="linenos">614</span></a>        <span class="c1"># resolve path</span>
</span><span id="TramDagConfig-615"><a href="#TramDagConfig-615"><span class="linenos">615</span></a>        <span class="k">if</span> <span class="n">CONF_DICT_PATH</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TramDagConfig-616"><a href="#TramDagConfig-616"><span class="linenos">616</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_class_call</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;CONF_DICT_PATH&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="TramDagConfig-617"><a href="#TramDagConfig-617"><span class="linenos">617</span></a>                <span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span>
</span><span id="TramDagConfig-618"><a href="#TramDagConfig-618"><span class="linenos">618</span></a>            <span class="k">elif</span> <span class="ow">not</span> <span class="n">is_class_call</span><span class="p">:</span>
</span><span id="TramDagConfig-619"><a href="#TramDagConfig-619"><span class="linenos">619</span></a>                <span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s2">&quot;configuration.json&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-620"><a href="#TramDagConfig-620"><span class="linenos">620</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="TramDagConfig-621"><a href="#TramDagConfig-621"><span class="linenos">621</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;CONF_DICT_PATH must be provided when called on the class.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-622"><a href="#TramDagConfig-622"><span class="linenos">622</span></a>
</span><span id="TramDagConfig-623"><a href="#TramDagConfig-623"><span class="linenos">623</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="TramDagConfig-624"><a href="#TramDagConfig-624"><span class="linenos">624</span></a>            <span class="c1"># load existing or create empty configuration</span>
</span><span id="TramDagConfig-625"><a href="#TramDagConfig-625"><span class="linenos">625</span></a>            <span class="n">configuration_dict</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="TramDagConfig-626"><a href="#TramDagConfig-626"><span class="linenos">626</span></a>                <span class="n">load_configuration_dict</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="TramDagConfig-627"><a href="#TramDagConfig-627"><span class="linenos">627</span></a>                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="TramDagConfig-628"><a href="#TramDagConfig-628"><span class="linenos">628</span></a>                <span class="k">else</span> <span class="p">{}</span>
</span><span id="TramDagConfig-629"><a href="#TramDagConfig-629"><span class="linenos">629</span></a>            <span class="p">)</span>
</span><span id="TramDagConfig-630"><a href="#TramDagConfig-630"><span class="linenos">630</span></a>
</span><span id="TramDagConfig-631"><a href="#TramDagConfig-631"><span class="linenos">631</span></a>            <span class="n">validate_variable_names</span><span class="p">(</span><span class="n">data_type</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="TramDagConfig-632"><a href="#TramDagConfig-632"><span class="linenos">632</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">validate_data_types</span><span class="p">(</span><span class="n">data_type</span><span class="p">):</span>
</span><span id="TramDagConfig-633"><a href="#TramDagConfig-633"><span class="linenos">633</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid data types in the provided dictionary.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-634"><a href="#TramDagConfig-634"><span class="linenos">634</span></a>
</span><span id="TramDagConfig-635"><a href="#TramDagConfig-635"><span class="linenos">635</span></a>            <span class="n">configuration_dict</span><span class="p">[</span><span class="s2">&quot;data_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_type</span>
</span><span id="TramDagConfig-636"><a href="#TramDagConfig-636"><span class="linenos">636</span></a>            <span class="n">write_configuration_dict</span><span class="p">(</span><span class="n">configuration_dict</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="TramDagConfig-637"><a href="#TramDagConfig-637"><span class="linenos">637</span></a>
</span><span id="TramDagConfig-638"><a href="#TramDagConfig-638"><span class="linenos">638</span></a>            <span class="c1"># safe printing</span>
</span><span id="TramDagConfig-639"><a href="#TramDagConfig-639"><span class="linenos">639</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="TramDagConfig-640"><a href="#TramDagConfig-640"><span class="linenos">640</span></a>                <span class="n">print_data_type_modeling_setting</span><span class="p">(</span><span class="n">data_type</span> <span class="ow">or</span> <span class="p">{})</span>
</span><span id="TramDagConfig-641"><a href="#TramDagConfig-641"><span class="linenos">641</span></a>            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="TramDagConfig-642"><a href="#TramDagConfig-642"><span class="linenos">642</span></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[WARNING] Could not print data type modeling settings: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-643"><a href="#TramDagConfig-643"><span class="linenos">643</span></a>
</span><span id="TramDagConfig-644"><a href="#TramDagConfig-644"><span class="linenos">644</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_class_call</span><span class="p">:</span>
</span><span id="TramDagConfig-645"><a href="#TramDagConfig-645"><span class="linenos">645</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span> <span class="o">=</span> <span class="n">configuration_dict</span>
</span><span id="TramDagConfig-646"><a href="#TramDagConfig-646"><span class="linenos">646</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="n">CONF_DICT_PATH</span>
</span><span id="TramDagConfig-647"><a href="#TramDagConfig-647"><span class="linenos">647</span></a>
</span><span id="TramDagConfig-648"><a href="#TramDagConfig-648"><span class="linenos">648</span></a>
</span><span id="TramDagConfig-649"><a href="#TramDagConfig-649"><span class="linenos">649</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="TramDagConfig-650"><a href="#TramDagConfig-650"><span class="linenos">650</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to update configuration: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-651"><a href="#TramDagConfig-651"><span class="linenos">651</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="TramDagConfig-652"><a href="#TramDagConfig-652"><span class="linenos">652</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuration updated successfully at </span><span class="si">{</span><span class="n">CONF_DICT_PATH</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-653"><a href="#TramDagConfig-653"><span class="linenos">653</span></a>            
</span><span id="TramDagConfig-654"><a href="#TramDagConfig-654"><span class="linenos">654</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_meta_adj_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">seed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">):</span>
</span><span id="TramDagConfig-655"><a href="#TramDagConfig-655"><span class="linenos">655</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig-656"><a href="#TramDagConfig-656"><span class="linenos">656</span></a><span class="sd">        Launch the interactive editor to set or modify the adjacency matrix.</span>
</span><span id="TramDagConfig-657"><a href="#TramDagConfig-657"><span class="linenos">657</span></a>
</span><span id="TramDagConfig-658"><a href="#TramDagConfig-658"><span class="linenos">658</span></a><span class="sd">        This method:</span>
</span><span id="TramDagConfig-659"><a href="#TramDagConfig-659"><span class="linenos">659</span></a>
</span><span id="TramDagConfig-660"><a href="#TramDagConfig-660"><span class="linenos">660</span></a><span class="sd">        1. Resolves the configuration path either from the argument or, for</span>
</span><span id="TramDagConfig-661"><a href="#TramDagConfig-661"><span class="linenos">661</span></a><span class="sd">        instances, from `self.CONF_DICT_PATH`.</span>
</span><span id="TramDagConfig-662"><a href="#TramDagConfig-662"><span class="linenos">662</span></a><span class="sd">        2. Invokes `interactive_adj_matrix` to edit the adjacency matrix.</span>
</span><span id="TramDagConfig-663"><a href="#TramDagConfig-663"><span class="linenos">663</span></a><span class="sd">        3. For instances, reloads the updated configuration into `self.conf_dict`.</span>
</span><span id="TramDagConfig-664"><a href="#TramDagConfig-664"><span class="linenos">664</span></a>
</span><span id="TramDagConfig-665"><a href="#TramDagConfig-665"><span class="linenos">665</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig-666"><a href="#TramDagConfig-666"><span class="linenos">666</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig-667"><a href="#TramDagConfig-667"><span class="linenos">667</span></a><span class="sd">        CONF_DICT_PATH : str or None, optional</span>
</span><span id="TramDagConfig-668"><a href="#TramDagConfig-668"><span class="linenos">668</span></a><span class="sd">            Path to the configuration file. Must be provided when called</span>
</span><span id="TramDagConfig-669"><a href="#TramDagConfig-669"><span class="linenos">669</span></a><span class="sd">            on the class. For instance calls, defaults to `self.CONF_DICT_PATH`.</span>
</span><span id="TramDagConfig-670"><a href="#TramDagConfig-670"><span class="linenos">670</span></a><span class="sd">        seed : int, optional</span>
</span><span id="TramDagConfig-671"><a href="#TramDagConfig-671"><span class="linenos">671</span></a><span class="sd">            Random seed for any layout or stochastic behavior in the interactive</span>
</span><span id="TramDagConfig-672"><a href="#TramDagConfig-672"><span class="linenos">672</span></a><span class="sd">            editor. Default is 5.</span>
</span><span id="TramDagConfig-673"><a href="#TramDagConfig-673"><span class="linenos">673</span></a>
</span><span id="TramDagConfig-674"><a href="#TramDagConfig-674"><span class="linenos">674</span></a><span class="sd">        Returns</span>
</span><span id="TramDagConfig-675"><a href="#TramDagConfig-675"><span class="linenos">675</span></a><span class="sd">        -------</span>
</span><span id="TramDagConfig-676"><a href="#TramDagConfig-676"><span class="linenos">676</span></a><span class="sd">        None</span>
</span><span id="TramDagConfig-677"><a href="#TramDagConfig-677"><span class="linenos">677</span></a>
</span><span id="TramDagConfig-678"><a href="#TramDagConfig-678"><span class="linenos">678</span></a><span class="sd">        Raises</span>
</span><span id="TramDagConfig-679"><a href="#TramDagConfig-679"><span class="linenos">679</span></a><span class="sd">        ------</span>
</span><span id="TramDagConfig-680"><a href="#TramDagConfig-680"><span class="linenos">680</span></a><span class="sd">        ValueError</span>
</span><span id="TramDagConfig-681"><a href="#TramDagConfig-681"><span class="linenos">681</span></a><span class="sd">            If `CONF_DICT_PATH` is not provided and cannot be inferred</span>
</span><span id="TramDagConfig-682"><a href="#TramDagConfig-682"><span class="linenos">682</span></a><span class="sd">            (e.g. in a class call without path).</span>
</span><span id="TramDagConfig-683"><a href="#TramDagConfig-683"><span class="linenos">683</span></a>
</span><span id="TramDagConfig-684"><a href="#TramDagConfig-684"><span class="linenos">684</span></a><span class="sd">        Notes</span>
</span><span id="TramDagConfig-685"><a href="#TramDagConfig-685"><span class="linenos">685</span></a><span class="sd">        -----</span>
</span><span id="TramDagConfig-686"><a href="#TramDagConfig-686"><span class="linenos">686</span></a><span class="sd">        `self.update()` is called at the start to ensure the in-memory config</span>
</span><span id="TramDagConfig-687"><a href="#TramDagConfig-687"><span class="linenos">687</span></a><span class="sd">        is in sync with the file before launching the editor.</span>
</span><span id="TramDagConfig-688"><a href="#TramDagConfig-688"><span class="linenos">688</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig-689"><a href="#TramDagConfig-689"><span class="linenos">689</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="TramDagConfig-690"><a href="#TramDagConfig-690"><span class="linenos">690</span></a>        <span class="n">is_class_call</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>
</span><span id="TramDagConfig-691"><a href="#TramDagConfig-691"><span class="linenos">691</span></a>        <span class="c1"># resolve path</span>
</span><span id="TramDagConfig-692"><a href="#TramDagConfig-692"><span class="linenos">692</span></a>        <span class="k">if</span> <span class="n">CONF_DICT_PATH</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TramDagConfig-693"><a href="#TramDagConfig-693"><span class="linenos">693</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_class_call</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;CONF_DICT_PATH&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="TramDagConfig-694"><a href="#TramDagConfig-694"><span class="linenos">694</span></a>                <span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span>
</span><span id="TramDagConfig-695"><a href="#TramDagConfig-695"><span class="linenos">695</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="TramDagConfig-696"><a href="#TramDagConfig-696"><span class="linenos">696</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;CONF_DICT_PATH must be provided when called on the class.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-697"><a href="#TramDagConfig-697"><span class="linenos">697</span></a>
</span><span id="TramDagConfig-698"><a href="#TramDagConfig-698"><span class="linenos">698</span></a>        <span class="c1"># launch interactive editor</span>
</span><span id="TramDagConfig-699"><a href="#TramDagConfig-699"><span class="linenos">699</span></a>        
</span><span id="TramDagConfig-700"><a href="#TramDagConfig-700"><span class="linenos">700</span></a>        <span class="n">interactive_adj_matrix</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">)</span>
</span><span id="TramDagConfig-701"><a href="#TramDagConfig-701"><span class="linenos">701</span></a>
</span><span id="TramDagConfig-702"><a href="#TramDagConfig-702"><span class="linenos">702</span></a>        <span class="c1"># reload config if instance</span>
</span><span id="TramDagConfig-703"><a href="#TramDagConfig-703"><span class="linenos">703</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_class_call</span><span class="p">:</span>
</span><span id="TramDagConfig-704"><a href="#TramDagConfig-704"><span class="linenos">704</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span> <span class="o">=</span> <span class="n">load_configuration_dict</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="TramDagConfig-705"><a href="#TramDagConfig-705"><span class="linenos">705</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="n">CONF_DICT_PATH</span>
</span><span id="TramDagConfig-706"><a href="#TramDagConfig-706"><span class="linenos">706</span></a>
</span><span id="TramDagConfig-707"><a href="#TramDagConfig-707"><span class="linenos">707</span></a>
</span><span id="TramDagConfig-708"><a href="#TramDagConfig-708"><span class="linenos">708</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_tramdag_nn_models</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="TramDagConfig-709"><a href="#TramDagConfig-709"><span class="linenos">709</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig-710"><a href="#TramDagConfig-710"><span class="linenos">710</span></a><span class="sd">        Launch the interactive editor to set TRAM-DAG neural network model names.</span>
</span><span id="TramDagConfig-711"><a href="#TramDagConfig-711"><span class="linenos">711</span></a>
</span><span id="TramDagConfig-712"><a href="#TramDagConfig-712"><span class="linenos">712</span></a><span class="sd">        Depending on call context:</span>
</span><span id="TramDagConfig-713"><a href="#TramDagConfig-713"><span class="linenos">713</span></a>
</span><span id="TramDagConfig-714"><a href="#TramDagConfig-714"><span class="linenos">714</span></a><span class="sd">        - Class call:</span>
</span><span id="TramDagConfig-715"><a href="#TramDagConfig-715"><span class="linenos">715</span></a><span class="sd">        - Requires `CONF_DICT_PATH` argument.</span>
</span><span id="TramDagConfig-716"><a href="#TramDagConfig-716"><span class="linenos">716</span></a><span class="sd">        - Returns nothing and does not modify a specific instance.</span>
</span><span id="TramDagConfig-717"><a href="#TramDagConfig-717"><span class="linenos">717</span></a>
</span><span id="TramDagConfig-718"><a href="#TramDagConfig-718"><span class="linenos">718</span></a><span class="sd">        - Instance call:</span>
</span><span id="TramDagConfig-719"><a href="#TramDagConfig-719"><span class="linenos">719</span></a><span class="sd">        - Resolves `CONF_DICT_PATH` from the argument or `self.CONF_DICT_PATH`.</span>
</span><span id="TramDagConfig-720"><a href="#TramDagConfig-720"><span class="linenos">720</span></a><span class="sd">        - Updates `self.conf_dict` and `self.CONF_DICT_PATH` if the editor</span>
</span><span id="TramDagConfig-721"><a href="#TramDagConfig-721"><span class="linenos">721</span></a><span class="sd">            returns an updated configuration.</span>
</span><span id="TramDagConfig-722"><a href="#TramDagConfig-722"><span class="linenos">722</span></a>
</span><span id="TramDagConfig-723"><a href="#TramDagConfig-723"><span class="linenos">723</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig-724"><a href="#TramDagConfig-724"><span class="linenos">724</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig-725"><a href="#TramDagConfig-725"><span class="linenos">725</span></a><span class="sd">        CONF_DICT_PATH : str or None, optional</span>
</span><span id="TramDagConfig-726"><a href="#TramDagConfig-726"><span class="linenos">726</span></a><span class="sd">            Path to the configuration file. Must be provided when called on</span>
</span><span id="TramDagConfig-727"><a href="#TramDagConfig-727"><span class="linenos">727</span></a><span class="sd">            the class. For instance calls, defaults to `self.CONF_DICT_PATH`.</span>
</span><span id="TramDagConfig-728"><a href="#TramDagConfig-728"><span class="linenos">728</span></a>
</span><span id="TramDagConfig-729"><a href="#TramDagConfig-729"><span class="linenos">729</span></a><span class="sd">        Returns</span>
</span><span id="TramDagConfig-730"><a href="#TramDagConfig-730"><span class="linenos">730</span></a><span class="sd">        -------</span>
</span><span id="TramDagConfig-731"><a href="#TramDagConfig-731"><span class="linenos">731</span></a><span class="sd">        None</span>
</span><span id="TramDagConfig-732"><a href="#TramDagConfig-732"><span class="linenos">732</span></a>
</span><span id="TramDagConfig-733"><a href="#TramDagConfig-733"><span class="linenos">733</span></a><span class="sd">        Raises</span>
</span><span id="TramDagConfig-734"><a href="#TramDagConfig-734"><span class="linenos">734</span></a><span class="sd">        ------</span>
</span><span id="TramDagConfig-735"><a href="#TramDagConfig-735"><span class="linenos">735</span></a><span class="sd">        ValueError</span>
</span><span id="TramDagConfig-736"><a href="#TramDagConfig-736"><span class="linenos">736</span></a><span class="sd">            If `CONF_DICT_PATH` is not provided and cannot be inferred</span>
</span><span id="TramDagConfig-737"><a href="#TramDagConfig-737"><span class="linenos">737</span></a><span class="sd">            (e.g. in a class call without path).</span>
</span><span id="TramDagConfig-738"><a href="#TramDagConfig-738"><span class="linenos">738</span></a>
</span><span id="TramDagConfig-739"><a href="#TramDagConfig-739"><span class="linenos">739</span></a><span class="sd">        Notes</span>
</span><span id="TramDagConfig-740"><a href="#TramDagConfig-740"><span class="linenos">740</span></a><span class="sd">        -----</span>
</span><span id="TramDagConfig-741"><a href="#TramDagConfig-741"><span class="linenos">741</span></a><span class="sd">        The interactive editor is invoked via `interactive_nn_names_matrix`.</span>
</span><span id="TramDagConfig-742"><a href="#TramDagConfig-742"><span class="linenos">742</span></a><span class="sd">        If it returns `None`, the instance configuration is left unchanged.</span>
</span><span id="TramDagConfig-743"><a href="#TramDagConfig-743"><span class="linenos">743</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig-744"><a href="#TramDagConfig-744"><span class="linenos">744</span></a>        <span class="n">is_class_call</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>
</span><span id="TramDagConfig-745"><a href="#TramDagConfig-745"><span class="linenos">745</span></a>        <span class="k">if</span> <span class="n">CONF_DICT_PATH</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TramDagConfig-746"><a href="#TramDagConfig-746"><span class="linenos">746</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_class_call</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;CONF_DICT_PATH&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="TramDagConfig-747"><a href="#TramDagConfig-747"><span class="linenos">747</span></a>                <span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span>
</span><span id="TramDagConfig-748"><a href="#TramDagConfig-748"><span class="linenos">748</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="TramDagConfig-749"><a href="#TramDagConfig-749"><span class="linenos">749</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;CONF_DICT_PATH must be provided when called on the class.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig-750"><a href="#TramDagConfig-750"><span class="linenos">750</span></a>
</span><span id="TramDagConfig-751"><a href="#TramDagConfig-751"><span class="linenos">751</span></a>        <span class="n">updated_conf</span> <span class="o">=</span> <span class="n">interactive_nn_names_matrix</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="TramDagConfig-752"><a href="#TramDagConfig-752"><span class="linenos">752</span></a>        <span class="k">if</span> <span class="n">updated_conf</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">is_class_call</span><span class="p">:</span>
</span><span id="TramDagConfig-753"><a href="#TramDagConfig-753"><span class="linenos">753</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span> <span class="o">=</span> <span class="n">updated_conf</span>
</span><span id="TramDagConfig-754"><a href="#TramDagConfig-754"><span class="linenos">754</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="n">CONF_DICT_PATH</span>
</span></pre></div>


            <div class="docstring"><p>Configuration manager for TRAM-DAG experiments.</p>

<p>This class encapsulates:</p>

<ul>
<li>The experiment configuration dictionary (<code><a href="#TramDagConfig.conf_dict">conf_dict</a></code>).</li>
<li>Its backing file path (<code><a href="#TramDagConfig.CONF_DICT_PATH">CONF_DICT_PATH</a></code>).</li>
<li>Utilities to load, validate, modify, and persist configuration.</li>
<li>DAG visualization and interactive editing helpers.</li>
</ul>

<h2 id="typical-usage">Typical usage</h2>

<ul>
<li>Load existing configuration from disk via <code><a href="#TramDagConfig.load_json">TramDagConfig.load_json</a></code>.</li>
<li>Or create/reuse experiment setup via <code>TramDagConfig().setup_configuration</code>.</li>
<li>Update sections such as <code>data_type</code>, adjacency matrix, and neural network
model names using the provided methods.</li>
</ul>
</div>


                            <div id="TramDagConfig.__init__" class="classattr">
                                        <input id="TramDagConfig.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">TramDagConfig</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">conf_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">_verify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span>)</span>

                <label class="view-source-button" for="TramDagConfig.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TramDagConfig.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TramDagConfig.__init__-49"><a href="#TramDagConfig.__init__-49"><span class="linenos">49</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conf_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="n">_verify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="TramDagConfig.__init__-50"><a href="#TramDagConfig.__init__-50"><span class="linenos">50</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig.__init__-51"><a href="#TramDagConfig.__init__-51"><span class="linenos">51</span></a><span class="sd">        Initialize a TramDagConfig instance.</span>
</span><span id="TramDagConfig.__init__-52"><a href="#TramDagConfig.__init__-52"><span class="linenos">52</span></a>
</span><span id="TramDagConfig.__init__-53"><a href="#TramDagConfig.__init__-53"><span class="linenos">53</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig.__init__-54"><a href="#TramDagConfig.__init__-54"><span class="linenos">54</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig.__init__-55"><a href="#TramDagConfig.__init__-55"><span class="linenos">55</span></a><span class="sd">        conf_dict : dict or None, optional</span>
</span><span id="TramDagConfig.__init__-56"><a href="#TramDagConfig.__init__-56"><span class="linenos">56</span></a><span class="sd">            Configuration dictionary. If None, an empty dict is used and can</span>
</span><span id="TramDagConfig.__init__-57"><a href="#TramDagConfig.__init__-57"><span class="linenos">57</span></a><span class="sd">            be populated later. Default is None.</span>
</span><span id="TramDagConfig.__init__-58"><a href="#TramDagConfig.__init__-58"><span class="linenos">58</span></a><span class="sd">        CONF_DICT_PATH : str or None, optional</span>
</span><span id="TramDagConfig.__init__-59"><a href="#TramDagConfig.__init__-59"><span class="linenos">59</span></a><span class="sd">            Path to the configuration file on disk. Default is None.</span>
</span><span id="TramDagConfig.__init__-60"><a href="#TramDagConfig.__init__-60"><span class="linenos">60</span></a><span class="sd">        _verify : bool, optional</span>
</span><span id="TramDagConfig.__init__-61"><a href="#TramDagConfig.__init__-61"><span class="linenos">61</span></a><span class="sd">            If True, run `_verify_completeness()` after initialization.</span>
</span><span id="TramDagConfig.__init__-62"><a href="#TramDagConfig.__init__-62"><span class="linenos">62</span></a><span class="sd">            Default is False.</span>
</span><span id="TramDagConfig.__init__-63"><a href="#TramDagConfig.__init__-63"><span class="linenos">63</span></a><span class="sd">        **kwargs</span>
</span><span id="TramDagConfig.__init__-64"><a href="#TramDagConfig.__init__-64"><span class="linenos">64</span></a><span class="sd">            Additional attributes to be set on the instance. Keys &quot;conf_dict&quot;</span>
</span><span id="TramDagConfig.__init__-65"><a href="#TramDagConfig.__init__-65"><span class="linenos">65</span></a><span class="sd">            and &quot;CONF_DICT_PATH&quot; are forbidden and raise a ValueError.</span>
</span><span id="TramDagConfig.__init__-66"><a href="#TramDagConfig.__init__-66"><span class="linenos">66</span></a>
</span><span id="TramDagConfig.__init__-67"><a href="#TramDagConfig.__init__-67"><span class="linenos">67</span></a><span class="sd">        Raises</span>
</span><span id="TramDagConfig.__init__-68"><a href="#TramDagConfig.__init__-68"><span class="linenos">68</span></a><span class="sd">        ------</span>
</span><span id="TramDagConfig.__init__-69"><a href="#TramDagConfig.__init__-69"><span class="linenos">69</span></a><span class="sd">        ValueError</span>
</span><span id="TramDagConfig.__init__-70"><a href="#TramDagConfig.__init__-70"><span class="linenos">70</span></a><span class="sd">            If any key in `kwargs` is &quot;conf_dict&quot; or &quot;CONF_DICT_PATH&quot;.</span>
</span><span id="TramDagConfig.__init__-71"><a href="#TramDagConfig.__init__-71"><span class="linenos">71</span></a>
</span><span id="TramDagConfig.__init__-72"><a href="#TramDagConfig.__init__-72"><span class="linenos">72</span></a><span class="sd">        Notes</span>
</span><span id="TramDagConfig.__init__-73"><a href="#TramDagConfig.__init__-73"><span class="linenos">73</span></a><span class="sd">        -----</span>
</span><span id="TramDagConfig.__init__-74"><a href="#TramDagConfig.__init__-74"><span class="linenos">74</span></a><span class="sd">        By default, `debug` and `verbose` are set to False. They can be</span>
</span><span id="TramDagConfig.__init__-75"><a href="#TramDagConfig.__init__-75"><span class="linenos">75</span></a><span class="sd">        overridden via `kwargs`.</span>
</span><span id="TramDagConfig.__init__-76"><a href="#TramDagConfig.__init__-76"><span class="linenos">76</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig.__init__-77"><a href="#TramDagConfig.__init__-77"><span class="linenos">77</span></a>
</span><span id="TramDagConfig.__init__-78"><a href="#TramDagConfig.__init__-78"><span class="linenos">78</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="TramDagConfig.__init__-79"><a href="#TramDagConfig.__init__-79"><span class="linenos">79</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="TramDagConfig.__init__-80"><a href="#TramDagConfig.__init__-80"><span class="linenos">80</span></a>        
</span><span id="TramDagConfig.__init__-81"><a href="#TramDagConfig.__init__-81"><span class="linenos">81</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="TramDagConfig.__init__-82"><a href="#TramDagConfig.__init__-82"><span class="linenos">82</span></a>            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;conf_dict&#39;</span><span class="p">,</span> <span class="s1">&#39;CONF_DICT_PATH&#39;</span><span class="p">]:</span>
</span><span id="TramDagConfig.__init__-83"><a href="#TramDagConfig.__init__-83"><span class="linenos">83</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot override &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39; via kwargs.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.__init__-84"><a href="#TramDagConfig.__init__-84"><span class="linenos">84</span></a>            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="TramDagConfig.__init__-85"><a href="#TramDagConfig.__init__-85"><span class="linenos">85</span></a>        
</span><span id="TramDagConfig.__init__-86"><a href="#TramDagConfig.__init__-86"><span class="linenos">86</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span> <span class="o">=</span> <span class="n">conf_dict</span> <span class="ow">or</span> <span class="p">{}</span>
</span><span id="TramDagConfig.__init__-87"><a href="#TramDagConfig.__init__-87"><span class="linenos">87</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="n">CONF_DICT_PATH</span>
</span><span id="TramDagConfig.__init__-88"><a href="#TramDagConfig.__init__-88"><span class="linenos">88</span></a>        
</span><span id="TramDagConfig.__init__-89"><a href="#TramDagConfig.__init__-89"><span class="linenos">89</span></a>        <span class="c1"># verification </span>
</span><span id="TramDagConfig.__init__-90"><a href="#TramDagConfig.__init__-90"><span class="linenos">90</span></a>        <span class="k">if</span> <span class="n">_verify</span><span class="p">:</span>
</span><span id="TramDagConfig.__init__-91"><a href="#TramDagConfig.__init__-91"><span class="linenos">91</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_verify_completeness</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Initialize a TramDagConfig instance.</p>

<h2 id="parameters">Parameters</h2>

<p>conf_dict : dict or None, optional
    Configuration dictionary. If None, an empty dict is used and can
    be populated later. Default is None.
CONF_DICT_PATH : str or None, optional
    Path to the configuration file on disk. Default is None.
_verify : bool, optional
    If True, run <code>_verify_completeness()</code> after initialization.
    Default is False.
**kwargs
    Additional attributes to be set on the instance. Keys "conf_dict"
    and "CONF_DICT_PATH" are forbidden and raise a ValueError.</p>

<h2 id="raises">Raises</h2>

<p>ValueError
    If any key in <code>kwargs</code> is "conf_dict" or "CONF_DICT_PATH".</p>

<h2 id="notes">Notes</h2>

<p>By default, <code><a href="#TramDagConfig.debug">debug</a></code> and <code><a href="#TramDagConfig.verbose">verbose</a></code> are set to False. They can be
overridden via <code>kwargs</code>.</p>
</div>


                            </div>
                            <div id="TramDagConfig.debug" class="classattr">
                                <div class="attr variable">
            <span class="name">debug</span>

        
    </div>
    <a class="headerlink" href="#TramDagConfig.debug"></a>
    
    

                            </div>
                            <div id="TramDagConfig.verbose" class="classattr">
                                <div class="attr variable">
            <span class="name">verbose</span>

        
    </div>
    <a class="headerlink" href="#TramDagConfig.verbose"></a>
    
    

                            </div>
                            <div id="TramDagConfig.conf_dict" class="classattr">
                                <div class="attr variable">
            <span class="name">conf_dict</span>

        
    </div>
    <a class="headerlink" href="#TramDagConfig.conf_dict"></a>
    
    

                            </div>
                            <div id="TramDagConfig.CONF_DICT_PATH" class="classattr">
                                <div class="attr variable">
            <span class="name">CONF_DICT_PATH</span>

        
    </div>
    <a class="headerlink" href="#TramDagConfig.CONF_DICT_PATH"></a>
    
    

                            </div>
                            <div id="TramDagConfig.load_json" class="classattr">
                                        <input id="TramDagConfig.load_json-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">load_json</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span>, </span><span class="param"><span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="TramDagConfig.load_json-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TramDagConfig.load_json"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TramDagConfig.load_json-93"><a href="#TramDagConfig.load_json-93"><span class="linenos"> 93</span></a>    <span class="nd">@classmethod</span>
</span><span id="TramDagConfig.load_json-94"><a href="#TramDagConfig.load_json-94"><span class="linenos"> 94</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">load_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span><span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="TramDagConfig.load_json-95"><a href="#TramDagConfig.load_json-95"><span class="linenos"> 95</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig.load_json-96"><a href="#TramDagConfig.load_json-96"><span class="linenos"> 96</span></a><span class="sd">        Load a configuration from a JSON file and construct a TramDagConfig.</span>
</span><span id="TramDagConfig.load_json-97"><a href="#TramDagConfig.load_json-97"><span class="linenos"> 97</span></a>
</span><span id="TramDagConfig.load_json-98"><a href="#TramDagConfig.load_json-98"><span class="linenos"> 98</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig.load_json-99"><a href="#TramDagConfig.load_json-99"><span class="linenos"> 99</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig.load_json-100"><a href="#TramDagConfig.load_json-100"><span class="linenos">100</span></a><span class="sd">        CONF_DICT_PATH : str</span>
</span><span id="TramDagConfig.load_json-101"><a href="#TramDagConfig.load_json-101"><span class="linenos">101</span></a><span class="sd">            Path to the configuration JSON file.</span>
</span><span id="TramDagConfig.load_json-102"><a href="#TramDagConfig.load_json-102"><span class="linenos">102</span></a><span class="sd">        debug : bool, optional</span>
</span><span id="TramDagConfig.load_json-103"><a href="#TramDagConfig.load_json-103"><span class="linenos">103</span></a><span class="sd">            If True, initialize the instance with `debug=True`. Default is False.</span>
</span><span id="TramDagConfig.load_json-104"><a href="#TramDagConfig.load_json-104"><span class="linenos">104</span></a>
</span><span id="TramDagConfig.load_json-105"><a href="#TramDagConfig.load_json-105"><span class="linenos">105</span></a><span class="sd">        Returns</span>
</span><span id="TramDagConfig.load_json-106"><a href="#TramDagConfig.load_json-106"><span class="linenos">106</span></a><span class="sd">        -------</span>
</span><span id="TramDagConfig.load_json-107"><a href="#TramDagConfig.load_json-107"><span class="linenos">107</span></a><span class="sd">        TramDagConfig</span>
</span><span id="TramDagConfig.load_json-108"><a href="#TramDagConfig.load_json-108"><span class="linenos">108</span></a><span class="sd">            Newly created configuration instance with `conf_dict` loaded from</span>
</span><span id="TramDagConfig.load_json-109"><a href="#TramDagConfig.load_json-109"><span class="linenos">109</span></a><span class="sd">            `CONF_DICT_PATH` and `_verify_completeness()` executed.</span>
</span><span id="TramDagConfig.load_json-110"><a href="#TramDagConfig.load_json-110"><span class="linenos">110</span></a>
</span><span id="TramDagConfig.load_json-111"><a href="#TramDagConfig.load_json-111"><span class="linenos">111</span></a><span class="sd">        Raises</span>
</span><span id="TramDagConfig.load_json-112"><a href="#TramDagConfig.load_json-112"><span class="linenos">112</span></a><span class="sd">        ------</span>
</span><span id="TramDagConfig.load_json-113"><a href="#TramDagConfig.load_json-113"><span class="linenos">113</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="TramDagConfig.load_json-114"><a href="#TramDagConfig.load_json-114"><span class="linenos">114</span></a><span class="sd">            If the configuration file cannot be found (propagated by</span>
</span><span id="TramDagConfig.load_json-115"><a href="#TramDagConfig.load_json-115"><span class="linenos">115</span></a><span class="sd">            `load_configuration_dict`).</span>
</span><span id="TramDagConfig.load_json-116"><a href="#TramDagConfig.load_json-116"><span class="linenos">116</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig.load_json-117"><a href="#TramDagConfig.load_json-117"><span class="linenos">117</span></a>
</span><span id="TramDagConfig.load_json-118"><a href="#TramDagConfig.load_json-118"><span class="linenos">118</span></a>        <span class="n">conf</span> <span class="o">=</span> <span class="n">load_configuration_dict</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="TramDagConfig.load_json-119"><a href="#TramDagConfig.load_json-119"><span class="linenos">119</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">conf</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="o">=</span><span class="n">CONF_DICT_PATH</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">,</span> <span class="n">_verify</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Load a configuration from a JSON file and construct a TramDagConfig.</p>

<h2 id="parameters">Parameters</h2>

<p>CONF_DICT_PATH : str
    Path to the configuration JSON file.
debug : bool, optional
    If True, initialize the instance with <code>debug=True</code>. Default is False.</p>

<h2 id="returns">Returns</h2>

<p>TramDagConfig
    Newly created configuration instance with <code><a href="#TramDagConfig.conf_dict">conf_dict</a></code> loaded from
    <code><a href="#TramDagConfig.CONF_DICT_PATH">CONF_DICT_PATH</a></code> and <code>_verify_completeness()</code> executed.</p>

<h2 id="raises">Raises</h2>

<p>FileNotFoundError
    If the configuration file cannot be found (propagated by
    <code>load_configuration_dict</code>).</p>
</div>


                            </div>
                            <div id="TramDagConfig.update" class="classattr">
                                        <input id="TramDagConfig.update-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">update</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="TramDagConfig.update-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TramDagConfig.update"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TramDagConfig.update-121"><a href="#TramDagConfig.update-121"><span class="linenos">121</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="TramDagConfig.update-122"><a href="#TramDagConfig.update-122"><span class="linenos">122</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig.update-123"><a href="#TramDagConfig.update-123"><span class="linenos">123</span></a><span class="sd">        Reload the latest configuration from disk into this instance.</span>
</span><span id="TramDagConfig.update-124"><a href="#TramDagConfig.update-124"><span class="linenos">124</span></a>
</span><span id="TramDagConfig.update-125"><a href="#TramDagConfig.update-125"><span class="linenos">125</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig.update-126"><a href="#TramDagConfig.update-126"><span class="linenos">126</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig.update-127"><a href="#TramDagConfig.update-127"><span class="linenos">127</span></a><span class="sd">        None</span>
</span><span id="TramDagConfig.update-128"><a href="#TramDagConfig.update-128"><span class="linenos">128</span></a>
</span><span id="TramDagConfig.update-129"><a href="#TramDagConfig.update-129"><span class="linenos">129</span></a><span class="sd">        Returns</span>
</span><span id="TramDagConfig.update-130"><a href="#TramDagConfig.update-130"><span class="linenos">130</span></a><span class="sd">        -------</span>
</span><span id="TramDagConfig.update-131"><a href="#TramDagConfig.update-131"><span class="linenos">131</span></a><span class="sd">        None</span>
</span><span id="TramDagConfig.update-132"><a href="#TramDagConfig.update-132"><span class="linenos">132</span></a>
</span><span id="TramDagConfig.update-133"><a href="#TramDagConfig.update-133"><span class="linenos">133</span></a><span class="sd">        Raises</span>
</span><span id="TramDagConfig.update-134"><a href="#TramDagConfig.update-134"><span class="linenos">134</span></a><span class="sd">        ------</span>
</span><span id="TramDagConfig.update-135"><a href="#TramDagConfig.update-135"><span class="linenos">135</span></a><span class="sd">        ValueError</span>
</span><span id="TramDagConfig.update-136"><a href="#TramDagConfig.update-136"><span class="linenos">136</span></a><span class="sd">            If `CONF_DICT_PATH` is not set on the instance.</span>
</span><span id="TramDagConfig.update-137"><a href="#TramDagConfig.update-137"><span class="linenos">137</span></a>
</span><span id="TramDagConfig.update-138"><a href="#TramDagConfig.update-138"><span class="linenos">138</span></a><span class="sd">        Notes</span>
</span><span id="TramDagConfig.update-139"><a href="#TramDagConfig.update-139"><span class="linenos">139</span></a><span class="sd">        -----</span>
</span><span id="TramDagConfig.update-140"><a href="#TramDagConfig.update-140"><span class="linenos">140</span></a><span class="sd">        The current in-memory `conf_dict` is overwritten by the contents</span>
</span><span id="TramDagConfig.update-141"><a href="#TramDagConfig.update-141"><span class="linenos">141</span></a><span class="sd">        loaded from `CONF_DICT_PATH`.</span>
</span><span id="TramDagConfig.update-142"><a href="#TramDagConfig.update-142"><span class="linenos">142</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig.update-143"><a href="#TramDagConfig.update-143"><span class="linenos">143</span></a>
</span><span id="TramDagConfig.update-144"><a href="#TramDagConfig.update-144"><span class="linenos">144</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;CONF_DICT_PATH&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TramDagConfig.update-145"><a href="#TramDagConfig.update-145"><span class="linenos">145</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;CONF_DICT_PATH not set  cannot update configuration.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.update-146"><a href="#TramDagConfig.update-146"><span class="linenos">146</span></a>        
</span><span id="TramDagConfig.update-147"><a href="#TramDagConfig.update-147"><span class="linenos">147</span></a>        
</span><span id="TramDagConfig.update-148"><a href="#TramDagConfig.update-148"><span class="linenos">148</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span> <span class="o">=</span> <span class="n">load_configuration_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Reload the latest configuration from disk into this instance.</p>

<h2 id="parameters">Parameters</h2>

<p>None</p>

<h2 id="returns">Returns</h2>

<p>None</p>

<h2 id="raises">Raises</h2>

<p>ValueError
    If <code><a href="#TramDagConfig.CONF_DICT_PATH">CONF_DICT_PATH</a></code> is not set on the instance.</p>

<h2 id="notes">Notes</h2>

<p>The current in-memory <code><a href="#TramDagConfig.conf_dict">conf_dict</a></code> is overwritten by the contents
loaded from <code><a href="#TramDagConfig.CONF_DICT_PATH">CONF_DICT_PATH</a></code>.</p>
</div>


                            </div>
                            <div id="TramDagConfig.save" class="classattr">
                                        <input id="TramDagConfig.save-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">save</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="TramDagConfig.save-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TramDagConfig.save"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TramDagConfig.save-151"><a href="#TramDagConfig.save-151"><span class="linenos">151</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="TramDagConfig.save-152"><a href="#TramDagConfig.save-152"><span class="linenos">152</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig.save-153"><a href="#TramDagConfig.save-153"><span class="linenos">153</span></a><span class="sd">        Persist the current configuration dictionary to disk.</span>
</span><span id="TramDagConfig.save-154"><a href="#TramDagConfig.save-154"><span class="linenos">154</span></a>
</span><span id="TramDagConfig.save-155"><a href="#TramDagConfig.save-155"><span class="linenos">155</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig.save-156"><a href="#TramDagConfig.save-156"><span class="linenos">156</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig.save-157"><a href="#TramDagConfig.save-157"><span class="linenos">157</span></a><span class="sd">        CONF_DICT_PATH : str or None, optional</span>
</span><span id="TramDagConfig.save-158"><a href="#TramDagConfig.save-158"><span class="linenos">158</span></a><span class="sd">            Target path for the configuration file. If None, uses</span>
</span><span id="TramDagConfig.save-159"><a href="#TramDagConfig.save-159"><span class="linenos">159</span></a><span class="sd">            `self.CONF_DICT_PATH`. Default is None.</span>
</span><span id="TramDagConfig.save-160"><a href="#TramDagConfig.save-160"><span class="linenos">160</span></a>
</span><span id="TramDagConfig.save-161"><a href="#TramDagConfig.save-161"><span class="linenos">161</span></a><span class="sd">        Returns</span>
</span><span id="TramDagConfig.save-162"><a href="#TramDagConfig.save-162"><span class="linenos">162</span></a><span class="sd">        -------</span>
</span><span id="TramDagConfig.save-163"><a href="#TramDagConfig.save-163"><span class="linenos">163</span></a><span class="sd">        None</span>
</span><span id="TramDagConfig.save-164"><a href="#TramDagConfig.save-164"><span class="linenos">164</span></a>
</span><span id="TramDagConfig.save-165"><a href="#TramDagConfig.save-165"><span class="linenos">165</span></a><span class="sd">        Raises</span>
</span><span id="TramDagConfig.save-166"><a href="#TramDagConfig.save-166"><span class="linenos">166</span></a><span class="sd">        ------</span>
</span><span id="TramDagConfig.save-167"><a href="#TramDagConfig.save-167"><span class="linenos">167</span></a><span class="sd">        ValueError</span>
</span><span id="TramDagConfig.save-168"><a href="#TramDagConfig.save-168"><span class="linenos">168</span></a><span class="sd">            If neither the function argument nor `self.CONF_DICT_PATH`</span>
</span><span id="TramDagConfig.save-169"><a href="#TramDagConfig.save-169"><span class="linenos">169</span></a><span class="sd">            provides a valid path.</span>
</span><span id="TramDagConfig.save-170"><a href="#TramDagConfig.save-170"><span class="linenos">170</span></a>
</span><span id="TramDagConfig.save-171"><a href="#TramDagConfig.save-171"><span class="linenos">171</span></a><span class="sd">        Notes</span>
</span><span id="TramDagConfig.save-172"><a href="#TramDagConfig.save-172"><span class="linenos">172</span></a><span class="sd">        -----</span>
</span><span id="TramDagConfig.save-173"><a href="#TramDagConfig.save-173"><span class="linenos">173</span></a><span class="sd">        The resulting file is written via `write_configuration_dict`.</span>
</span><span id="TramDagConfig.save-174"><a href="#TramDagConfig.save-174"><span class="linenos">174</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig.save-175"><a href="#TramDagConfig.save-175"><span class="linenos">175</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="n">CONF_DICT_PATH</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span>
</span><span id="TramDagConfig.save-176"><a href="#TramDagConfig.save-176"><span class="linenos">176</span></a>        <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TramDagConfig.save-177"><a href="#TramDagConfig.save-177"><span class="linenos">177</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No CONF_DICT_PATH provided to save config.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.save-178"><a href="#TramDagConfig.save-178"><span class="linenos">178</span></a>        <span class="n">write_configuration_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Persist the current configuration dictionary to disk.</p>

<h2 id="parameters">Parameters</h2>

<p>CONF_DICT_PATH : str or None, optional
    Target path for the configuration file. If None, uses
    <code>self.CONF_DICT_PATH</code>. Default is None.</p>

<h2 id="returns">Returns</h2>

<p>None</p>

<h2 id="raises">Raises</h2>

<p>ValueError
    If neither the function argument nor <code>self.CONF_DICT_PATH</code>
    provides a valid path.</p>

<h2 id="notes">Notes</h2>

<p>The resulting file is written via <code>write_configuration_dict</code>.</p>
</div>


                            </div>
                            <div id="TramDagConfig.compute_levels" class="classattr">
                                        <input id="TramDagConfig.compute_levels-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">compute_levels</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">DataFrame</span>, </span><span class="param"><span class="n">write</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="TramDagConfig.compute_levels-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TramDagConfig.compute_levels"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TramDagConfig.compute_levels-337"><a href="#TramDagConfig.compute_levels-337"><span class="linenos">337</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">compute_levels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">write</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
</span><span id="TramDagConfig.compute_levels-338"><a href="#TramDagConfig.compute_levels-338"><span class="linenos">338</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig.compute_levels-339"><a href="#TramDagConfig.compute_levels-339"><span class="linenos">339</span></a><span class="sd">        Infer and update ordinal/categorical levels from data.</span>
</span><span id="TramDagConfig.compute_levels-340"><a href="#TramDagConfig.compute_levels-340"><span class="linenos">340</span></a>
</span><span id="TramDagConfig.compute_levels-341"><a href="#TramDagConfig.compute_levels-341"><span class="linenos">341</span></a><span class="sd">        For each variable in the configuration&#39;s `data_type` section, this</span>
</span><span id="TramDagConfig.compute_levels-342"><a href="#TramDagConfig.compute_levels-342"><span class="linenos">342</span></a><span class="sd">        method uses the provided DataFrame to construct a levels dictionary</span>
</span><span id="TramDagConfig.compute_levels-343"><a href="#TramDagConfig.compute_levels-343"><span class="linenos">343</span></a><span class="sd">        and injects the corresponding &quot;levels&quot; entry into `conf_dict[&quot;nodes&quot;]`.</span>
</span><span id="TramDagConfig.compute_levels-344"><a href="#TramDagConfig.compute_levels-344"><span class="linenos">344</span></a>
</span><span id="TramDagConfig.compute_levels-345"><a href="#TramDagConfig.compute_levels-345"><span class="linenos">345</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig.compute_levels-346"><a href="#TramDagConfig.compute_levels-346"><span class="linenos">346</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig.compute_levels-347"><a href="#TramDagConfig.compute_levels-347"><span class="linenos">347</span></a><span class="sd">        df : pandas.DataFrame</span>
</span><span id="TramDagConfig.compute_levels-348"><a href="#TramDagConfig.compute_levels-348"><span class="linenos">348</span></a><span class="sd">            DataFrame used to infer levels for configured variables.</span>
</span><span id="TramDagConfig.compute_levels-349"><a href="#TramDagConfig.compute_levels-349"><span class="linenos">349</span></a><span class="sd">        write : bool, optional</span>
</span><span id="TramDagConfig.compute_levels-350"><a href="#TramDagConfig.compute_levels-350"><span class="linenos">350</span></a><span class="sd">            If True and `CONF_DICT_PATH` is set, the updated configuration is</span>
</span><span id="TramDagConfig.compute_levels-351"><a href="#TramDagConfig.compute_levels-351"><span class="linenos">351</span></a><span class="sd">            written back to disk. Default is True.</span>
</span><span id="TramDagConfig.compute_levels-352"><a href="#TramDagConfig.compute_levels-352"><span class="linenos">352</span></a>
</span><span id="TramDagConfig.compute_levels-353"><a href="#TramDagConfig.compute_levels-353"><span class="linenos">353</span></a><span class="sd">        Returns</span>
</span><span id="TramDagConfig.compute_levels-354"><a href="#TramDagConfig.compute_levels-354"><span class="linenos">354</span></a><span class="sd">        -------</span>
</span><span id="TramDagConfig.compute_levels-355"><a href="#TramDagConfig.compute_levels-355"><span class="linenos">355</span></a><span class="sd">        None</span>
</span><span id="TramDagConfig.compute_levels-356"><a href="#TramDagConfig.compute_levels-356"><span class="linenos">356</span></a>
</span><span id="TramDagConfig.compute_levels-357"><a href="#TramDagConfig.compute_levels-357"><span class="linenos">357</span></a><span class="sd">        Raises</span>
</span><span id="TramDagConfig.compute_levels-358"><a href="#TramDagConfig.compute_levels-358"><span class="linenos">358</span></a><span class="sd">        ------</span>
</span><span id="TramDagConfig.compute_levels-359"><a href="#TramDagConfig.compute_levels-359"><span class="linenos">359</span></a><span class="sd">        Exception</span>
</span><span id="TramDagConfig.compute_levels-360"><a href="#TramDagConfig.compute_levels-360"><span class="linenos">360</span></a><span class="sd">            If saving the configuration fails when `write=True`.</span>
</span><span id="TramDagConfig.compute_levels-361"><a href="#TramDagConfig.compute_levels-361"><span class="linenos">361</span></a>
</span><span id="TramDagConfig.compute_levels-362"><a href="#TramDagConfig.compute_levels-362"><span class="linenos">362</span></a><span class="sd">        Notes</span>
</span><span id="TramDagConfig.compute_levels-363"><a href="#TramDagConfig.compute_levels-363"><span class="linenos">363</span></a><span class="sd">        -----</span>
</span><span id="TramDagConfig.compute_levels-364"><a href="#TramDagConfig.compute_levels-364"><span class="linenos">364</span></a><span class="sd">        - Variables present in `levels_dict` but not in `conf_dict[&quot;nodes&quot;]`</span>
</span><span id="TramDagConfig.compute_levels-365"><a href="#TramDagConfig.compute_levels-365"><span class="linenos">365</span></a><span class="sd">        trigger a warning and are skipped.</span>
</span><span id="TramDagConfig.compute_levels-366"><a href="#TramDagConfig.compute_levels-366"><span class="linenos">366</span></a><span class="sd">        - If `self.verbose` or `self.debug` is True, a success message is printed</span>
</span><span id="TramDagConfig.compute_levels-367"><a href="#TramDagConfig.compute_levels-367"><span class="linenos">367</span></a><span class="sd">        when the configuration is saved.</span>
</span><span id="TramDagConfig.compute_levels-368"><a href="#TramDagConfig.compute_levels-368"><span class="linenos">368</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig.compute_levels-369"><a href="#TramDagConfig.compute_levels-369"><span class="linenos">369</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="TramDagConfig.compute_levels-370"><a href="#TramDagConfig.compute_levels-370"><span class="linenos">370</span></a>        <span class="n">levels_dict</span> <span class="o">=</span> <span class="n">create_levels_dict</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="p">[</span><span class="s1">&#39;data_type&#39;</span><span class="p">])</span>
</span><span id="TramDagConfig.compute_levels-371"><a href="#TramDagConfig.compute_levels-371"><span class="linenos">371</span></a>        
</span><span id="TramDagConfig.compute_levels-372"><a href="#TramDagConfig.compute_levels-372"><span class="linenos">372</span></a>        <span class="c1"># update nodes dict with levels</span>
</span><span id="TramDagConfig.compute_levels-373"><a href="#TramDagConfig.compute_levels-373"><span class="linenos">373</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">levels</span> <span class="ow">in</span> <span class="n">levels_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="TramDagConfig.compute_levels-374"><a href="#TramDagConfig.compute_levels-374"><span class="linenos">374</span></a>            <span class="k">if</span> <span class="n">var</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="p">[</span><span class="s1">&#39;nodes&#39;</span><span class="p">]:</span>
</span><span id="TramDagConfig.compute_levels-375"><a href="#TramDagConfig.compute_levels-375"><span class="linenos">375</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="p">[</span><span class="s1">&#39;nodes&#39;</span><span class="p">][</span><span class="n">var</span><span class="p">][</span><span class="s1">&#39;levels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">levels</span>
</span><span id="TramDagConfig.compute_levels-376"><a href="#TramDagConfig.compute_levels-376"><span class="linenos">376</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="TramDagConfig.compute_levels-377"><a href="#TramDagConfig.compute_levels-377"><span class="linenos">377</span></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[WARNING] Variable &#39;</span><span class="si">{</span><span class="n">var</span><span class="si">}</span><span class="s2">&#39; not found in nodes dict. Cannot add levels.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.compute_levels-378"><a href="#TramDagConfig.compute_levels-378"><span class="linenos">378</span></a>        
</span><span id="TramDagConfig.compute_levels-379"><a href="#TramDagConfig.compute_levels-379"><span class="linenos">379</span></a>        <span class="k">if</span> <span class="n">write</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TramDagConfig.compute_levels-380"><a href="#TramDagConfig.compute_levels-380"><span class="linenos">380</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="TramDagConfig.compute_levels-381"><a href="#TramDagConfig.compute_levels-381"><span class="linenos">381</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="TramDagConfig.compute_levels-382"><a href="#TramDagConfig.compute_levels-382"><span class="linenos">382</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
</span><span id="TramDagConfig.compute_levels-383"><a href="#TramDagConfig.compute_levels-383"><span class="linenos">383</span></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[INFO] Configuration with updated levels saved to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="TramDagConfig.compute_levels-384"><a href="#TramDagConfig.compute_levels-384"><span class="linenos">384</span></a>            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="TramDagConfig.compute_levels-385"><a href="#TramDagConfig.compute_levels-385"><span class="linenos">385</span></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[ERROR] Failed to save configuration: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Infer and update ordinal/categorical levels from data.</p>

<p>For each variable in the configuration's <code>data_type</code> section, this
method uses the provided DataFrame to construct a levels dictionary
and injects the corresponding "levels" entry into <code>conf_dict["nodes"]</code>.</p>

<h2 id="parameters">Parameters</h2>

<p>df : pandas.DataFrame
    DataFrame used to infer levels for configured variables.
write : bool, optional
    If True and <code><a href="#TramDagConfig.CONF_DICT_PATH">CONF_DICT_PATH</a></code> is set, the updated configuration is
    written back to disk. Default is True.</p>

<h2 id="returns">Returns</h2>

<p>None</p>

<h2 id="raises">Raises</h2>

<p>Exception
    If saving the configuration fails when <code>write=True</code>.</p>

<h2 id="notes">Notes</h2>

<ul>
<li>Variables present in <code>levels_dict</code> but not in <code>conf_dict["nodes"]</code>
trigger a warning and are skipped.</li>
<li>If <code>self.verbose</code> or <code>self.debug</code> is True, a success message is printed
when the configuration is saved.</li>
</ul>
</div>


                            </div>
                            <div id="TramDagConfig.plot_dag" class="classattr">
                                        <input id="TramDagConfig.plot_dag-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">plot_dag</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">seed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">42</span>, </span><span class="param"><span class="n">causal_order</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="TramDagConfig.plot_dag-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TramDagConfig.plot_dag"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TramDagConfig.plot_dag-387"><a href="#TramDagConfig.plot_dag-387"><span class="linenos">387</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">plot_dag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">42</span><span class="p">,</span> <span class="n">causal_order</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="TramDagConfig.plot_dag-388"><a href="#TramDagConfig.plot_dag-388"><span class="linenos">388</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig.plot_dag-389"><a href="#TramDagConfig.plot_dag-389"><span class="linenos">389</span></a><span class="sd">        Visualize the DAG defined by the configuration.</span>
</span><span id="TramDagConfig.plot_dag-390"><a href="#TramDagConfig.plot_dag-390"><span class="linenos">390</span></a>
</span><span id="TramDagConfig.plot_dag-391"><a href="#TramDagConfig.plot_dag-391"><span class="linenos">391</span></a><span class="sd">        Nodes are categorized and colored as:</span>
</span><span id="TramDagConfig.plot_dag-392"><a href="#TramDagConfig.plot_dag-392"><span class="linenos">392</span></a><span class="sd">        - Source nodes (no incoming edges): green.</span>
</span><span id="TramDagConfig.plot_dag-393"><a href="#TramDagConfig.plot_dag-393"><span class="linenos">393</span></a><span class="sd">        - Sink nodes (no outgoing edges): red.</span>
</span><span id="TramDagConfig.plot_dag-394"><a href="#TramDagConfig.plot_dag-394"><span class="linenos">394</span></a><span class="sd">        - Intermediate nodes: light blue.</span>
</span><span id="TramDagConfig.plot_dag-395"><a href="#TramDagConfig.plot_dag-395"><span class="linenos">395</span></a>
</span><span id="TramDagConfig.plot_dag-396"><a href="#TramDagConfig.plot_dag-396"><span class="linenos">396</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig.plot_dag-397"><a href="#TramDagConfig.plot_dag-397"><span class="linenos">397</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig.plot_dag-398"><a href="#TramDagConfig.plot_dag-398"><span class="linenos">398</span></a><span class="sd">        seed : int, optional</span>
</span><span id="TramDagConfig.plot_dag-399"><a href="#TramDagConfig.plot_dag-399"><span class="linenos">399</span></a><span class="sd">            Random seed for layout stability in the spring layout fallback.</span>
</span><span id="TramDagConfig.plot_dag-400"><a href="#TramDagConfig.plot_dag-400"><span class="linenos">400</span></a><span class="sd">            Default is 42.</span>
</span><span id="TramDagConfig.plot_dag-401"><a href="#TramDagConfig.plot_dag-401"><span class="linenos">401</span></a><span class="sd">        causal_order : bool, optional</span>
</span><span id="TramDagConfig.plot_dag-402"><a href="#TramDagConfig.plot_dag-402"><span class="linenos">402</span></a><span class="sd">            If True, attempt to use Graphviz &#39;dot&#39; layout via</span>
</span><span id="TramDagConfig.plot_dag-403"><a href="#TramDagConfig.plot_dag-403"><span class="linenos">403</span></a><span class="sd">            `networkx.nx_agraph.graphviz_layout` to preserve causal ordering.</span>
</span><span id="TramDagConfig.plot_dag-404"><a href="#TramDagConfig.plot_dag-404"><span class="linenos">404</span></a><span class="sd">            If False or if Graphviz is unavailable, use `spring_layout`.</span>
</span><span id="TramDagConfig.plot_dag-405"><a href="#TramDagConfig.plot_dag-405"><span class="linenos">405</span></a><span class="sd">            Default is False.</span>
</span><span id="TramDagConfig.plot_dag-406"><a href="#TramDagConfig.plot_dag-406"><span class="linenos">406</span></a>
</span><span id="TramDagConfig.plot_dag-407"><a href="#TramDagConfig.plot_dag-407"><span class="linenos">407</span></a><span class="sd">        Returns</span>
</span><span id="TramDagConfig.plot_dag-408"><a href="#TramDagConfig.plot_dag-408"><span class="linenos">408</span></a><span class="sd">        -------</span>
</span><span id="TramDagConfig.plot_dag-409"><a href="#TramDagConfig.plot_dag-409"><span class="linenos">409</span></a><span class="sd">        None</span>
</span><span id="TramDagConfig.plot_dag-410"><a href="#TramDagConfig.plot_dag-410"><span class="linenos">410</span></a>
</span><span id="TramDagConfig.plot_dag-411"><a href="#TramDagConfig.plot_dag-411"><span class="linenos">411</span></a><span class="sd">        Raises</span>
</span><span id="TramDagConfig.plot_dag-412"><a href="#TramDagConfig.plot_dag-412"><span class="linenos">412</span></a><span class="sd">        ------</span>
</span><span id="TramDagConfig.plot_dag-413"><a href="#TramDagConfig.plot_dag-413"><span class="linenos">413</span></a><span class="sd">        ValueError</span>
</span><span id="TramDagConfig.plot_dag-414"><a href="#TramDagConfig.plot_dag-414"><span class="linenos">414</span></a><span class="sd">            If `adj_matrix` or `data_type` is missing or inconsistent with each other,</span>
</span><span id="TramDagConfig.plot_dag-415"><a href="#TramDagConfig.plot_dag-415"><span class="linenos">415</span></a><span class="sd">            or if the adjacency matrix fails validation.</span>
</span><span id="TramDagConfig.plot_dag-416"><a href="#TramDagConfig.plot_dag-416"><span class="linenos">416</span></a>
</span><span id="TramDagConfig.plot_dag-417"><a href="#TramDagConfig.plot_dag-417"><span class="linenos">417</span></a><span class="sd">        Notes</span>
</span><span id="TramDagConfig.plot_dag-418"><a href="#TramDagConfig.plot_dag-418"><span class="linenos">418</span></a><span class="sd">        -----</span>
</span><span id="TramDagConfig.plot_dag-419"><a href="#TramDagConfig.plot_dag-419"><span class="linenos">419</span></a><span class="sd">        Edge labels are colored by prefix:</span>
</span><span id="TramDagConfig.plot_dag-420"><a href="#TramDagConfig.plot_dag-420"><span class="linenos">420</span></a><span class="sd">        - &quot;ci&quot;: blue</span>
</span><span id="TramDagConfig.plot_dag-421"><a href="#TramDagConfig.plot_dag-421"><span class="linenos">421</span></a><span class="sd">        - &quot;ls&quot;: red</span>
</span><span id="TramDagConfig.plot_dag-422"><a href="#TramDagConfig.plot_dag-422"><span class="linenos">422</span></a><span class="sd">        - &quot;cs&quot;: green</span>
</span><span id="TramDagConfig.plot_dag-423"><a href="#TramDagConfig.plot_dag-423"><span class="linenos">423</span></a><span class="sd">        - other: black</span>
</span><span id="TramDagConfig.plot_dag-424"><a href="#TramDagConfig.plot_dag-424"><span class="linenos">424</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig.plot_dag-425"><a href="#TramDagConfig.plot_dag-425"><span class="linenos">425</span></a>        <span class="n">adj_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;adj_matrix&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.plot_dag-426"><a href="#TramDagConfig.plot_dag-426"><span class="linenos">426</span></a>        <span class="n">data_type</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data_type&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.plot_dag-427"><a href="#TramDagConfig.plot_dag-427"><span class="linenos">427</span></a>
</span><span id="TramDagConfig.plot_dag-428"><a href="#TramDagConfig.plot_dag-428"><span class="linenos">428</span></a>        <span class="k">if</span> <span class="n">adj_matrix</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">data_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TramDagConfig.plot_dag-429"><a href="#TramDagConfig.plot_dag-429"><span class="linenos">429</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Configuration must include &#39;adj_matrix&#39; and &#39;data_type&#39;.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.plot_dag-430"><a href="#TramDagConfig.plot_dag-430"><span class="linenos">430</span></a>
</span><span id="TramDagConfig.plot_dag-431"><a href="#TramDagConfig.plot_dag-431"><span class="linenos">431</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">adj_matrix</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="TramDagConfig.plot_dag-432"><a href="#TramDagConfig.plot_dag-432"><span class="linenos">432</span></a>            <span class="n">adj_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">adj_matrix</span><span class="p">)</span>
</span><span id="TramDagConfig.plot_dag-433"><a href="#TramDagConfig.plot_dag-433"><span class="linenos">433</span></a>
</span><span id="TramDagConfig.plot_dag-434"><a href="#TramDagConfig.plot_dag-434"><span class="linenos">434</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">validate_adj_matrix</span><span class="p">(</span><span class="n">adj_matrix</span><span class="p">):</span>
</span><span id="TramDagConfig.plot_dag-435"><a href="#TramDagConfig.plot_dag-435"><span class="linenos">435</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid adjacency matrix.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.plot_dag-436"><a href="#TramDagConfig.plot_dag-436"><span class="linenos">436</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_type</span><span class="p">)</span> <span class="o">!=</span> <span class="n">adj_matrix</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
</span><span id="TramDagConfig.plot_dag-437"><a href="#TramDagConfig.plot_dag-437"><span class="linenos">437</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;data_type must match adjacency matrix size.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.plot_dag-438"><a href="#TramDagConfig.plot_dag-438"><span class="linenos">438</span></a>
</span><span id="TramDagConfig.plot_dag-439"><a href="#TramDagConfig.plot_dag-439"><span class="linenos">439</span></a>        <span class="n">node_labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">data_type</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="TramDagConfig.plot_dag-440"><a href="#TramDagConfig.plot_dag-440"><span class="linenos">440</span></a>        <span class="n">G</span><span class="p">,</span> <span class="n">edge_labels</span> <span class="o">=</span> <span class="n">create_nx_graph</span><span class="p">(</span><span class="n">adj_matrix</span><span class="p">,</span> <span class="n">node_labels</span><span class="p">)</span>
</span><span id="TramDagConfig.plot_dag-441"><a href="#TramDagConfig.plot_dag-441"><span class="linenos">441</span></a>
</span><span id="TramDagConfig.plot_dag-442"><a href="#TramDagConfig.plot_dag-442"><span class="linenos">442</span></a>        <span class="n">sources</span>       <span class="o">=</span> <span class="p">{</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span> <span class="k">if</span> <span class="n">G</span><span class="o">.</span><span class="n">in_degree</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">}</span>
</span><span id="TramDagConfig.plot_dag-443"><a href="#TramDagConfig.plot_dag-443"><span class="linenos">443</span></a>        <span class="n">sinks</span>         <span class="o">=</span> <span class="p">{</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span> <span class="k">if</span> <span class="n">G</span><span class="o">.</span><span class="n">out_degree</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">}</span>
</span><span id="TramDagConfig.plot_dag-444"><a href="#TramDagConfig.plot_dag-444"><span class="linenos">444</span></a>        <span class="n">intermediates</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span> <span class="o">-</span> <span class="n">sources</span> <span class="o">-</span> <span class="n">sinks</span>
</span><span id="TramDagConfig.plot_dag-445"><a href="#TramDagConfig.plot_dag-445"><span class="linenos">445</span></a>
</span><span id="TramDagConfig.plot_dag-446"><a href="#TramDagConfig.plot_dag-446"><span class="linenos">446</span></a>        <span class="n">node_colors</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="TramDagConfig.plot_dag-447"><a href="#TramDagConfig.plot_dag-447"><span class="linenos">447</span></a>            <span class="s2">&quot;green&quot;</span> <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">sources</span>
</span><span id="TramDagConfig.plot_dag-448"><a href="#TramDagConfig.plot_dag-448"><span class="linenos">448</span></a>            <span class="k">else</span> <span class="s2">&quot;red&quot;</span> <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">sinks</span>
</span><span id="TramDagConfig.plot_dag-449"><a href="#TramDagConfig.plot_dag-449"><span class="linenos">449</span></a>            <span class="k">else</span> <span class="s2">&quot;lightblue&quot;</span>
</span><span id="TramDagConfig.plot_dag-450"><a href="#TramDagConfig.plot_dag-450"><span class="linenos">450</span></a>            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span>
</span><span id="TramDagConfig.plot_dag-451"><a href="#TramDagConfig.plot_dag-451"><span class="linenos">451</span></a>        <span class="p">]</span>
</span><span id="TramDagConfig.plot_dag-452"><a href="#TramDagConfig.plot_dag-452"><span class="linenos">452</span></a>
</span><span id="TramDagConfig.plot_dag-453"><a href="#TramDagConfig.plot_dag-453"><span class="linenos">453</span></a>        <span class="k">if</span> <span class="n">causal_order</span><span class="p">:</span>
</span><span id="TramDagConfig.plot_dag-454"><a href="#TramDagConfig.plot_dag-454"><span class="linenos">454</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="TramDagConfig.plot_dag-455"><a href="#TramDagConfig.plot_dag-455"><span class="linenos">455</span></a>                <span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">nx_agraph</span><span class="o">.</span><span class="n">graphviz_layout</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">prog</span><span class="o">=</span><span class="s2">&quot;dot&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.plot_dag-456"><a href="#TramDagConfig.plot_dag-456"><span class="linenos">456</span></a>            <span class="k">except</span> <span class="p">(</span><span class="ne">ImportError</span><span class="p">,</span> <span class="n">nx</span><span class="o">.</span><span class="n">NetworkXException</span><span class="p">):</span>
</span><span id="TramDagConfig.plot_dag-457"><a href="#TramDagConfig.plot_dag-457"><span class="linenos">457</span></a>                <span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">spring_layout</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</span><span id="TramDagConfig.plot_dag-458"><a href="#TramDagConfig.plot_dag-458"><span class="linenos">458</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="TramDagConfig.plot_dag-459"><a href="#TramDagConfig.plot_dag-459"><span class="linenos">459</span></a>            <span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">spring_layout</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</span><span id="TramDagConfig.plot_dag-460"><a href="#TramDagConfig.plot_dag-460"><span class="linenos">460</span></a>
</span><span id="TramDagConfig.plot_dag-461"><a href="#TramDagConfig.plot_dag-461"><span class="linenos">461</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="TramDagConfig.plot_dag-462"><a href="#TramDagConfig.plot_dag-462"><span class="linenos">462</span></a>        <span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span>
</span><span id="TramDagConfig.plot_dag-463"><a href="#TramDagConfig.plot_dag-463"><span class="linenos">463</span></a>            <span class="n">G</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span>
</span><span id="TramDagConfig.plot_dag-464"><a href="#TramDagConfig.plot_dag-464"><span class="linenos">464</span></a>            <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="TramDagConfig.plot_dag-465"><a href="#TramDagConfig.plot_dag-465"><span class="linenos">465</span></a>            <span class="n">node_color</span><span class="o">=</span><span class="n">node_colors</span><span class="p">,</span>
</span><span id="TramDagConfig.plot_dag-466"><a href="#TramDagConfig.plot_dag-466"><span class="linenos">466</span></a>            <span class="n">edge_color</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span>
</span><span id="TramDagConfig.plot_dag-467"><a href="#TramDagConfig.plot_dag-467"><span class="linenos">467</span></a>            <span class="n">node_size</span><span class="o">=</span><span class="mi">2500</span><span class="p">,</span>
</span><span id="TramDagConfig.plot_dag-468"><a href="#TramDagConfig.plot_dag-468"><span class="linenos">468</span></a>            <span class="n">arrowsize</span><span class="o">=</span><span class="mi">20</span>
</span><span id="TramDagConfig.plot_dag-469"><a href="#TramDagConfig.plot_dag-469"><span class="linenos">469</span></a>        <span class="p">)</span>
</span><span id="TramDagConfig.plot_dag-470"><a href="#TramDagConfig.plot_dag-470"><span class="linenos">470</span></a>
</span><span id="TramDagConfig.plot_dag-471"><a href="#TramDagConfig.plot_dag-471"><span class="linenos">471</span></a>        <span class="k">for</span> <span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">),</span> <span class="n">lbl</span> <span class="ow">in</span> <span class="n">edge_labels</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="TramDagConfig.plot_dag-472"><a href="#TramDagConfig.plot_dag-472"><span class="linenos">472</span></a>            <span class="n">color</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="TramDagConfig.plot_dag-473"><a href="#TramDagConfig.plot_dag-473"><span class="linenos">473</span></a>                <span class="s2">&quot;blue&quot;</span>  <span class="k">if</span> <span class="n">lbl</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;ci&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.plot_dag-474"><a href="#TramDagConfig.plot_dag-474"><span class="linenos">474</span></a>                <span class="k">else</span> <span class="s2">&quot;red&quot;</span>   <span class="k">if</span> <span class="n">lbl</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;ls&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.plot_dag-475"><a href="#TramDagConfig.plot_dag-475"><span class="linenos">475</span></a>                <span class="k">else</span> <span class="s2">&quot;green&quot;</span> <span class="k">if</span> <span class="n">lbl</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;cs&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.plot_dag-476"><a href="#TramDagConfig.plot_dag-476"><span class="linenos">476</span></a>                <span class="k">else</span> <span class="s2">&quot;black&quot;</span>
</span><span id="TramDagConfig.plot_dag-477"><a href="#TramDagConfig.plot_dag-477"><span class="linenos">477</span></a>            <span class="p">)</span>
</span><span id="TramDagConfig.plot_dag-478"><a href="#TramDagConfig.plot_dag-478"><span class="linenos">478</span></a>            <span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_edge_labels</span><span class="p">(</span>
</span><span id="TramDagConfig.plot_dag-479"><a href="#TramDagConfig.plot_dag-479"><span class="linenos">479</span></a>                <span class="n">G</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span>
</span><span id="TramDagConfig.plot_dag-480"><a href="#TramDagConfig.plot_dag-480"><span class="linenos">480</span></a>                <span class="n">edge_labels</span><span class="o">=</span><span class="p">{(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span> <span class="n">lbl</span><span class="p">},</span>
</span><span id="TramDagConfig.plot_dag-481"><a href="#TramDagConfig.plot_dag-481"><span class="linenos">481</span></a>                <span class="n">font_color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
</span><span id="TramDagConfig.plot_dag-482"><a href="#TramDagConfig.plot_dag-482"><span class="linenos">482</span></a>                <span class="n">font_size</span><span class="o">=</span><span class="mi">12</span>
</span><span id="TramDagConfig.plot_dag-483"><a href="#TramDagConfig.plot_dag-483"><span class="linenos">483</span></a>            <span class="p">)</span>
</span><span id="TramDagConfig.plot_dag-484"><a href="#TramDagConfig.plot_dag-484"><span class="linenos">484</span></a>
</span><span id="TramDagConfig.plot_dag-485"><a href="#TramDagConfig.plot_dag-485"><span class="linenos">485</span></a>        <span class="n">legend_items</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="TramDagConfig.plot_dag-486"><a href="#TramDagConfig.plot_dag-486"><span class="linenos">486</span></a>            <span class="n">Patch</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span>     <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Source&quot;</span><span class="p">),</span>
</span><span id="TramDagConfig.plot_dag-487"><a href="#TramDagConfig.plot_dag-487"><span class="linenos">487</span></a>            <span class="n">Patch</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>       <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Sink&quot;</span><span class="p">),</span>
</span><span id="TramDagConfig.plot_dag-488"><a href="#TramDagConfig.plot_dag-488"><span class="linenos">488</span></a>            <span class="n">Patch</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;lightblue&quot;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Intermediate&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.plot_dag-489"><a href="#TramDagConfig.plot_dag-489"><span class="linenos">489</span></a>        <span class="p">]</span>
</span><span id="TramDagConfig.plot_dag-490"><a href="#TramDagConfig.plot_dag-490"><span class="linenos">490</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="n">legend_items</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper right&quot;</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="TramDagConfig.plot_dag-491"><a href="#TramDagConfig.plot_dag-491"><span class="linenos">491</span></a>
</span><span id="TramDagConfig.plot_dag-492"><a href="#TramDagConfig.plot_dag-492"><span class="linenos">492</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;TRAM DAG&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.plot_dag-493"><a href="#TramDagConfig.plot_dag-493"><span class="linenos">493</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.plot_dag-494"><a href="#TramDagConfig.plot_dag-494"><span class="linenos">494</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="TramDagConfig.plot_dag-495"><a href="#TramDagConfig.plot_dag-495"><span class="linenos">495</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Visualize the DAG defined by the configuration.</p>

<p>Nodes are categorized and colored as:</p>

<ul>
<li>Source nodes (no incoming edges): green.</li>
<li>Sink nodes (no outgoing edges): red.</li>
<li>Intermediate nodes: light blue.</li>
</ul>

<h2 id="parameters">Parameters</h2>

<p>seed : int, optional
    Random seed for layout stability in the spring layout fallback.
    Default is 42.
causal_order : bool, optional
    If True, attempt to use Graphviz 'dot' layout via
    <code>networkx.nx_agraph.graphviz_layout</code> to preserve causal ordering.
    If False or if Graphviz is unavailable, use <code>spring_layout</code>.
    Default is False.</p>

<h2 id="returns">Returns</h2>

<p>None</p>

<h2 id="raises">Raises</h2>

<p>ValueError
    If <code>adj_matrix</code> or <code>data_type</code> is missing or inconsistent with each other,
    or if the adjacency matrix fails validation.</p>

<h2 id="notes">Notes</h2>

<p>Edge labels are colored by prefix:</p>

<ul>
<li>"ci": blue</li>
<li>"ls": red</li>
<li>"cs": green</li>
<li>other: black</li>
</ul>
</div>


                            </div>
                            <div id="TramDagConfig.setup_configuration" class="classattr">
                                        <input id="TramDagConfig.setup_configuration-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setup_configuration</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">experiment_name</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">EXPERIMENT_DIR</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">debug</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">_verify</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="TramDagConfig.setup_configuration-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TramDagConfig.setup_configuration"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TramDagConfig.setup_configuration-498"><a href="#TramDagConfig.setup_configuration-498"><span class="linenos">498</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setup_configuration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experiment_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">EXPERIMENT_DIR</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">_verify</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="TramDagConfig.setup_configuration-499"><a href="#TramDagConfig.setup_configuration-499"><span class="linenos">499</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig.setup_configuration-500"><a href="#TramDagConfig.setup_configuration-500"><span class="linenos">500</span></a><span class="sd">        Create or reuse a configuration for an experiment.</span>
</span><span id="TramDagConfig.setup_configuration-501"><a href="#TramDagConfig.setup_configuration-501"><span class="linenos">501</span></a>
</span><span id="TramDagConfig.setup_configuration-502"><a href="#TramDagConfig.setup_configuration-502"><span class="linenos">502</span></a><span class="sd">        This method behaves differently depending on how it is called:</span>
</span><span id="TramDagConfig.setup_configuration-503"><a href="#TramDagConfig.setup_configuration-503"><span class="linenos">503</span></a>
</span><span id="TramDagConfig.setup_configuration-504"><a href="#TramDagConfig.setup_configuration-504"><span class="linenos">504</span></a><span class="sd">        1. Class call (e.g. `TramDagConfig.setup_configuration(...)`):</span>
</span><span id="TramDagConfig.setup_configuration-505"><a href="#TramDagConfig.setup_configuration-505"><span class="linenos">505</span></a><span class="sd">        - Creates or loads a configuration at the resolved path.</span>
</span><span id="TramDagConfig.setup_configuration-506"><a href="#TramDagConfig.setup_configuration-506"><span class="linenos">506</span></a><span class="sd">        - Returns a new `TramDagConfig` instance.</span>
</span><span id="TramDagConfig.setup_configuration-507"><a href="#TramDagConfig.setup_configuration-507"><span class="linenos">507</span></a>
</span><span id="TramDagConfig.setup_configuration-508"><a href="#TramDagConfig.setup_configuration-508"><span class="linenos">508</span></a><span class="sd">        2. Instance call (e.g. `cfg.setup_configuration(...)`):</span>
</span><span id="TramDagConfig.setup_configuration-509"><a href="#TramDagConfig.setup_configuration-509"><span class="linenos">509</span></a><span class="sd">        - Updates `self.conf_dict` and `self.CONF_DICT_PATH` in place.</span>
</span><span id="TramDagConfig.setup_configuration-510"><a href="#TramDagConfig.setup_configuration-510"><span class="linenos">510</span></a><span class="sd">        - Optionally verifies completeness.</span>
</span><span id="TramDagConfig.setup_configuration-511"><a href="#TramDagConfig.setup_configuration-511"><span class="linenos">511</span></a><span class="sd">        - Returns None.</span>
</span><span id="TramDagConfig.setup_configuration-512"><a href="#TramDagConfig.setup_configuration-512"><span class="linenos">512</span></a>
</span><span id="TramDagConfig.setup_configuration-513"><a href="#TramDagConfig.setup_configuration-513"><span class="linenos">513</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig.setup_configuration-514"><a href="#TramDagConfig.setup_configuration-514"><span class="linenos">514</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig.setup_configuration-515"><a href="#TramDagConfig.setup_configuration-515"><span class="linenos">515</span></a><span class="sd">        experiment_name : str or None, optional</span>
</span><span id="TramDagConfig.setup_configuration-516"><a href="#TramDagConfig.setup_configuration-516"><span class="linenos">516</span></a><span class="sd">            Name of the experiment. If None, defaults to &quot;experiment_1&quot;.</span>
</span><span id="TramDagConfig.setup_configuration-517"><a href="#TramDagConfig.setup_configuration-517"><span class="linenos">517</span></a><span class="sd">        EXPERIMENT_DIR : str or None, optional</span>
</span><span id="TramDagConfig.setup_configuration-518"><a href="#TramDagConfig.setup_configuration-518"><span class="linenos">518</span></a><span class="sd">            Directory for the experiment. If None, defaults to</span>
</span><span id="TramDagConfig.setup_configuration-519"><a href="#TramDagConfig.setup_configuration-519"><span class="linenos">519</span></a><span class="sd">            `&lt;cwd&gt;/&lt;experiment_name&gt;`.</span>
</span><span id="TramDagConfig.setup_configuration-520"><a href="#TramDagConfig.setup_configuration-520"><span class="linenos">520</span></a><span class="sd">        debug : bool, optional</span>
</span><span id="TramDagConfig.setup_configuration-521"><a href="#TramDagConfig.setup_configuration-521"><span class="linenos">521</span></a><span class="sd">            If True, initialize / update with `debug=True`. Default is False.</span>
</span><span id="TramDagConfig.setup_configuration-522"><a href="#TramDagConfig.setup_configuration-522"><span class="linenos">522</span></a><span class="sd">        _verify : bool, optional</span>
</span><span id="TramDagConfig.setup_configuration-523"><a href="#TramDagConfig.setup_configuration-523"><span class="linenos">523</span></a><span class="sd">            If True, call `_verify_completeness()` after loading. Default is False.</span>
</span><span id="TramDagConfig.setup_configuration-524"><a href="#TramDagConfig.setup_configuration-524"><span class="linenos">524</span></a>
</span><span id="TramDagConfig.setup_configuration-525"><a href="#TramDagConfig.setup_configuration-525"><span class="linenos">525</span></a><span class="sd">        Returns</span>
</span><span id="TramDagConfig.setup_configuration-526"><a href="#TramDagConfig.setup_configuration-526"><span class="linenos">526</span></a><span class="sd">        -------</span>
</span><span id="TramDagConfig.setup_configuration-527"><a href="#TramDagConfig.setup_configuration-527"><span class="linenos">527</span></a><span class="sd">        TramDagConfig or None</span>
</span><span id="TramDagConfig.setup_configuration-528"><a href="#TramDagConfig.setup_configuration-528"><span class="linenos">528</span></a><span class="sd">            - A new instance when called on the class.</span>
</span><span id="TramDagConfig.setup_configuration-529"><a href="#TramDagConfig.setup_configuration-529"><span class="linenos">529</span></a><span class="sd">            - None when called on an existing instance.</span>
</span><span id="TramDagConfig.setup_configuration-530"><a href="#TramDagConfig.setup_configuration-530"><span class="linenos">530</span></a>
</span><span id="TramDagConfig.setup_configuration-531"><a href="#TramDagConfig.setup_configuration-531"><span class="linenos">531</span></a><span class="sd">        Notes</span>
</span><span id="TramDagConfig.setup_configuration-532"><a href="#TramDagConfig.setup_configuration-532"><span class="linenos">532</span></a><span class="sd">        -----</span>
</span><span id="TramDagConfig.setup_configuration-533"><a href="#TramDagConfig.setup_configuration-533"><span class="linenos">533</span></a><span class="sd">        - A configuration file named &quot;configuration.json&quot; is created if it does</span>
</span><span id="TramDagConfig.setup_configuration-534"><a href="#TramDagConfig.setup_configuration-534"><span class="linenos">534</span></a><span class="sd">        not exist yet.</span>
</span><span id="TramDagConfig.setup_configuration-535"><a href="#TramDagConfig.setup_configuration-535"><span class="linenos">535</span></a><span class="sd">        - Underlying creation uses `create_and_write_new_configuration_dict`</span>
</span><span id="TramDagConfig.setup_configuration-536"><a href="#TramDagConfig.setup_configuration-536"><span class="linenos">536</span></a><span class="sd">        and `load_configuration_dict`.</span>
</span><span id="TramDagConfig.setup_configuration-537"><a href="#TramDagConfig.setup_configuration-537"><span class="linenos">537</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig.setup_configuration-538"><a href="#TramDagConfig.setup_configuration-538"><span class="linenos">538</span></a>        <span class="n">is_class_call</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>
</span><span id="TramDagConfig.setup_configuration-539"><a href="#TramDagConfig.setup_configuration-539"><span class="linenos">539</span></a>        <span class="bp">cls</span> <span class="o">=</span> <span class="bp">self</span> <span class="k">if</span> <span class="n">is_class_call</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span>
</span><span id="TramDagConfig.setup_configuration-540"><a href="#TramDagConfig.setup_configuration-540"><span class="linenos">540</span></a>
</span><span id="TramDagConfig.setup_configuration-541"><a href="#TramDagConfig.setup_configuration-541"><span class="linenos">541</span></a>        <span class="k">if</span> <span class="n">experiment_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TramDagConfig.setup_configuration-542"><a href="#TramDagConfig.setup_configuration-542"><span class="linenos">542</span></a>            <span class="n">experiment_name</span> <span class="o">=</span> <span class="s2">&quot;experiment_1&quot;</span>
</span><span id="TramDagConfig.setup_configuration-543"><a href="#TramDagConfig.setup_configuration-543"><span class="linenos">543</span></a>        <span class="k">if</span> <span class="n">EXPERIMENT_DIR</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TramDagConfig.setup_configuration-544"><a href="#TramDagConfig.setup_configuration-544"><span class="linenos">544</span></a>            <span class="n">EXPERIMENT_DIR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="n">experiment_name</span><span class="p">)</span>
</span><span id="TramDagConfig.setup_configuration-545"><a href="#TramDagConfig.setup_configuration-545"><span class="linenos">545</span></a>
</span><span id="TramDagConfig.setup_configuration-546"><a href="#TramDagConfig.setup_configuration-546"><span class="linenos">546</span></a>        <span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">EXPERIMENT_DIR</span><span class="p">,</span> <span class="s2">&quot;configuration.json&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.setup_configuration-547"><a href="#TramDagConfig.setup_configuration-547"><span class="linenos">547</span></a>        <span class="n">DATA_PATH</span> <span class="o">=</span> <span class="n">EXPERIMENT_DIR</span>
</span><span id="TramDagConfig.setup_configuration-548"><a href="#TramDagConfig.setup_configuration-548"><span class="linenos">548</span></a>
</span><span id="TramDagConfig.setup_configuration-549"><a href="#TramDagConfig.setup_configuration-549"><span class="linenos">549</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">EXPERIMENT_DIR</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="TramDagConfig.setup_configuration-550"><a href="#TramDagConfig.setup_configuration-550"><span class="linenos">550</span></a>
</span><span id="TramDagConfig.setup_configuration-551"><a href="#TramDagConfig.setup_configuration-551"><span class="linenos">551</span></a>        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">):</span>
</span><span id="TramDagConfig.setup_configuration-552"><a href="#TramDagConfig.setup_configuration-552"><span class="linenos">552</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuration already exists: </span><span class="si">{</span><span class="n">CONF_DICT_PATH</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.setup_configuration-553"><a href="#TramDagConfig.setup_configuration-553"><span class="linenos">553</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="TramDagConfig.setup_configuration-554"><a href="#TramDagConfig.setup_configuration-554"><span class="linenos">554</span></a>            <span class="n">_</span> <span class="o">=</span> <span class="n">create_and_write_new_configuration_dict</span><span class="p">(</span>
</span><span id="TramDagConfig.setup_configuration-555"><a href="#TramDagConfig.setup_configuration-555"><span class="linenos">555</span></a>                <span class="n">experiment_name</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">,</span> <span class="n">EXPERIMENT_DIR</span><span class="p">,</span> <span class="n">DATA_PATH</span><span class="p">,</span> <span class="kc">None</span>
</span><span id="TramDagConfig.setup_configuration-556"><a href="#TramDagConfig.setup_configuration-556"><span class="linenos">556</span></a>            <span class="p">)</span>
</span><span id="TramDagConfig.setup_configuration-557"><a href="#TramDagConfig.setup_configuration-557"><span class="linenos">557</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Created new configuration file at </span><span class="si">{</span><span class="n">CONF_DICT_PATH</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.setup_configuration-558"><a href="#TramDagConfig.setup_configuration-558"><span class="linenos">558</span></a>
</span><span id="TramDagConfig.setup_configuration-559"><a href="#TramDagConfig.setup_configuration-559"><span class="linenos">559</span></a>        <span class="n">conf</span> <span class="o">=</span> <span class="n">load_configuration_dict</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="TramDagConfig.setup_configuration-560"><a href="#TramDagConfig.setup_configuration-560"><span class="linenos">560</span></a>
</span><span id="TramDagConfig.setup_configuration-561"><a href="#TramDagConfig.setup_configuration-561"><span class="linenos">561</span></a>        <span class="k">if</span> <span class="n">is_class_call</span><span class="p">:</span>
</span><span id="TramDagConfig.setup_configuration-562"><a href="#TramDagConfig.setup_configuration-562"><span class="linenos">562</span></a>            <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">conf</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="o">=</span><span class="n">CONF_DICT_PATH</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">,</span> <span class="n">_verify</span><span class="o">=</span><span class="n">_verify</span><span class="p">)</span>
</span><span id="TramDagConfig.setup_configuration-563"><a href="#TramDagConfig.setup_configuration-563"><span class="linenos">563</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="TramDagConfig.setup_configuration-564"><a href="#TramDagConfig.setup_configuration-564"><span class="linenos">564</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span> <span class="o">=</span> <span class="n">conf</span>
</span><span id="TramDagConfig.setup_configuration-565"><a href="#TramDagConfig.setup_configuration-565"><span class="linenos">565</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="n">CONF_DICT_PATH</span>
</span><span id="TramDagConfig.setup_configuration-566"><a href="#TramDagConfig.setup_configuration-566"><span class="linenos">566</span></a>            <span class="k">if</span> <span class="n">_verify</span><span class="p">:</span>
</span><span id="TramDagConfig.setup_configuration-567"><a href="#TramDagConfig.setup_configuration-567"><span class="linenos">567</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_verify_completeness</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Create or reuse a configuration for an experiment.</p>

<p>This method behaves differently depending on how it is called:</p>

<ol>
<li>Class call (e.g. <code><a href="#TramDagConfig.setup_configuration">TramDagConfig.setup_configuration</a>(...)</code>):</li>
</ol>

<ul>
<li>Creates or loads a configuration at the resolved path.</li>
<li>Returns a new <code><a href="#TramDagConfig">TramDagConfig</a></code> instance.</li>
</ul>

<ol start="2">
<li>Instance call (e.g. <code>cfg.setup_configuration(...)</code>):</li>
</ol>

<ul>
<li>Updates <code>self.conf_dict</code> and <code>self.CONF_DICT_PATH</code> in place.</li>
<li>Optionally verifies completeness.</li>
<li>Returns None.</li>
</ul>

<h2 id="parameters">Parameters</h2>

<p>experiment_name : str or None, optional
    Name of the experiment. If None, defaults to "experiment_1".
EXPERIMENT_DIR : str or None, optional
    Directory for the experiment. If None, defaults to
    <code>&lt;cwd&gt;/&lt;experiment_name&gt;</code>.
debug : bool, optional
    If True, initialize / update with <code>debug=True</code>. Default is False.
_verify : bool, optional
    If True, call <code>_verify_completeness()</code> after loading. Default is False.</p>

<h2 id="returns">Returns</h2>

<p>TramDagConfig or None
    - A new instance when called on the class.
    - None when called on an existing instance.</p>

<h2 id="notes">Notes</h2>

<ul>
<li>A configuration file named "configuration.json" is created if it does
not exist yet.</li>
<li>Underlying creation uses <code>create_and_write_new_configuration_dict</code>
and <code>load_configuration_dict</code>.</li>
</ul>
</div>


                            </div>
                            <div id="TramDagConfig.set_data_type" class="classattr">
                                        <input id="TramDagConfig.set_data_type-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_data_type</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">data_type</span><span class="p">:</span> <span class="nb">dict</span>, </span><span class="param"><span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="TramDagConfig.set_data_type-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TramDagConfig.set_data_type"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TramDagConfig.set_data_type-569"><a href="#TramDagConfig.set_data_type-569"><span class="linenos">569</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_data_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_type</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TramDagConfig.set_data_type-570"><a href="#TramDagConfig.set_data_type-570"><span class="linenos">570</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig.set_data_type-571"><a href="#TramDagConfig.set_data_type-571"><span class="linenos">571</span></a><span class="sd">        Update or write the `data_type` section of a configuration file.</span>
</span><span id="TramDagConfig.set_data_type-572"><a href="#TramDagConfig.set_data_type-572"><span class="linenos">572</span></a>
</span><span id="TramDagConfig.set_data_type-573"><a href="#TramDagConfig.set_data_type-573"><span class="linenos">573</span></a><span class="sd">        Supports both class-level and instance-level usage:</span>
</span><span id="TramDagConfig.set_data_type-574"><a href="#TramDagConfig.set_data_type-574"><span class="linenos">574</span></a>
</span><span id="TramDagConfig.set_data_type-575"><a href="#TramDagConfig.set_data_type-575"><span class="linenos">575</span></a><span class="sd">        - Class call:</span>
</span><span id="TramDagConfig.set_data_type-576"><a href="#TramDagConfig.set_data_type-576"><span class="linenos">576</span></a><span class="sd">        - Requires `CONF_DICT_PATH` argument.</span>
</span><span id="TramDagConfig.set_data_type-577"><a href="#TramDagConfig.set_data_type-577"><span class="linenos">577</span></a><span class="sd">        - Reads the file if it exists, or starts from an empty dict.</span>
</span><span id="TramDagConfig.set_data_type-578"><a href="#TramDagConfig.set_data_type-578"><span class="linenos">578</span></a><span class="sd">        - Writes updated configuration to `CONF_DICT_PATH`.</span>
</span><span id="TramDagConfig.set_data_type-579"><a href="#TramDagConfig.set_data_type-579"><span class="linenos">579</span></a>
</span><span id="TramDagConfig.set_data_type-580"><a href="#TramDagConfig.set_data_type-580"><span class="linenos">580</span></a><span class="sd">        - Instance call:</span>
</span><span id="TramDagConfig.set_data_type-581"><a href="#TramDagConfig.set_data_type-581"><span class="linenos">581</span></a><span class="sd">        - Uses `self.CONF_DICT_PATH` if available, otherwise defaults to</span>
</span><span id="TramDagConfig.set_data_type-582"><a href="#TramDagConfig.set_data_type-582"><span class="linenos">582</span></a><span class="sd">            `&lt;cwd&gt;/configuration.json` if no path is provided.</span>
</span><span id="TramDagConfig.set_data_type-583"><a href="#TramDagConfig.set_data_type-583"><span class="linenos">583</span></a><span class="sd">        - Updates `self.conf_dict` and `self.CONF_DICT_PATH` after writing.</span>
</span><span id="TramDagConfig.set_data_type-584"><a href="#TramDagConfig.set_data_type-584"><span class="linenos">584</span></a>
</span><span id="TramDagConfig.set_data_type-585"><a href="#TramDagConfig.set_data_type-585"><span class="linenos">585</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig.set_data_type-586"><a href="#TramDagConfig.set_data_type-586"><span class="linenos">586</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig.set_data_type-587"><a href="#TramDagConfig.set_data_type-587"><span class="linenos">587</span></a><span class="sd">        data_type : dict</span>
</span><span id="TramDagConfig.set_data_type-588"><a href="#TramDagConfig.set_data_type-588"><span class="linenos">588</span></a><span class="sd">            Mapping `{variable_name: type_spec}`, where `type_spec` encodes</span>
</span><span id="TramDagConfig.set_data_type-589"><a href="#TramDagConfig.set_data_type-589"><span class="linenos">589</span></a><span class="sd">            modeling types (e.g. continuous, ordinal, etc.).</span>
</span><span id="TramDagConfig.set_data_type-590"><a href="#TramDagConfig.set_data_type-590"><span class="linenos">590</span></a><span class="sd">        CONF_DICT_PATH : str or None, optional</span>
</span><span id="TramDagConfig.set_data_type-591"><a href="#TramDagConfig.set_data_type-591"><span class="linenos">591</span></a><span class="sd">            Path to the configuration file. Must be provided for class calls.</span>
</span><span id="TramDagConfig.set_data_type-592"><a href="#TramDagConfig.set_data_type-592"><span class="linenos">592</span></a><span class="sd">            For instance calls, defaults as described above.</span>
</span><span id="TramDagConfig.set_data_type-593"><a href="#TramDagConfig.set_data_type-593"><span class="linenos">593</span></a>
</span><span id="TramDagConfig.set_data_type-594"><a href="#TramDagConfig.set_data_type-594"><span class="linenos">594</span></a><span class="sd">        Returns</span>
</span><span id="TramDagConfig.set_data_type-595"><a href="#TramDagConfig.set_data_type-595"><span class="linenos">595</span></a><span class="sd">        -------</span>
</span><span id="TramDagConfig.set_data_type-596"><a href="#TramDagConfig.set_data_type-596"><span class="linenos">596</span></a><span class="sd">        None</span>
</span><span id="TramDagConfig.set_data_type-597"><a href="#TramDagConfig.set_data_type-597"><span class="linenos">597</span></a>
</span><span id="TramDagConfig.set_data_type-598"><a href="#TramDagConfig.set_data_type-598"><span class="linenos">598</span></a><span class="sd">        Raises</span>
</span><span id="TramDagConfig.set_data_type-599"><a href="#TramDagConfig.set_data_type-599"><span class="linenos">599</span></a><span class="sd">        ------</span>
</span><span id="TramDagConfig.set_data_type-600"><a href="#TramDagConfig.set_data_type-600"><span class="linenos">600</span></a><span class="sd">        ValueError</span>
</span><span id="TramDagConfig.set_data_type-601"><a href="#TramDagConfig.set_data_type-601"><span class="linenos">601</span></a><span class="sd">            If `CONF_DICT_PATH` is missing when called on the class, or if</span>
</span><span id="TramDagConfig.set_data_type-602"><a href="#TramDagConfig.set_data_type-602"><span class="linenos">602</span></a><span class="sd">            validation of data types fails.</span>
</span><span id="TramDagConfig.set_data_type-603"><a href="#TramDagConfig.set_data_type-603"><span class="linenos">603</span></a>
</span><span id="TramDagConfig.set_data_type-604"><a href="#TramDagConfig.set_data_type-604"><span class="linenos">604</span></a><span class="sd">        Notes</span>
</span><span id="TramDagConfig.set_data_type-605"><a href="#TramDagConfig.set_data_type-605"><span class="linenos">605</span></a><span class="sd">        -----</span>
</span><span id="TramDagConfig.set_data_type-606"><a href="#TramDagConfig.set_data_type-606"><span class="linenos">606</span></a><span class="sd">        - Variable names are validated via `validate_variable_names`.</span>
</span><span id="TramDagConfig.set_data_type-607"><a href="#TramDagConfig.set_data_type-607"><span class="linenos">607</span></a><span class="sd">        - Data type values are validated via `validate_data_types`.</span>
</span><span id="TramDagConfig.set_data_type-608"><a href="#TramDagConfig.set_data_type-608"><span class="linenos">608</span></a><span class="sd">        - A textual summary of modeling settings is printed via</span>
</span><span id="TramDagConfig.set_data_type-609"><a href="#TramDagConfig.set_data_type-609"><span class="linenos">609</span></a><span class="sd">        `print_data_type_modeling_setting`, if possible.</span>
</span><span id="TramDagConfig.set_data_type-610"><a href="#TramDagConfig.set_data_type-610"><span class="linenos">610</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig.set_data_type-611"><a href="#TramDagConfig.set_data_type-611"><span class="linenos">611</span></a>        <span class="n">is_class_call</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>
</span><span id="TramDagConfig.set_data_type-612"><a href="#TramDagConfig.set_data_type-612"><span class="linenos">612</span></a>        <span class="bp">cls</span> <span class="o">=</span> <span class="bp">self</span> <span class="k">if</span> <span class="n">is_class_call</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span>
</span><span id="TramDagConfig.set_data_type-613"><a href="#TramDagConfig.set_data_type-613"><span class="linenos">613</span></a>
</span><span id="TramDagConfig.set_data_type-614"><a href="#TramDagConfig.set_data_type-614"><span class="linenos">614</span></a>        <span class="c1"># resolve path</span>
</span><span id="TramDagConfig.set_data_type-615"><a href="#TramDagConfig.set_data_type-615"><span class="linenos">615</span></a>        <span class="k">if</span> <span class="n">CONF_DICT_PATH</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TramDagConfig.set_data_type-616"><a href="#TramDagConfig.set_data_type-616"><span class="linenos">616</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_class_call</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;CONF_DICT_PATH&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="TramDagConfig.set_data_type-617"><a href="#TramDagConfig.set_data_type-617"><span class="linenos">617</span></a>                <span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span>
</span><span id="TramDagConfig.set_data_type-618"><a href="#TramDagConfig.set_data_type-618"><span class="linenos">618</span></a>            <span class="k">elif</span> <span class="ow">not</span> <span class="n">is_class_call</span><span class="p">:</span>
</span><span id="TramDagConfig.set_data_type-619"><a href="#TramDagConfig.set_data_type-619"><span class="linenos">619</span></a>                <span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s2">&quot;configuration.json&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.set_data_type-620"><a href="#TramDagConfig.set_data_type-620"><span class="linenos">620</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="TramDagConfig.set_data_type-621"><a href="#TramDagConfig.set_data_type-621"><span class="linenos">621</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;CONF_DICT_PATH must be provided when called on the class.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.set_data_type-622"><a href="#TramDagConfig.set_data_type-622"><span class="linenos">622</span></a>
</span><span id="TramDagConfig.set_data_type-623"><a href="#TramDagConfig.set_data_type-623"><span class="linenos">623</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="TramDagConfig.set_data_type-624"><a href="#TramDagConfig.set_data_type-624"><span class="linenos">624</span></a>            <span class="c1"># load existing or create empty configuration</span>
</span><span id="TramDagConfig.set_data_type-625"><a href="#TramDagConfig.set_data_type-625"><span class="linenos">625</span></a>            <span class="n">configuration_dict</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="TramDagConfig.set_data_type-626"><a href="#TramDagConfig.set_data_type-626"><span class="linenos">626</span></a>                <span class="n">load_configuration_dict</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="TramDagConfig.set_data_type-627"><a href="#TramDagConfig.set_data_type-627"><span class="linenos">627</span></a>                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="TramDagConfig.set_data_type-628"><a href="#TramDagConfig.set_data_type-628"><span class="linenos">628</span></a>                <span class="k">else</span> <span class="p">{}</span>
</span><span id="TramDagConfig.set_data_type-629"><a href="#TramDagConfig.set_data_type-629"><span class="linenos">629</span></a>            <span class="p">)</span>
</span><span id="TramDagConfig.set_data_type-630"><a href="#TramDagConfig.set_data_type-630"><span class="linenos">630</span></a>
</span><span id="TramDagConfig.set_data_type-631"><a href="#TramDagConfig.set_data_type-631"><span class="linenos">631</span></a>            <span class="n">validate_variable_names</span><span class="p">(</span><span class="n">data_type</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="TramDagConfig.set_data_type-632"><a href="#TramDagConfig.set_data_type-632"><span class="linenos">632</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">validate_data_types</span><span class="p">(</span><span class="n">data_type</span><span class="p">):</span>
</span><span id="TramDagConfig.set_data_type-633"><a href="#TramDagConfig.set_data_type-633"><span class="linenos">633</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid data types in the provided dictionary.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.set_data_type-634"><a href="#TramDagConfig.set_data_type-634"><span class="linenos">634</span></a>
</span><span id="TramDagConfig.set_data_type-635"><a href="#TramDagConfig.set_data_type-635"><span class="linenos">635</span></a>            <span class="n">configuration_dict</span><span class="p">[</span><span class="s2">&quot;data_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_type</span>
</span><span id="TramDagConfig.set_data_type-636"><a href="#TramDagConfig.set_data_type-636"><span class="linenos">636</span></a>            <span class="n">write_configuration_dict</span><span class="p">(</span><span class="n">configuration_dict</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="TramDagConfig.set_data_type-637"><a href="#TramDagConfig.set_data_type-637"><span class="linenos">637</span></a>
</span><span id="TramDagConfig.set_data_type-638"><a href="#TramDagConfig.set_data_type-638"><span class="linenos">638</span></a>            <span class="c1"># safe printing</span>
</span><span id="TramDagConfig.set_data_type-639"><a href="#TramDagConfig.set_data_type-639"><span class="linenos">639</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="TramDagConfig.set_data_type-640"><a href="#TramDagConfig.set_data_type-640"><span class="linenos">640</span></a>                <span class="n">print_data_type_modeling_setting</span><span class="p">(</span><span class="n">data_type</span> <span class="ow">or</span> <span class="p">{})</span>
</span><span id="TramDagConfig.set_data_type-641"><a href="#TramDagConfig.set_data_type-641"><span class="linenos">641</span></a>            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="TramDagConfig.set_data_type-642"><a href="#TramDagConfig.set_data_type-642"><span class="linenos">642</span></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[WARNING] Could not print data type modeling settings: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.set_data_type-643"><a href="#TramDagConfig.set_data_type-643"><span class="linenos">643</span></a>
</span><span id="TramDagConfig.set_data_type-644"><a href="#TramDagConfig.set_data_type-644"><span class="linenos">644</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_class_call</span><span class="p">:</span>
</span><span id="TramDagConfig.set_data_type-645"><a href="#TramDagConfig.set_data_type-645"><span class="linenos">645</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span> <span class="o">=</span> <span class="n">configuration_dict</span>
</span><span id="TramDagConfig.set_data_type-646"><a href="#TramDagConfig.set_data_type-646"><span class="linenos">646</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="n">CONF_DICT_PATH</span>
</span><span id="TramDagConfig.set_data_type-647"><a href="#TramDagConfig.set_data_type-647"><span class="linenos">647</span></a>
</span><span id="TramDagConfig.set_data_type-648"><a href="#TramDagConfig.set_data_type-648"><span class="linenos">648</span></a>
</span><span id="TramDagConfig.set_data_type-649"><a href="#TramDagConfig.set_data_type-649"><span class="linenos">649</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="TramDagConfig.set_data_type-650"><a href="#TramDagConfig.set_data_type-650"><span class="linenos">650</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to update configuration: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.set_data_type-651"><a href="#TramDagConfig.set_data_type-651"><span class="linenos">651</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="TramDagConfig.set_data_type-652"><a href="#TramDagConfig.set_data_type-652"><span class="linenos">652</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuration updated successfully at </span><span class="si">{</span><span class="n">CONF_DICT_PATH</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Update or write the <code>data_type</code> section of a configuration file.</p>

<p>Supports both class-level and instance-level usage:</p>

<ul>
<li>Class call:</li>
<li>Requires <code><a href="#TramDagConfig.CONF_DICT_PATH">CONF_DICT_PATH</a></code> argument.</li>
<li>Reads the file if it exists, or starts from an empty dict.</li>
<li><p>Writes updated configuration to <code><a href="#TramDagConfig.CONF_DICT_PATH">CONF_DICT_PATH</a></code>.</p></li>
<li><p>Instance call:</p></li>
<li>Uses <code>self.CONF_DICT_PATH</code> if available, otherwise defaults to
<code>&lt;cwd&gt;/configuration.json</code> if no path is provided.</li>
<li>Updates <code>self.conf_dict</code> and <code>self.CONF_DICT_PATH</code> after writing.</li>
</ul>

<h2 id="parameters">Parameters</h2>

<p>data_type : dict
    Mapping <code>{variable_name: type_spec}</code>, where <code>type_spec</code> encodes
    modeling types (e.g. continuous, ordinal, etc.).
CONF_DICT_PATH : str or None, optional
    Path to the configuration file. Must be provided for class calls.
    For instance calls, defaults as described above.</p>

<h2 id="returns">Returns</h2>

<p>None</p>

<h2 id="raises">Raises</h2>

<p>ValueError
    If <code><a href="#TramDagConfig.CONF_DICT_PATH">CONF_DICT_PATH</a></code> is missing when called on the class, or if
    validation of data types fails.</p>

<h2 id="notes">Notes</h2>

<ul>
<li>Variable names are validated via <code>validate_variable_names</code>.</li>
<li>Data type values are validated via <code>validate_data_types</code>.</li>
<li>A textual summary of modeling settings is printed via
<code>print_data_type_modeling_setting</code>, if possible.</li>
</ul>
</div>


                            </div>
                            <div id="TramDagConfig.set_meta_adj_matrix" class="classattr">
                                        <input id="TramDagConfig.set_meta_adj_matrix-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_meta_adj_matrix</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>, </span><span class="param"><span class="n">seed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="TramDagConfig.set_meta_adj_matrix-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TramDagConfig.set_meta_adj_matrix"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TramDagConfig.set_meta_adj_matrix-654"><a href="#TramDagConfig.set_meta_adj_matrix-654"><span class="linenos">654</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_meta_adj_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">seed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">):</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-655"><a href="#TramDagConfig.set_meta_adj_matrix-655"><span class="linenos">655</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-656"><a href="#TramDagConfig.set_meta_adj_matrix-656"><span class="linenos">656</span></a><span class="sd">        Launch the interactive editor to set or modify the adjacency matrix.</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-657"><a href="#TramDagConfig.set_meta_adj_matrix-657"><span class="linenos">657</span></a>
</span><span id="TramDagConfig.set_meta_adj_matrix-658"><a href="#TramDagConfig.set_meta_adj_matrix-658"><span class="linenos">658</span></a><span class="sd">        This method:</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-659"><a href="#TramDagConfig.set_meta_adj_matrix-659"><span class="linenos">659</span></a>
</span><span id="TramDagConfig.set_meta_adj_matrix-660"><a href="#TramDagConfig.set_meta_adj_matrix-660"><span class="linenos">660</span></a><span class="sd">        1. Resolves the configuration path either from the argument or, for</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-661"><a href="#TramDagConfig.set_meta_adj_matrix-661"><span class="linenos">661</span></a><span class="sd">        instances, from `self.CONF_DICT_PATH`.</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-662"><a href="#TramDagConfig.set_meta_adj_matrix-662"><span class="linenos">662</span></a><span class="sd">        2. Invokes `interactive_adj_matrix` to edit the adjacency matrix.</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-663"><a href="#TramDagConfig.set_meta_adj_matrix-663"><span class="linenos">663</span></a><span class="sd">        3. For instances, reloads the updated configuration into `self.conf_dict`.</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-664"><a href="#TramDagConfig.set_meta_adj_matrix-664"><span class="linenos">664</span></a>
</span><span id="TramDagConfig.set_meta_adj_matrix-665"><a href="#TramDagConfig.set_meta_adj_matrix-665"><span class="linenos">665</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-666"><a href="#TramDagConfig.set_meta_adj_matrix-666"><span class="linenos">666</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-667"><a href="#TramDagConfig.set_meta_adj_matrix-667"><span class="linenos">667</span></a><span class="sd">        CONF_DICT_PATH : str or None, optional</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-668"><a href="#TramDagConfig.set_meta_adj_matrix-668"><span class="linenos">668</span></a><span class="sd">            Path to the configuration file. Must be provided when called</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-669"><a href="#TramDagConfig.set_meta_adj_matrix-669"><span class="linenos">669</span></a><span class="sd">            on the class. For instance calls, defaults to `self.CONF_DICT_PATH`.</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-670"><a href="#TramDagConfig.set_meta_adj_matrix-670"><span class="linenos">670</span></a><span class="sd">        seed : int, optional</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-671"><a href="#TramDagConfig.set_meta_adj_matrix-671"><span class="linenos">671</span></a><span class="sd">            Random seed for any layout or stochastic behavior in the interactive</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-672"><a href="#TramDagConfig.set_meta_adj_matrix-672"><span class="linenos">672</span></a><span class="sd">            editor. Default is 5.</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-673"><a href="#TramDagConfig.set_meta_adj_matrix-673"><span class="linenos">673</span></a>
</span><span id="TramDagConfig.set_meta_adj_matrix-674"><a href="#TramDagConfig.set_meta_adj_matrix-674"><span class="linenos">674</span></a><span class="sd">        Returns</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-675"><a href="#TramDagConfig.set_meta_adj_matrix-675"><span class="linenos">675</span></a><span class="sd">        -------</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-676"><a href="#TramDagConfig.set_meta_adj_matrix-676"><span class="linenos">676</span></a><span class="sd">        None</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-677"><a href="#TramDagConfig.set_meta_adj_matrix-677"><span class="linenos">677</span></a>
</span><span id="TramDagConfig.set_meta_adj_matrix-678"><a href="#TramDagConfig.set_meta_adj_matrix-678"><span class="linenos">678</span></a><span class="sd">        Raises</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-679"><a href="#TramDagConfig.set_meta_adj_matrix-679"><span class="linenos">679</span></a><span class="sd">        ------</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-680"><a href="#TramDagConfig.set_meta_adj_matrix-680"><span class="linenos">680</span></a><span class="sd">        ValueError</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-681"><a href="#TramDagConfig.set_meta_adj_matrix-681"><span class="linenos">681</span></a><span class="sd">            If `CONF_DICT_PATH` is not provided and cannot be inferred</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-682"><a href="#TramDagConfig.set_meta_adj_matrix-682"><span class="linenos">682</span></a><span class="sd">            (e.g. in a class call without path).</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-683"><a href="#TramDagConfig.set_meta_adj_matrix-683"><span class="linenos">683</span></a>
</span><span id="TramDagConfig.set_meta_adj_matrix-684"><a href="#TramDagConfig.set_meta_adj_matrix-684"><span class="linenos">684</span></a><span class="sd">        Notes</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-685"><a href="#TramDagConfig.set_meta_adj_matrix-685"><span class="linenos">685</span></a><span class="sd">        -----</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-686"><a href="#TramDagConfig.set_meta_adj_matrix-686"><span class="linenos">686</span></a><span class="sd">        `self.update()` is called at the start to ensure the in-memory config</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-687"><a href="#TramDagConfig.set_meta_adj_matrix-687"><span class="linenos">687</span></a><span class="sd">        is in sync with the file before launching the editor.</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-688"><a href="#TramDagConfig.set_meta_adj_matrix-688"><span class="linenos">688</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-689"><a href="#TramDagConfig.set_meta_adj_matrix-689"><span class="linenos">689</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-690"><a href="#TramDagConfig.set_meta_adj_matrix-690"><span class="linenos">690</span></a>        <span class="n">is_class_call</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-691"><a href="#TramDagConfig.set_meta_adj_matrix-691"><span class="linenos">691</span></a>        <span class="c1"># resolve path</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-692"><a href="#TramDagConfig.set_meta_adj_matrix-692"><span class="linenos">692</span></a>        <span class="k">if</span> <span class="n">CONF_DICT_PATH</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-693"><a href="#TramDagConfig.set_meta_adj_matrix-693"><span class="linenos">693</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_class_call</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;CONF_DICT_PATH&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-694"><a href="#TramDagConfig.set_meta_adj_matrix-694"><span class="linenos">694</span></a>                <span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-695"><a href="#TramDagConfig.set_meta_adj_matrix-695"><span class="linenos">695</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-696"><a href="#TramDagConfig.set_meta_adj_matrix-696"><span class="linenos">696</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;CONF_DICT_PATH must be provided when called on the class.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-697"><a href="#TramDagConfig.set_meta_adj_matrix-697"><span class="linenos">697</span></a>
</span><span id="TramDagConfig.set_meta_adj_matrix-698"><a href="#TramDagConfig.set_meta_adj_matrix-698"><span class="linenos">698</span></a>        <span class="c1"># launch interactive editor</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-699"><a href="#TramDagConfig.set_meta_adj_matrix-699"><span class="linenos">699</span></a>        
</span><span id="TramDagConfig.set_meta_adj_matrix-700"><a href="#TramDagConfig.set_meta_adj_matrix-700"><span class="linenos">700</span></a>        <span class="n">interactive_adj_matrix</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">)</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-701"><a href="#TramDagConfig.set_meta_adj_matrix-701"><span class="linenos">701</span></a>
</span><span id="TramDagConfig.set_meta_adj_matrix-702"><a href="#TramDagConfig.set_meta_adj_matrix-702"><span class="linenos">702</span></a>        <span class="c1"># reload config if instance</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-703"><a href="#TramDagConfig.set_meta_adj_matrix-703"><span class="linenos">703</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_class_call</span><span class="p">:</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-704"><a href="#TramDagConfig.set_meta_adj_matrix-704"><span class="linenos">704</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span> <span class="o">=</span> <span class="n">load_configuration_dict</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="TramDagConfig.set_meta_adj_matrix-705"><a href="#TramDagConfig.set_meta_adj_matrix-705"><span class="linenos">705</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="n">CONF_DICT_PATH</span>
</span></pre></div>


            <div class="docstring"><p>Launch the interactive editor to set or modify the adjacency matrix.</p>

<p>This method:</p>

<ol>
<li>Resolves the configuration path either from the argument or, for
instances, from <code>self.CONF_DICT_PATH</code>.</li>
<li>Invokes <code>interactive_adj_matrix</code> to edit the adjacency matrix.</li>
<li>For instances, reloads the updated configuration into <code>self.conf_dict</code>.</li>
</ol>

<h2 id="parameters">Parameters</h2>

<p>CONF_DICT_PATH : str or None, optional
    Path to the configuration file. Must be provided when called
    on the class. For instance calls, defaults to <code>self.CONF_DICT_PATH</code>.
seed : int, optional
    Random seed for any layout or stochastic behavior in the interactive
    editor. Default is 5.</p>

<h2 id="returns">Returns</h2>

<p>None</p>

<h2 id="raises">Raises</h2>

<p>ValueError
    If <code><a href="#TramDagConfig.CONF_DICT_PATH">CONF_DICT_PATH</a></code> is not provided and cannot be inferred
    (e.g. in a class call without path).</p>

<h2 id="notes">Notes</h2>

<p><code>self.update()</code> is called at the start to ensure the in-memory config
is in sync with the file before launching the editor.</p>
</div>


                            </div>
                            <div id="TramDagConfig.set_tramdag_nn_models" class="classattr">
                                        <input id="TramDagConfig.set_tramdag_nn_models-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_tramdag_nn_models</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="TramDagConfig.set_tramdag_nn_models-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TramDagConfig.set_tramdag_nn_models"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TramDagConfig.set_tramdag_nn_models-708"><a href="#TramDagConfig.set_tramdag_nn_models-708"><span class="linenos">708</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_tramdag_nn_models</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">CONF_DICT_PATH</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-709"><a href="#TramDagConfig.set_tramdag_nn_models-709"><span class="linenos">709</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-710"><a href="#TramDagConfig.set_tramdag_nn_models-710"><span class="linenos">710</span></a><span class="sd">        Launch the interactive editor to set TRAM-DAG neural network model names.</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-711"><a href="#TramDagConfig.set_tramdag_nn_models-711"><span class="linenos">711</span></a>
</span><span id="TramDagConfig.set_tramdag_nn_models-712"><a href="#TramDagConfig.set_tramdag_nn_models-712"><span class="linenos">712</span></a><span class="sd">        Depending on call context:</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-713"><a href="#TramDagConfig.set_tramdag_nn_models-713"><span class="linenos">713</span></a>
</span><span id="TramDagConfig.set_tramdag_nn_models-714"><a href="#TramDagConfig.set_tramdag_nn_models-714"><span class="linenos">714</span></a><span class="sd">        - Class call:</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-715"><a href="#TramDagConfig.set_tramdag_nn_models-715"><span class="linenos">715</span></a><span class="sd">        - Requires `CONF_DICT_PATH` argument.</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-716"><a href="#TramDagConfig.set_tramdag_nn_models-716"><span class="linenos">716</span></a><span class="sd">        - Returns nothing and does not modify a specific instance.</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-717"><a href="#TramDagConfig.set_tramdag_nn_models-717"><span class="linenos">717</span></a>
</span><span id="TramDagConfig.set_tramdag_nn_models-718"><a href="#TramDagConfig.set_tramdag_nn_models-718"><span class="linenos">718</span></a><span class="sd">        - Instance call:</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-719"><a href="#TramDagConfig.set_tramdag_nn_models-719"><span class="linenos">719</span></a><span class="sd">        - Resolves `CONF_DICT_PATH` from the argument or `self.CONF_DICT_PATH`.</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-720"><a href="#TramDagConfig.set_tramdag_nn_models-720"><span class="linenos">720</span></a><span class="sd">        - Updates `self.conf_dict` and `self.CONF_DICT_PATH` if the editor</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-721"><a href="#TramDagConfig.set_tramdag_nn_models-721"><span class="linenos">721</span></a><span class="sd">            returns an updated configuration.</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-722"><a href="#TramDagConfig.set_tramdag_nn_models-722"><span class="linenos">722</span></a>
</span><span id="TramDagConfig.set_tramdag_nn_models-723"><a href="#TramDagConfig.set_tramdag_nn_models-723"><span class="linenos">723</span></a><span class="sd">        Parameters</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-724"><a href="#TramDagConfig.set_tramdag_nn_models-724"><span class="linenos">724</span></a><span class="sd">        ----------</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-725"><a href="#TramDagConfig.set_tramdag_nn_models-725"><span class="linenos">725</span></a><span class="sd">        CONF_DICT_PATH : str or None, optional</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-726"><a href="#TramDagConfig.set_tramdag_nn_models-726"><span class="linenos">726</span></a><span class="sd">            Path to the configuration file. Must be provided when called on</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-727"><a href="#TramDagConfig.set_tramdag_nn_models-727"><span class="linenos">727</span></a><span class="sd">            the class. For instance calls, defaults to `self.CONF_DICT_PATH`.</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-728"><a href="#TramDagConfig.set_tramdag_nn_models-728"><span class="linenos">728</span></a>
</span><span id="TramDagConfig.set_tramdag_nn_models-729"><a href="#TramDagConfig.set_tramdag_nn_models-729"><span class="linenos">729</span></a><span class="sd">        Returns</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-730"><a href="#TramDagConfig.set_tramdag_nn_models-730"><span class="linenos">730</span></a><span class="sd">        -------</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-731"><a href="#TramDagConfig.set_tramdag_nn_models-731"><span class="linenos">731</span></a><span class="sd">        None</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-732"><a href="#TramDagConfig.set_tramdag_nn_models-732"><span class="linenos">732</span></a>
</span><span id="TramDagConfig.set_tramdag_nn_models-733"><a href="#TramDagConfig.set_tramdag_nn_models-733"><span class="linenos">733</span></a><span class="sd">        Raises</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-734"><a href="#TramDagConfig.set_tramdag_nn_models-734"><span class="linenos">734</span></a><span class="sd">        ------</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-735"><a href="#TramDagConfig.set_tramdag_nn_models-735"><span class="linenos">735</span></a><span class="sd">        ValueError</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-736"><a href="#TramDagConfig.set_tramdag_nn_models-736"><span class="linenos">736</span></a><span class="sd">            If `CONF_DICT_PATH` is not provided and cannot be inferred</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-737"><a href="#TramDagConfig.set_tramdag_nn_models-737"><span class="linenos">737</span></a><span class="sd">            (e.g. in a class call without path).</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-738"><a href="#TramDagConfig.set_tramdag_nn_models-738"><span class="linenos">738</span></a>
</span><span id="TramDagConfig.set_tramdag_nn_models-739"><a href="#TramDagConfig.set_tramdag_nn_models-739"><span class="linenos">739</span></a><span class="sd">        Notes</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-740"><a href="#TramDagConfig.set_tramdag_nn_models-740"><span class="linenos">740</span></a><span class="sd">        -----</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-741"><a href="#TramDagConfig.set_tramdag_nn_models-741"><span class="linenos">741</span></a><span class="sd">        The interactive editor is invoked via `interactive_nn_names_matrix`.</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-742"><a href="#TramDagConfig.set_tramdag_nn_models-742"><span class="linenos">742</span></a><span class="sd">        If it returns `None`, the instance configuration is left unchanged.</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-743"><a href="#TramDagConfig.set_tramdag_nn_models-743"><span class="linenos">743</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-744"><a href="#TramDagConfig.set_tramdag_nn_models-744"><span class="linenos">744</span></a>        <span class="n">is_class_call</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-745"><a href="#TramDagConfig.set_tramdag_nn_models-745"><span class="linenos">745</span></a>        <span class="k">if</span> <span class="n">CONF_DICT_PATH</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-746"><a href="#TramDagConfig.set_tramdag_nn_models-746"><span class="linenos">746</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_class_call</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;CONF_DICT_PATH&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-747"><a href="#TramDagConfig.set_tramdag_nn_models-747"><span class="linenos">747</span></a>                <span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-748"><a href="#TramDagConfig.set_tramdag_nn_models-748"><span class="linenos">748</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-749"><a href="#TramDagConfig.set_tramdag_nn_models-749"><span class="linenos">749</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;CONF_DICT_PATH must be provided when called on the class.&quot;</span><span class="p">)</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-750"><a href="#TramDagConfig.set_tramdag_nn_models-750"><span class="linenos">750</span></a>
</span><span id="TramDagConfig.set_tramdag_nn_models-751"><a href="#TramDagConfig.set_tramdag_nn_models-751"><span class="linenos">751</span></a>        <span class="n">updated_conf</span> <span class="o">=</span> <span class="n">interactive_nn_names_matrix</span><span class="p">(</span><span class="n">CONF_DICT_PATH</span><span class="p">)</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-752"><a href="#TramDagConfig.set_tramdag_nn_models-752"><span class="linenos">752</span></a>        <span class="k">if</span> <span class="n">updated_conf</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">is_class_call</span><span class="p">:</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-753"><a href="#TramDagConfig.set_tramdag_nn_models-753"><span class="linenos">753</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">conf_dict</span> <span class="o">=</span> <span class="n">updated_conf</span>
</span><span id="TramDagConfig.set_tramdag_nn_models-754"><a href="#TramDagConfig.set_tramdag_nn_models-754"><span class="linenos">754</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">CONF_DICT_PATH</span> <span class="o">=</span> <span class="n">CONF_DICT_PATH</span>
</span></pre></div>


            <div class="docstring"><p>Launch the interactive editor to set TRAM-DAG neural network model names.</p>

<p>Depending on call context:</p>

<ul>
<li>Class call:</li>
<li>Requires <code><a href="#TramDagConfig.CONF_DICT_PATH">CONF_DICT_PATH</a></code> argument.</li>
<li><p>Returns nothing and does not modify a specific instance.</p></li>
<li><p>Instance call:</p></li>
<li>Resolves <code><a href="#TramDagConfig.CONF_DICT_PATH">CONF_DICT_PATH</a></code> from the argument or <code>self.CONF_DICT_PATH</code>.</li>
<li>Updates <code>self.conf_dict</code> and <code>self.CONF_DICT_PATH</code> if the editor
returns an updated configuration.</li>
</ul>

<h2 id="parameters">Parameters</h2>

<p>CONF_DICT_PATH : str or None, optional
    Path to the configuration file. Must be provided when called on
    the class. For instance calls, defaults to <code>self.CONF_DICT_PATH</code>.</p>

<h2 id="returns">Returns</h2>

<p>None</p>

<h2 id="raises">Raises</h2>

<p>ValueError
    If <code><a href="#TramDagConfig.CONF_DICT_PATH">CONF_DICT_PATH</a></code> is not provided and cannot be inferred
    (e.g. in a class call without path).</p>

<h2 id="notes">Notes</h2>

<p>The interactive editor is invoked via <code>interactive_nn_names_matrix</code>.
If it returns <code>None</code>, the instance configuration is left unchanged.</p>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>